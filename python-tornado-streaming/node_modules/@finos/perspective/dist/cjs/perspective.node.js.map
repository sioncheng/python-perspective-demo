{
  "version": 3,
  "sources": ["../../src/js/api/dispatch.js", "../../src/js/api/view_api.js", "../../src/js/utils.js", "../../src/js/api/table_api.js", "../../src/js/api/client.js", "../../src/js/config/settings.js", "../../src/js/config/index.js", "../../src/js/api/server.js", "../../src/js/websocket/manager.js", "../../src/js/websocket/client.js", "../../src/js/config/constants.js", "../../src/js/data_accessor/index.js", "../../src/js/emscripten.js", "../../src/js/perspective.js", "../pkg/node/perspective.cpp.js", "wasm-inline:../../dist/pkg/node/perspective.cpp.wasm", "../../src/js/perspective.node.js"],
  "sourcesContent": ["// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nconst __CALLBACK_CACHE__ = new WeakMap();\nlet __CALLBACK_INDEX__ = 0;\n\n/**\n * Unbind a listener to an event.\n *\n * @param {*} method\n * @param {*} cmd\n */\nexport function unsubscribe(method, cmd) {\n    return function () {\n        let resolve;\n        let reject = () => {};\n        let args = Array.prototype.slice.call(arguments, 0, arguments.length);\n        for (let i = args.length - 1; i >= 0; i--) {\n            if (typeof args[i] === \"function\") {\n                resolve = args.splice(i, 1)[0];\n            }\n        }\n        const callback_id = __CALLBACK_CACHE__.get(resolve);\n        __CALLBACK_CACHE__.delete(resolve);\n        let msg = {\n            cmd: cmd || \"view_method\",\n            name: this._name,\n            method: method,\n            args: args,\n            subscribe: true,\n            callback_id,\n        };\n        this._worker.post(msg, resolve, reject);\n        this._worker.unsubscribe(cmd, resolve);\n    };\n}\n\n/**\n * Bind a listener to an event.\n *\n * @param {*} method\n * @param {*} cmd\n */\nexport function subscribe(method, cmd) {\n    return function () {\n        let resolve;\n        let reject = () => {};\n        let args = Array.prototype.slice.call(arguments, 0, arguments.length);\n        for (let i = args.length - 1; i >= 0; i--) {\n            if (typeof args[i] === \"function\") {\n                resolve = args.splice(i, 1)[0];\n            }\n        }\n        __CALLBACK_INDEX__++;\n        __CALLBACK_CACHE__.set(resolve, __CALLBACK_INDEX__);\n        let msg = {\n            cmd: cmd || \"view_method\",\n            name: this._name,\n            method: method,\n            args: args,\n            subscribe: true,\n            callback_id: __CALLBACK_INDEX__,\n        };\n        this._worker.post(msg, resolve, reject, true);\n    };\n}\n\n/**\n * Add a method call to the queue, preparing it for execution.\n *\n * Returns a bound function that calls the desired method on the server.\n *\n * @param {*} method\n * @param {*} cmd\n */\nexport function async_queue(method, cmd) {\n    return function () {\n        var args = Array.prototype.slice.call(arguments, 0, arguments.length);\n        return new Promise(\n            function (resolve, reject) {\n                var msg = {\n                    cmd: cmd || \"view_method\",\n                    name: this._name,\n                    method: method,\n                    args: args,\n                    subscribe: false,\n                };\n                this._worker.post(msg, resolve, reject);\n            }.bind(this)\n        );\n    };\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { subscribe, unsubscribe, async_queue } from \"./dispatch.js\";\n\n/**\n * Construct a proxy for the view object by creating a \"view\" message and\n * sending it through the worker.\n *\n * @param {*} worker\n * @param {*} table_name\n * @param {*} config\n */\nexport function view(worker, table_name, config) {\n    return new Promise((resolve, reject) => {\n        this._worker = worker;\n        this._name = Math.random() + \"\";\n\n        this._worker.post(\n            {\n                cmd: \"view\",\n                view_name: this._name,\n                table_name: table_name,\n                config: config,\n            },\n            () => {\n                // Resolve the Promise with this function, which is a proxy\n                // view that dispatches all view methods to the backend, i.e.\n                // a Web Worker or a Python/Node Perspective server. Because\n                // arrow functions automatically capture `this` from the\n                // surrounding scope, there is no need to explicitly bind the\n                // resolving value to `this`.\n                resolve(this);\n            },\n            reject\n        );\n\n        if (\n            this._worker._initialized === true &&\n            !this._worker._features?.wait_for_response\n        ) {\n            resolve(this);\n        }\n    });\n}\n\n/**\n * Create a reference to a view located on `worker` for use by remote clients.\n *\n * @param {worker} worker the Web Worker at which the view is located.\n * @param {String} name a unique name for the view.\n */\nexport function proxy_view(worker, name) {\n    this._worker = worker;\n    this._name = name;\n}\n\nproxy_view.prototype = view.prototype;\n\n// Send view methods that do not create new objects (getters, setters etc.) to\n// the queue for processing.\n\nview.prototype.get_config = async_queue(\"get_config\");\n\nview.prototype.get_min_max = async_queue(\"get_min_max\");\n\nview.prototype.to_json = async_queue(\"to_json\");\n\nview.prototype.to_arrow = async_queue(\"to_arrow\");\n\nview.prototype.to_columns = async_queue(\"to_columns\");\n\nview.prototype.to_columns_string = async_queue(\"to_columns_string\");\n\nview.prototype.to_csv = async_queue(\"to_csv\");\n\nview.prototype.schema = async_queue(\"schema\");\n\nview.prototype.expression_schema = async_queue(\"expression_schema\");\n\nview.prototype.column_paths = async_queue(\"column_paths\");\n\nview.prototype.num_columns = async_queue(\"num_columns\");\n\nview.prototype.num_rows = async_queue(\"num_rows\");\n\nview.prototype.dimensions = async_queue(\"dimensions\");\n\nview.prototype.set_depth = async_queue(\"set_depth\");\n\nview.prototype.get_row_expanded = async_queue(\"get_row_expanded\");\n\nview.prototype.expand = async_queue(\"expand\");\n\nview.prototype.collapse = async_queue(\"collapse\");\n\nview.prototype.delete = async_queue(\"delete\");\n\nview.prototype.col_to_js_typed_array = async_queue(\"col_to_js_typed_array\");\n\nview.prototype.on_update = subscribe(\"on_update\", \"view_method\", true);\n\nview.prototype.remove_update = unsubscribe(\n    \"remove_update\",\n    \"view_method\",\n    true\n);\n\nview.prototype.on_delete = subscribe(\"on_delete\", \"view_method\", true);\n\nview.prototype.remove_delete = unsubscribe(\n    \"remove_delete\",\n    \"view_method\",\n    true\n);\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\n/**\n * Gets human-readable types for a column\n * @private\n * @returns {string}\n */\nexport function get_column_type(val) {\n    if (val >= 1 && val <= 8) {\n        return \"integer\";\n    } else if (val === 19) {\n        return \"string\";\n    } else if (val === 10 || val === 9) {\n        return \"float\";\n    } else if (val === 11) {\n        return \"boolean\";\n    } else if (val === 12) {\n        return \"datetime\";\n    } else if (val === 13) {\n        return \"date\";\n    } else {\n        console.warn(\n            `Unknown type for value ${val} with JS type ${typeof val}`\n        );\n    }\n}\n\n/**\n * Bind all methods in a class to the class instance.  It is sad that this is\n * necessary.\n *\n * @export\n * @param {*} self\n */\nexport function bindall(self) {\n    let obj = self;\n    do {\n        for (const key of Object.getOwnPropertyNames(obj)) {\n            const value = self[key];\n            if (key !== \"constructor\" && typeof value === \"function\") {\n                self[key] = value.bind(self);\n            }\n        }\n    } while ((obj = obj !== Object && Object.getPrototypeOf(obj)));\n}\n\n/**\n * Detect Node.js.\n *\n * Returns\n * -------\n * True if the current script is running in Node.js.\n */\nexport function detectNode() {\n    return typeof window === \"undefined\";\n}\n\n/**\n * Detect Chrome.\n *\n * Returns\n * -------\n * Detect if the current script is running in Chrome.\n */\nexport function detectChrome() {\n    var isChromium = window.chrome,\n        winNav = window.navigator,\n        vendorName = winNav.vendor,\n        isOpera = winNav.userAgent.indexOf(\"OPR\") > -1,\n        isIEedge = winNav.userAgent.indexOf(\"Edge\") > -1,\n        isIOSChrome = winNav.userAgent.match(\"CriOS\");\n\n    if (isIOSChrome) {\n        return true;\n    } else if (\n        isChromium !== null &&\n        typeof isChromium !== \"undefined\" &&\n        vendorName === \"Google Inc.\" &&\n        isOpera === false &&\n        isIEedge === false\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// https://github.com/kripken/emscripten/issues/6042\nexport function detect_iphone() {\n    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n}\n\n/**\n * String.includes() polyfill\n */\nif (!String.prototype.includes) {\n    String.prototype.includes = function (search, start) {\n        if (typeof start !== \"number\") {\n            start = 0;\n        }\n\n        if (start + search.length > this.length) {\n            return false;\n        } else {\n            return this.indexOf(search, start) !== -1;\n        }\n    };\n}\n\n// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes\nif (!Array.prototype.includes) {\n    Object.defineProperty(Array.prototype, \"includes\", {\n        value: function (searchElement, fromIndex) {\n            if (this == null) {\n                throw new TypeError('\"this\" is null or not defined');\n            }\n\n            // 1. Let O be ? ToObject(this value).\n            var o = Object(this);\n\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\n            var len = o.length >>> 0;\n\n            // 3. If len is 0, return false.\n            if (len === 0) {\n                return false;\n            }\n\n            // 4. Let n be ? ToInteger(fromIndex). (If fromIndex is undefined,\n            //    this step produces the value 0.)\n            var n = fromIndex | 0;\n\n            // 5. If n \u2265 0, then a. Let k be n.\n            // 6. Else n < 0, a. Let k be len + n. b. If k < 0, let k be 0.\n            var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n            function sameValueZero(x, y) {\n                return (\n                    x === y ||\n                    (typeof x === \"number\" &&\n                        typeof y === \"number\" &&\n                        isNaN(x) &&\n                        isNaN(y))\n                );\n            }\n\n            // 7. Repeat, while k < len\n            while (k < len) {\n                // a. Let elementK be the result of ? Get(O, ! ToString(k)). b.\n                // If SameValueZero(searchElement, elementK) is true, return\n                // true.\n                if (sameValueZero(o[k], searchElement)) {\n                    return true;\n                }\n                // c. Increase k by 1.\n                k++;\n            }\n\n            // 8. Return false\n            return false;\n        },\n    });\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { unsubscribe, subscribe, async_queue } from \"./dispatch.js\";\nimport { view } from \"./view_api.js\";\nimport { bindall } from \"../utils.js\";\n\n/**\n * Construct a proxy for the table object by creating a \"table\" message and\n * sending it through the worker.\n *\n * @param {*} worker\n * @param {*} data\n * @param {*} options\n */\nexport function table(worker, data, options) {\n    return new Promise((resolve, reject) => {\n        this._worker = worker;\n        this._name = options.name || Math.random() + \"\";\n\n        bindall(this);\n\n        if (data.to_arrow) {\n            this._worker.post({\n                cmd: \"table\",\n                name: this._name,\n                args: [],\n                options: options || {},\n            });\n            data.to_arrow().then((arrow) => {\n                this._worker.post(\n                    {\n                        cmd: \"table\",\n                        name: this._name,\n                        args: [arrow],\n                        options: options || {},\n                    },\n                    () => {\n                        data.on_update(\n                            (updated) => {\n                                this.update(updated.delta);\n                            },\n                            { mode: \"row\" }\n                        );\n                        resolve(this);\n                    },\n                    reject\n                );\n            });\n        } else {\n            this._worker.post(\n                {\n                    cmd: \"table\",\n                    name: this._name,\n                    args: [data],\n                    options: options || {},\n                },\n                () => {\n                    resolve(this);\n                },\n                reject\n            );\n        }\n\n        if (\n            this._worker._initialized === true &&\n            !this._worker._features?.wait_for_response\n        ) {\n            resolve(this);\n        }\n    });\n}\n\ntable.prototype.type = \"table\";\n\n/**\n * Create a reference to a Perspective table at `worker` for use by remote\n * clients.\n *\n * @param {worker} worker the Web Worker at which the table is located.\n * @param {String} name a unique name for the table.\n */\nexport function proxy_table(worker, name) {\n    this._worker = worker;\n    this._name = name;\n}\n\nproxy_table.prototype = table.prototype;\n\n// Dispatch table methods that create new objects to the worker\ntable.prototype.view = function (config) {\n    return new view(this._worker, this._name, config);\n};\n\ntable.prototype.query_columns = async_queue(\"query_columns\", \"table_method\");\n\n// Dispatch table methods that do not create new objects (getters, setters etc.)\n// to the queue for processing.\ntable.prototype.get_index = async_queue(\"get_index\", \"table_method\");\n\ntable.prototype.get_limit = async_queue(\"get_limit\", \"table_method\");\n\ntable.prototype.get_num_views = async_queue(\"get_num_views\", \"table_method\");\n\ntable.prototype.make_port = async_queue(\"make_port\", \"table_method\");\n\ntable.prototype.remove_port = async_queue(\"remove_port\", \"table_method\");\n\ntable.prototype.schema = async_queue(\"schema\", \"table_method\");\n\ntable.prototype.validate_expressions = async_queue(\n    \"validate_expressions\",\n    \"table_method\"\n);\n\ntable.prototype.is_valid_filter = async_queue(\n    \"is_valid_filter\",\n    \"table_method\"\n);\n\ntable.prototype.size = async_queue(\"size\", \"table_method\");\n\ntable.prototype.num_rows = async_queue(\"num_rows\", \"table_method\");\n\ntable.prototype.num_columns = async_queue(\"num_columns\", \"table_method\");\n\ntable.prototype.columns = async_queue(\"columns\", \"table_method\");\n\ntable.prototype.clear = async_queue(\"clear\", \"table_method\");\n\ntable.prototype.replace = async_queue(\"replace\", \"table_method\");\n\ntable.prototype.delete = async_queue(\"delete\", \"table_method\");\n\ntable.prototype.on_delete = subscribe(\"on_delete\", \"table_method\", true);\n\ntable.prototype.remove = async_queue(\"remove\", \"table_method\");\n\ntable.prototype.remove_delete = unsubscribe(\n    \"remove_delete\",\n    \"table_method\",\n    true\n);\n\ntable.prototype.update = function (data, options) {\n    return new Promise((resolve, reject) => {\n        this._worker.post(\n            {\n                name: this._name,\n                cmd: \"table_method\",\n                method: \"update\",\n                args: [data, options || {}],\n            },\n            resolve,\n            reject,\n            false\n        );\n    });\n};\n\ntable.prototype.execute = function (f) {\n    this._worker.post({\n        cmd: \"table_execute\",\n        name: this._name,\n        f: f.toString(),\n    });\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { table, proxy_table } from \"./table_api.js\";\nimport { bindall } from \"../utils.js\";\n\n/**\n * Perspective's worker API handles and processes asynchronous messages,\n * interfacing with the Perspective host class.  Child classes must implement\n * the `send()` interface, which defines how messages are dispatched in\n * different contexts.  `handlers` is a dictionary of resolve/reject callbacks\n * for each method the worker receives.\n *\n * @export\n */\nexport class Client {\n    constructor() {\n        this._initialized = false;\n        this._worker = {\n            initialized: { value: false },\n            transferable: false,\n            msg_id: 0,\n            handlers: {},\n            messages: [],\n        };\n        bindall(this);\n    }\n\n    /**\n     * Remove a listener for a Perspective-generated event.\n     */\n    unsubscribe(cmd, handler) {\n        for (let key of Object.keys(this._worker.handlers)) {\n            if (this._worker.handlers[key].resolve === handler) {\n                delete this._worker.handlers[key];\n            }\n        }\n    }\n\n    /**\n     * Send a message to the server.\n     */\n    post(msg, resolve, reject, keep_alive = false) {\n        ++this._worker.msg_id;\n        if (resolve || reject) {\n            this._worker.handlers[this._worker.msg_id] = {\n                resolve,\n                reject,\n                keep_alive,\n            };\n        }\n        msg.id = this._worker.msg_id;\n        if (this._worker.initialized.value) {\n            this.send(msg);\n        } else {\n            this._worker.messages.push(() => {\n                this.send(msg);\n\n                if (\n                    (msg.cmd === \"table\" || msg.cmd === \"view\") &&\n                    !this._features?.wait_for_response &&\n                    resolve\n                ) {\n                    resolve();\n                }\n            });\n        }\n    }\n\n    /**\n     * Snapshots memory usage from the WebWorker or Node.js process, with the\n     * addition of `wasmHeap` Emscripten's linear memory\n     * @async\n     * @returns {MemoryUsage}\n     */\n    async memory_usage() {\n        return await new Promise((resolve, reject) => {\n            this.post({ cmd: \"memory_usage\" }, resolve, reject);\n        });\n    }\n\n    async get_hosted_table_names() {\n        return await new Promise((resolve, reject) => {\n            this.post({ cmd: \"get_hosted_table_names\" }, resolve, reject);\n        });\n    }\n\n    initialize_profile_thread() {\n        if (this._worker.initialized.value) {\n            this.send({ id: -1, cmd: \"init_profile_thread\" });\n        } else {\n            this._worker.messages.push(() =>\n                this.send({ id: -1, cmd: \"init_profile_thread\" })\n            );\n        }\n    }\n\n    /**\n     * Must be implemented in order to transport commands to the server.\n     */\n    send() {\n        throw new Error(\"send() not implemented\");\n    }\n\n    /**\n     * Given the name of a table that is hosted on the server (e.g. using\n     * `perspective-python` or `perspective` in NodeJS), return a `table`\n     * instance that sends all operations and instructions to the `table` on the\n     * server.\n     *\n     * @param {string} name\n     */\n    async open_table(name) {\n        return new proxy_table(this, name);\n    }\n\n    /**\n     * Receive a message from the server, and resolve/reject the promise that\n     * is awaiting the content of the message.\n     */\n    _handle(e) {\n        if (!this._worker.initialized.value) {\n            if (!this._initialized) {\n                this._initialized = true;\n            }\n\n            const msgs = this._worker.messages;\n            this._worker.initialized.value = true;\n            this._worker.messages = [];\n\n            // If the `data` attribute of the init message is set, then\n            // set the `features` dictionary with the flags from the server.\n            if (e.data?.data) {\n                this._features = {};\n\n                for (const feature of e.data.data) {\n                    this._features[feature] = true;\n                }\n            }\n\n            if (msgs) {\n                for (const m in msgs) {\n                    if (msgs.hasOwnProperty(m)) {\n                        msgs[m]();\n                    }\n                }\n            }\n        }\n\n        if (e.data.id) {\n            const handler = this._worker.handlers[e.data.id];\n\n            if (handler) {\n                if (e.data.error) {\n                    handler.reject(e.data.error);\n                } else {\n                    handler.resolve(e.data.data);\n                }\n\n                if (!handler.keep_alive) {\n                    delete this._worker.handlers[e.data.id];\n                }\n            }\n        }\n    }\n\n    table(data, options) {\n        return new table(this, data, options || {});\n    }\n\n    terminate() {\n        this._worker.terminate();\n        this._worker = undefined;\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\n/**\n * The default settings which populate `perspective.config.js`.\n */\nexport default {\n    /**\n     * `types` are the type-specific configuration options.  Each key is the\n     * name of a perspective type; their values are configuration objects for\n     * that type.\n     */\n    types: {\n        float: {\n            /**\n             * Which filter operator should be the default when a column of this\n             * type is pivotted.\n             */\n            filter_operator: \"==\",\n\n            /**\n             * Which aggregate should be the default when a column of this type\n             * is pivotted.\n             */\n            aggregate: \"sum\",\n\n            /**\n             * The format object for this type.  Can be either an\n             * `toLocaleString()` `options` object for this type (or supertype),\n             * or a function which returns the formatted string for this type.\n             */\n            format: {\n                style: \"decimal\",\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2,\n            },\n        },\n        string: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n        },\n        integer: {\n            filter_operator: \"==\",\n            aggregate: \"sum\",\n            format: {},\n        },\n        boolean: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n        },\n        datetime: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                dateStyle: \"short\",\n                timeStyle: \"medium\",\n            },\n            null_value: -1,\n        },\n        date: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                dateStyle: \"short\",\n            },\n            null_value: -1,\n        },\n    },\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport DEFAULT_CONFIG from \"./settings.js\";\n\nexport function get_types() {\n    return Object.keys(get_config().types);\n}\n\nexport function get_type_config(type) {\n    const config = {};\n    if (get_config().types[type]) {\n        Object.assign(config, get_config().types[type]);\n    }\n    if (config.type) {\n        const props = get_type_config(config.type);\n        Object.assign(props, config);\n        return props;\n    } else {\n        return config;\n    }\n}\n\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) Object.assign(target, { [key]: {} });\n                mergeDeep(target[key], source[key]);\n            } else {\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n\nexport function override_config(config) {\n    if (globalThis.__PERSPECTIVE_CONFIG__) {\n        console.warn(\"Config already initialized!\");\n    }\n    globalThis.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, config);\n}\n\nexport function get_config() {\n    if (!globalThis.__PERSPECTIVE_CONFIG__) {\n        globalThis.__PERSPECTIVE_CONFIG__ = mergeDeep(\n            DEFAULT_CONFIG,\n            globalThis.__TEMPLATE_CONFIG__ || {}\n        );\n    }\n    return globalThis.__PERSPECTIVE_CONFIG__;\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { override_config } from \"../config\";\n\nfunction error_to_json(error) {\n    const obj = {};\n    if (typeof error !== \"string\") {\n        Object.getOwnPropertyNames(error).forEach((key) => {\n            obj[key] = error[key];\n        }, error);\n    } else {\n        obj[\"message\"] = error;\n    }\n    return obj;\n}\n\n/**\n * The base class for Perspective's async API. It initializes and keeps track of\n * tables, views, and processes messages from the user into the Perspective\n * engine.\n *\n * Child classes must implement the `post()` interface, which defines how the\n * server sends messages to the client. The implementation of `Server` for\n * Web Workers can be found in `perspective.js`, and an implementation for\n * Node.JS can be found in `perspective.node.js`.\n */\nexport class Server {\n    constructor(perspective) {\n        this.perspective = perspective;\n        this._tables = {};\n        this._views = {};\n        this._callback_cache = new Map();\n    }\n\n    /**\n     * Return an initialization message to the client for confirmation.\n     * `Server` must be extended and the `post` method implemented before the\n     * server can successfully be initialized.\n     */\n    init(msg) {\n        if (msg.config) {\n            override_config(msg.config);\n        }\n\n        // The client will wait for a response message on table() and\n        // view(). If this flag is not set, the table() and view()\n        // constructors will resolve automatically and errors from the\n        // server will not be caught in those constructors. This allows\n        // for backwards compatibility between newer frontends (those\n        // with async table/view constructors) and older servers (which\n        // do not send the response message to the client).\n        msg.data = [\"wait_for_response\"];\n\n        this.post(msg);\n    }\n\n    /**\n     * Send a message from the Perspective server to the Perspective client -\n     * this method must be implemented before the server can be used.\n     *\n     * @param {Object} msg a message to be sent to the client.\n     */\n    post(msg) {\n        throw new Error(`Posting ${msg} failed - post() not implemented!`);\n    }\n\n    /**\n     * Given a message, execute its instructions. This method is the dispatcher\n     * for all Perspective actions, including table/view creation, deletion, and\n     * all method calls to/from the table and view.\n     *\n     * @param {*} msg an Object containing `cmd` (a String instruction) and\n     * associated data for that instruction\n     * @param {*} client_id\n     */\n    process(msg, client_id) {\n        switch (msg.cmd) {\n            case \"init_profile_thread\":\n                this.perspective.initialize_profile_thread();\n                break;\n            case \"get_hosted_table_names\":\n                this.post({\n                    id: msg.id,\n                    data: Object.keys(this._tables),\n                });\n                break;\n            case \"memory_usage\":\n                this.post({\n                    id: msg.id,\n                    data: this.perspective.memory_usage(),\n                });\n                break;\n            case \"init\":\n                this.init(msg);\n                break;\n            case \"table\":\n                if (typeof msg.args[0] === \"undefined\") {\n                    // Cache messages for when a table is created but not fully\n                    // initialized, i.e. in the case when a table is created\n                    // from a view, as the view needs to be serialized to an\n                    // arrow before the table will be ready.\n                    this._tables[msg.name] = [];\n                } else {\n                    try {\n                        const msgs = this._tables[msg.name];\n                        const table = this.perspective.table(\n                            msg.args[0],\n                            msg.options\n                        );\n\n                        // When using the Node server, the `table()` constructor\n                        // returns a Promise, but in the Web Worker version,\n                        // table() synchronously returns an instance of a Table.\n                        if (table && table.then) {\n                            table\n                                .then((table) => {\n                                    this._tables[msg.name] = table;\n\n                                    // Process cached messages for this table.\n                                    if (msgs) {\n                                        for (const msg of msgs) {\n                                            this.process(msg);\n                                        }\n                                    }\n\n                                    // Resolve the promise to return a Table.\n                                    this.post({\n                                        id: msg.id,\n                                        data: msg.name,\n                                    });\n                                })\n                                .catch((error) =>\n                                    this.process_error(msg, error)\n                                );\n                        } else {\n                            this._tables[msg.name] = table;\n\n                            // Process cached messages for this table.\n                            if (msgs) {\n                                for (const msg of msgs) {\n                                    this.process(msg);\n                                }\n                            }\n\n                            // Resolve the promise to return a Table.\n                            this.post({\n                                id: msg.id,\n                                data: msg.name,\n                            });\n                        }\n                    } catch (error) {\n                        this.process_error(msg, error);\n                        return;\n                    }\n                }\n                break;\n            case \"table_generate\":\n                let g = (0, eval)(msg.args);\n                g(function (tbl) {\n                    this._tables[msg.name] = tbl;\n                    this.post({\n                        id: msg.id,\n                        data: \"created!\",\n                    });\n                });\n                break;\n            case \"table_execute\":\n                let f = (0, eval)(msg.f);\n                f(this._tables[msg.name]);\n                break;\n            case \"table_method\":\n            case \"view_method\":\n                this.process_method_call(msg);\n                break;\n            case \"view\":\n                const tableMsgQueue = this._tables[msg.table_name];\n\n                if (tableMsgQueue && Array.isArray(tableMsgQueue)) {\n                    // If the table is not initialized, defer this message for\n                    // until after the table is initialized, and create a new\n                    // message queue for the uninitialized view.\n                    tableMsgQueue.push(msg);\n                    this._views[msg.view_name] = [];\n                } else {\n                    // Create a new view and resolve the Promise on the client\n                    // with the name of the view, which the client will use to\n                    // construct a new view proxy.\n                    try {\n                        const msgs = this._views[msg.view_name];\n\n                        // When using the Node server, the `view()` constructor\n                        // returns a Promise, but in the Web Worker version,\n                        // view() synchronously returns an instance of a View.\n                        const view = this._tables[msg.table_name].view(\n                            msg.config\n                        );\n\n                        if (view && view.then) {\n                            view.then((view) => {\n                                this._views[msg.view_name] = view;\n                                this._views[msg.view_name].client_id =\n                                    client_id;\n\n                                // Process cached messages for the view.\n                                if (msgs) {\n                                    for (const msg of msgs) {\n                                        this.process(msg);\n                                    }\n                                }\n\n                                this.post({\n                                    id: msg.id,\n                                    data: msg.view_name,\n                                });\n                            }).catch((error) => this.process_error(msg, error));\n                        } else {\n                            this._views[msg.view_name] = view;\n                            this._views[msg.view_name].client_id = client_id;\n\n                            // Process cached messages for the view.\n                            if (msgs) {\n                                for (const msg of msgs) {\n                                    this.process(msg);\n                                }\n                            }\n\n                            this.post({\n                                id: msg.id,\n                                data: msg.view_name,\n                            });\n                        }\n                    } catch (error) {\n                        this.process_error(msg, error);\n                        return;\n                    }\n                }\n                break;\n        }\n    }\n\n    /**\n     * Execute a subscription to a Perspective event, such as `on_update` or\n     * `on_delete`.\n     */\n    process_subscribe(msg, obj) {\n        try {\n            let callback;\n            if (msg.method.slice(0, 2) === \"on\") {\n                callback = (ev) => {\n                    let result = {\n                        id: msg.id,\n                        data: ev,\n                    };\n                    try {\n                        // post transferable data for arrow\n                        if (msg.args && msg.args[0]) {\n                            if (\n                                msg.method === \"on_update\" &&\n                                msg.args[0][\"mode\"] === \"row\"\n                            ) {\n                                // actual arrow is in the `delta`\n                                this.post(result, [ev.delta]);\n                                return;\n                            }\n                        }\n\n                        this.post(result);\n                    } catch (e) {\n                        console.error(\n                            `Removing failed callback to \\`${msg.method}()\\` (presumably due to failed connection)`\n                        );\n                        const remove_method = msg.method.substring(3);\n                        obj[`remove_${remove_method}`](callback);\n                    }\n                };\n                if (msg.callback_id) {\n                    this._callback_cache.set(msg.callback_id, callback);\n                }\n            } else if (msg.callback_id) {\n                callback = this._callback_cache.get(msg.callback_id);\n                this._callback_cache.delete(msg.callback_id);\n            }\n            if (callback) {\n                obj[msg.method](callback, ...msg.args);\n            } else {\n                console.error(\n                    `Callback not found for remote call \"${JSON.stringify(\n                        msg\n                    )}\"`\n                );\n            }\n        } catch (error) {\n            this.process_error(msg, error);\n            return;\n        }\n    }\n\n    /**\n     * Given a message that calls a table or view method, call the method and\n     * return the result to the client, or return an error message to the\n     * client.\n     *\n     * @param {Object} msg\n     */\n    process_method_call(msg) {\n        let obj, result;\n        const name = msg.view_name || msg.name;\n        msg.cmd === \"table_method\"\n            ? (obj = this._tables[name])\n            : (obj = this._views[name]);\n\n        if (!obj && msg.cmd === \"view_method\") {\n            // cannot have a host without a table, but can have a host without a\n            // view\n            this.process_error(msg, { message: \"View method cancelled\" });\n            return;\n        }\n\n        if (obj && obj.push) {\n            obj.push(msg);\n            return;\n        }\n\n        try {\n            if (msg.subscribe) {\n                this.process_subscribe(msg, obj);\n                return;\n            } else {\n                result = obj[msg.method].apply(obj, msg.args);\n                if (result instanceof Promise) {\n                    result\n                        .then((result) =>\n                            this.process_method_call_response(msg, result)\n                        )\n                        .catch((error) => this.process_error(msg, error));\n                } else {\n                    this.process_method_call_response(msg, result);\n                }\n            }\n        } catch (error) {\n            this.process_error(msg, error);\n            return;\n        }\n    }\n\n    /**\n     * Send the response from a method call back to the client, using\n     * transferables if the response is an Arrow binary.\n     * @param {Object} msg\n     * @param {*} result\n     */\n    process_method_call_response(msg, result) {\n        if (msg.method === \"delete\") {\n            delete this._views[msg.name];\n        }\n        if (msg.method === \"to_arrow\") {\n            this.post(\n                {\n                    id: msg.id,\n                    data: result,\n                },\n                [result]\n            );\n        } else {\n            this.post({\n                id: msg.id,\n                data: result,\n            });\n        }\n    }\n\n    /**\n     * Send an error to the client. If this method fails, we need to consume it\n     * as this method is frequently called itself from a `catch` block.\n     */\n    process_error(msg, error) {\n        try {\n            this.post({\n                id: msg.id,\n                error: error_to_json(error),\n            });\n        } catch (e) {\n            console.error(\"Error handler failed: {}\", error);\n        }\n    }\n\n    /**\n     * Garbage collect un-needed views.\n     */\n    clear_views(client_id) {\n        for (let key of Object.keys(this._views)) {\n            if (this._views[key].client_id === client_id) {\n                try {\n                    this._views[key].delete();\n                } catch (e) {\n                    console.error(e);\n                }\n                delete this._views[key];\n            }\n        }\n        console.debug(`GC ${Object.keys(this._views).length} views in memory`);\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Server } from \"../api/server.js\";\n\nlet CLIENT_ID_GEN = 0;\n\n/**\n * A WebSocket Manager instance to host a Perspective server in NodeJS.\n */\nexport class WebSocketManager extends Server {\n    constructor(...args) {\n        super(...args);\n        this.requests_id_map = new Map();\n        this.requests = {};\n        this.websockets = {};\n\n        // Send chunks of this size (in bytes)\n        this.chunk_size = 50 * 1000 * 1000;\n\n        // clear invalid connections\n        this._timer = setInterval(() => {\n            Object.entries(this.websockets).forEach(([id, ws]) => {\n                if (ws.isAlive === false) {\n                    delete this.websockets[id];\n                    return ws.terminate();\n                }\n                ws.isAlive = false;\n            });\n        }, 30000);\n    }\n\n    clear() {\n        clearInterval(this._timer);\n    }\n\n    /**\n     * Add a new websocket connection to the manager, and define a handler\n     * for all incoming messages. If the incoming message has `binary_length`\n     * set, handle incoming `ArrayBuffers` correctly.\n     *\n     * The WebsocketManager manages the websocket connection and processes every\n     * message received from each connections. When a websocket connection is\n     * `closed`, the websocket manager will clear all subscriptions associated\n     * with the connection.\n     *\n     * @param {WebSocket} ws a websocket connection\n     */\n    add_connection(ws) {\n        ws.isAlive = true;\n        ws.binaryType = \"arraybuffer\";\n        ws.id = CLIENT_ID_GEN++;\n\n        // Parse incoming messages\n        ws.on(\"message\", (msg) => {\n            ws.isAlive = true;\n\n            if (msg === \"ping\") {\n                ws.send(\"pong\");\n                return;\n            }\n\n            if (this._pending_binary) {\n                // Combine ArrayBuffer and previous message so that metadata can\n                // be reconstituted for the server, as the server needs the\n                // whole message to correctly delegate commands.\n                const binary = msg;\n                let new_args = [binary];\n                msg = this._pending_binary;\n\n                if (msg.args && msg.args.length > 1) {\n                    new_args = new_args.concat(msg.args.slice(1));\n                }\n\n                msg.args = new_args;\n\n                delete msg.binary_length;\n                delete this._pending_binary;\n            } else {\n                msg = JSON.parse(msg);\n\n                if (msg.binary_length) {\n                    this._pending_binary = msg;\n                    return;\n                }\n            }\n\n            try {\n                // Send all messages to the handler defined in\n                // Perspective.Server\n                const compoundId = `${msg.id}/${ws.id}`;\n                this.requests_id_map.set(compoundId, msg.id);\n                msg.id = compoundId;\n                this.requests[msg.id] = {\n                    ws,\n                    msg,\n                };\n                this.process(msg, ws.id);\n            } catch (e) {\n                console.error(e);\n            }\n        });\n        ws.on(\"close\", () => {\n            this.clear_views(ws.id);\n        });\n        ws.on(\"error\", console.error);\n    }\n\n    /**\n     * Send an asynchronous message to the Perspective client through\n     * the websocket.\n     *\n     * If the `transferable` param is set, pass two messages: the string\n     * representation of the message and then the ArrayBuffer data that needs to\n     * be transferred. `binary_length` tells the client to expect the next\n     * message to be a transferable object.\n     *\n     * @param {Object} msg a valid JSON-serializable message to pass to the\n     * client\n     * @param {*} transferable a transferable object to be sent to the client\n     */\n    post(msg, transferable) {\n        const req = this.requests[msg.id];\n        const id = msg.id;\n        if (req.ws.readyState > 1) {\n            delete this.requests[id];\n            throw new Error(\"Connection closed\");\n        }\n        msg.id = this.requests_id_map.get(id);\n        if (transferable) {\n            const binary_msg = transferable[0];\n            msg.binary_length = binary_msg.byteLength;\n            req.ws.send(JSON.stringify(msg));\n            this._post_chunked(\n                req,\n                binary_msg,\n                0,\n                this.chunk_size,\n                binary_msg.byteLength\n            );\n        } else {\n            req.ws.send(JSON.stringify(msg));\n        }\n        if (!req.msg.subscribe) {\n            this.requests_id_map.delete(id);\n            delete this.requests[id];\n        }\n    }\n\n    /**\n     * Send a binary message (in the transferable param) in chunks.\n     *\n     * @param {*} request\n     * @param {ArrayBuffer} binary\n     * @param {Number} start\n     * @param {Number} end\n     * @param {Number} length\n     */\n    _post_chunked(request, binary, start, end, length) {\n        if (start < length) {\n            end = start + this.chunk_size;\n            if (end > length) end = length;\n            request.ws.send(binary.slice(start, end));\n            start = end;\n            setTimeout(() => {\n                this._post_chunked(request, binary, start, end, length);\n            }, 0);\n        }\n    }\n\n    _host(cache, name, input) {\n        if (cache[name] !== undefined) {\n            throw new Error(`\"${name}\" already exists`);\n        }\n        input.on_delete(() => {\n            delete cache[name];\n        });\n        cache[name] = input;\n    }\n\n    /**\n     * Expose a Perspective `table` through the WebSocket, allowing\n     * it to be accessed by a unique name from a client.  Hosted objects\n     * are automatically `eject`ed when their `delete()` method is called.\n     *\n     * @param {String} name\n     * @param {perspective.table} table `table` to host.\n     */\n    host_table(name, table) {\n        this._host(this._tables, name, table);\n    }\n\n    /**\n     * Cease hosting a `table` on this server.  Hosted objects\n     * are automatically `eject`ed when their `delete()` method is called.\n     *\n     * @param {String} name\n     */\n    eject_table(name) {\n        delete this._tables[name];\n    }\n\n    /**\n     * Cease hosting a `view` on this server.  Hosted objects\n     * are automatically `eject`ed when their `delete()` method is called.\n     *\n     * @param {String} name\n     */\n    eject_view(name) {\n        delete this._views[name];\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { Client } from \"../api/client.js\";\nimport WebSocket from \"ws\";\n\n// Initiate a `ping` to the server every 30 seconds\nconst PING_TIMEOUT = 30000;\nexport class WebSocketClient extends Client {\n    _ping() {\n        this._ping_loop && this._ws.send(\"ping\");\n        this._ping_loop = setTimeout(this._ping.bind(this), PING_TIMEOUT);\n    }\n\n    _close() {\n        clearTimeout(this._ping_loop);\n        this._ping_loop = undefined;\n        this._on_close_callback?.();\n    }\n\n    _onmessage(msg) {\n        if (msg.data === \"pong\") {\n            return;\n        }\n\n        if (this._pending_binary) {\n            // Process a binary being sent by the server, which\n            // can decide how many chunks to send and the size of each\n            // chunk.\n            let binary_msg = msg.data;\n\n            this._full_binary.set(\n                new Uint8Array(binary_msg),\n                this._total_chunk_length\n            );\n            this._total_chunk_length += binary_msg.byteLength;\n\n            // Use the total length of the binary from the pre-message\n            // to decide when to stop waiting for new chunks from the\n            // server.\n            if (this._total_chunk_length === this._pending_binary_length) {\n                // Chunking is complete and the binary has been received\n                // in full.\n                binary_msg = this._full_binary.buffer;\n            } else {\n                // Wait for another chunk.\n                return;\n            }\n\n            let result = {\n                data: {\n                    id: this._pending_binary,\n                    data: binary_msg,\n                },\n            };\n\n            // make sure on_update callbacks are called with a `port_id`\n            // AND the transferred binary.\n            if (this._pending_port_id !== undefined) {\n                const new_data_with_port_id = {\n                    port_id: this._pending_port_id,\n                    delta: binary_msg,\n                };\n                result.data.data = new_data_with_port_id;\n            }\n\n            // Send the joined message to the client for handling.\n            this._handle(result);\n\n            // Reset flags to end special message flow.\n            delete this._pending_binary;\n            delete this._pending_binary_length;\n            delete this._pending_port_id;\n\n            this._total_chunk_length = 0;\n            this._full_binary = null;\n        } else {\n            msg = JSON.parse(msg.data);\n\n            // If the message has `binary_length` set,the worker expects the\n            // next message to be a binary message. This sets the\n            // `_pending_binary` flag, which triggers a special handler for\n            // the ArrayBuffer containing binary data.\n            if (msg.binary_length) {\n                this._pending_binary = msg.id;\n                this._pending_binary_length = msg.binary_length;\n\n                // Check whether the message also contains a `port_id`,\n                // indicating that we are in an `on_update` callback and\n                // the pending binary needs to be joined with the port_id\n                // for on_update handlers to work properly.\n                if (msg.data && msg.data.port_id !== undefined) {\n                    this._pending_port_id = msg.data.port_id;\n                }\n\n                // Create an empty ArrayBuffer to hold the binary, as it\n                // will be sent in n >= 1 chunks.\n                this._full_binary = new Uint8Array(this._pending_binary_length);\n            } else {\n                this._handle({\n                    data: msg,\n                });\n            }\n        }\n    }\n\n    constructor(ws) {\n        super();\n        this._ws = ws;\n        this._ws.binaryType = \"arraybuffer\";\n        this._full_binary;\n        this._total_chunk_length = 0;\n        this._pending_binary_length = 0;\n\n        this._ws.onopen = () => {\n            this.send({\n                id: -1,\n                cmd: \"init\",\n            });\n        };\n\n        this._ping();\n        this._ws.onclose = this._close.bind(this);\n        this._ws.onmessage = this._onmessage.bind(this);\n    }\n\n    /**\n     * Send a message to the server, checking whether the arguments contain an\n     * ArrayBuffer.\n     *\n     * @param {Object} msg a message to send to the remote. If the `args`\n     * param contains an ArrayBuffer, two messages will be sent - a pre-message\n     * with the `binary_length` flag set to true, and a second message\n     * containing the ArrayBuffer. This allows for transport of metadata\n     * alongside an ArrayBuffer, and the pattern should be implemented by the\n     * receiver.\n     */\n    send(msg) {\n        if (this._ws.readyState === WebSocket.CLOSED) {\n            console.warn(\"Websocket connection is already closed.\");\n            return;\n        }\n\n        if (\n            msg.args &&\n            msg.args.length > 0 &&\n            msg.args[0] instanceof ArrayBuffer &&\n            msg.args[0].byteLength !== undefined\n        ) {\n            const pre_msg = msg;\n            msg.binary_length = msg.args[0].byteLength;\n            this._ws.send(JSON.stringify(pre_msg));\n            this._ws.send(msg.args[0]);\n            return;\n        }\n        this._ws.send(JSON.stringify(msg));\n    }\n\n    terminate() {\n        return new Promise((resolve) => {\n            this._on_close_callback = resolve;\n            this._ws.close();\n        });\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nexport const DATA_TYPES = {\n    integer: \"integer\",\n    float: \"float\",\n    string: \"string\",\n    boolean: \"boolean\",\n    date: \"date\",\n    datetime: \"datetime\",\n    object: \"object\",\n};\n\nexport const CONFIG_ALIASES = {\n    row_pivot: \"group_by\",\n    \"row-pivot\": \"group_by\",\n    \"row-pivots\": \"group_by\",\n    col_pivot: \"split_by\",\n    col_pivots: \"split_by\",\n    column_pivot: \"split_by\",\n    \"column-pivot\": \"split_by\",\n    \"column-pivots\": \"split_by\",\n    filters: \"filter\",\n    sorts: \"sort\",\n};\n\nexport const CONFIG_VALID_KEYS = [\n    \"version\",\n    \"viewport\",\n    \"group_by\",\n    \"split_by\",\n    \"aggregates\",\n    \"columns\",\n    \"filter\",\n    \"sort\",\n    \"computed_columns\",\n    \"expressions\",\n    \"group_by_depth\",\n    \"split_by_depth\",\n    \"filter_op\",\n];\n\nconst NUMBER_AGGREGATES = [\n    \"any\",\n    \"avg\",\n    \"abs sum\",\n    \"count\",\n    \"distinct count\",\n    \"dominant\",\n    \"first by index\",\n    \"last by index\",\n    \"last minus first\",\n    \"last\",\n    \"high\",\n    \"join\",\n    \"low\",\n    \"high minus low\",\n    \"max\",\n    \"mean\",\n    \"median\",\n    \"min\",\n    \"pct sum parent\",\n    \"pct sum grand total\",\n    \"stddev\",\n    \"sum\",\n    \"sum abs\",\n    \"sum not null\",\n    \"unique\",\n    \"var\",\n];\n\nconst STRING_AGGREGATES = [\n    \"any\",\n    \"count\",\n    \"distinct count\",\n    \"distinct leaf\",\n    \"dominant\",\n    \"first by index\",\n    \"join\",\n    \"last by index\",\n    \"last\",\n    \"unique\",\n];\n\nconst BOOLEAN_AGGREGATES = [\n    \"any\",\n    \"count\",\n    \"distinct count\",\n    \"distinct leaf\",\n    \"dominant\",\n    \"first by index\",\n    \"last by index\",\n    \"last\",\n    \"unique\",\n];\n\nexport const SORT_ORDERS = [\n    \"none\",\n    \"asc\",\n    \"desc\",\n    \"col asc\",\n    \"col desc\",\n    \"asc abs\",\n    \"desc abs\",\n    \"col asc abs\",\n    \"col desc abs\",\n];\n\nexport const SORT_ORDER_IDS = [2, 0, 1, 0, 1, 3, 4, 3, 4];\n\nexport const TYPE_AGGREGATES = {\n    string: STRING_AGGREGATES,\n    float: NUMBER_AGGREGATES,\n    integer: NUMBER_AGGREGATES,\n    boolean: BOOLEAN_AGGREGATES,\n    datetime: STRING_AGGREGATES,\n    date: STRING_AGGREGATES,\n};\n\nexport const FILTER_OPERATORS = {\n    lessThan: \"<\",\n    greaterThan: \">\",\n    equals: \"==\",\n    lessThanOrEquals: \"<=\",\n    greaterThanOrEquals: \">=\",\n    doesNotEqual: \"!=\",\n    isNull: \"is null\",\n    isNotNull: \"is not null\",\n    isIn: \"in\",\n    isNotIn: \"not in\",\n    contains: \"contains\",\n    bitwiseAnd: \"&\",\n    bitwiseOr: \"|\",\n    and: \"and\",\n    or: \"or\",\n    beginsWith: \"begins with\",\n    endsWith: \"ends with\",\n};\n\nconst BOOLEAN_FILTERS = [\n    FILTER_OPERATORS.bitwiseAnd,\n    FILTER_OPERATORS.bitwiseOr,\n    FILTER_OPERATORS.equals,\n    FILTER_OPERATORS.doesNotEqual,\n    FILTER_OPERATORS.or,\n    FILTER_OPERATORS.and,\n    FILTER_OPERATORS.isNull,\n    FILTER_OPERATORS.isNotNull,\n];\n\nconst NUMBER_FILTERS = [\n    FILTER_OPERATORS.lessThan,\n    FILTER_OPERATORS.greaterThan,\n    FILTER_OPERATORS.equals,\n    FILTER_OPERATORS.lessThanOrEquals,\n    FILTER_OPERATORS.greaterThanOrEquals,\n    FILTER_OPERATORS.doesNotEqual,\n    FILTER_OPERATORS.isNull,\n    FILTER_OPERATORS.isNotNull,\n];\n\nconst STRING_FILTERS = [\n    FILTER_OPERATORS.equals,\n    FILTER_OPERATORS.contains,\n    FILTER_OPERATORS.doesNotEqual,\n    FILTER_OPERATORS.isIn,\n    FILTER_OPERATORS.isNotIn,\n    FILTER_OPERATORS.beginsWith,\n    FILTER_OPERATORS.endsWith,\n    FILTER_OPERATORS.isNull,\n    FILTER_OPERATORS.isNotNull,\n];\n\nconst DATETIME_FILTERS = [\n    FILTER_OPERATORS.lessThan,\n    FILTER_OPERATORS.greaterThan,\n    FILTER_OPERATORS.equals,\n    FILTER_OPERATORS.lessThanOrEquals,\n    FILTER_OPERATORS.greaterThanOrEquals,\n    FILTER_OPERATORS.doesNotEqual,\n    FILTER_OPERATORS.isNull,\n    FILTER_OPERATORS.isNotNull,\n];\n\nexport const COLUMN_SEPARATOR_STRING = \"|\";\n\nexport const TYPE_FILTERS = {\n    string: STRING_FILTERS,\n    float: NUMBER_FILTERS,\n    integer: NUMBER_FILTERS,\n    boolean: BOOLEAN_FILTERS,\n    datetime: DATETIME_FILTERS,\n    date: DATETIME_FILTERS,\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport { get_column_type } from \"../utils.js\";\nimport { get_type_config } from \"../config/index.js\";\n\nexport class DataAccessor {\n    constructor() {\n        this.data_formats = {\n            row: 0,\n            column: 1,\n            schema: 2,\n        };\n        this.format = undefined;\n        this.data = undefined;\n        this.names = undefined;\n        this.types = undefined;\n        this.row_count = undefined;\n    }\n\n    is_format(data) {\n        if (Array.isArray(data)) {\n            return this.data_formats.row;\n        } else if (Array.isArray(data[Object.keys(data)[0]])) {\n            return this.data_formats.column;\n        } else if (\n            typeof data[Object.keys(data)[0]] === \"string\" ||\n            typeof data[Object.keys(data)[0]] === \"function\"\n        ) {\n            return this.data_formats.schema;\n        } else {\n            throw `Could not determine data format for ${JSON.stringify(\n                data\n            )}, with JS typeof ${typeof data}`;\n        }\n    }\n\n    count_rows(data) {\n        if (this.format === this.data_formats.row) {\n            return data.length;\n        } else if (this.format === this.data_formats.column) {\n            return data[Object.keys(data)[0]].length;\n        } else {\n            return 0;\n        }\n    }\n\n    get_format() {\n        return this.format;\n    }\n\n    get(column_name, row_index) {\n        let value = undefined;\n\n        if (this.format === this.data_formats.row) {\n            let d = this.data[row_index];\n            if (d.hasOwnProperty(column_name)) {\n                value = d[column_name];\n            }\n        } else if (this.format === this.data_formats.column) {\n            if (this.data.hasOwnProperty(column_name)) {\n                value = this.data[column_name][row_index];\n            }\n        } else if (this.format === this.data_formats.schema) {\n            value = undefined;\n        } else {\n            throw `Could not get() from dataset - ${this.data} is poorly formatted.`;\n        }\n\n        return value;\n    }\n\n    marshal(column_index, row_index, type) {\n        const column_name = this.names[column_index];\n        let val = clean_data(this.get(column_name, row_index));\n\n        if (val === null) {\n            return null;\n        }\n\n        if (typeof val === \"undefined\") {\n            return undefined;\n        }\n\n        switch (get_column_type(type.value)) {\n            case \"float\":\n            case \"integer\": {\n                val = Number(val);\n                break;\n            }\n            case \"boolean\": {\n                if (typeof val === \"string\") {\n                    val.toLowerCase() === \"true\" ? (val = true) : (val = false);\n                } else {\n                    val = !!val;\n                }\n                break;\n            }\n            case \"datetime\":\n            case \"date\": {\n                break;\n            }\n            default: {\n                val += \"\"; // TODO this is not right - might not be a string.  Need a data cleaner\n            }\n        }\n\n        return val;\n    }\n\n    /**\n     * Resets the internal state of the accessor, preventing collisions with\n     * previously set data.\n     *\n     * @private\n     */\n    clean() {\n        this.names = undefined;\n        this.types = undefined;\n    }\n\n    /**\n     * Links the accessor to a package of data for processing, calculating its\n     * format and size.\n     *\n     * @private\n     * @param {object} data\n     *\n     * @returns An object with 5 properties:\n     *    cdata - an array of columnar data.\n     *    names - the column names.\n     *    types - the column t_dtypes.\n     *    row_count - the number of rows per column.\n     *    is_arrow - an internal flag marking arrow-formatted data\n     */\n    init(data) {\n        this.data = data;\n        this.format = this.is_format(this.data);\n        this.row_count = this.count_rows(this.data);\n        const overridden_types = {};\n        if (this.format === this.data_formats.row) {\n            if (data.length > 0) {\n                this.names = Object.keys(data[0]);\n            } else {\n                this.clean.names = [];\n            }\n        } else if (this.format === this.data_formats.column) {\n            this.names = Object.keys(data);\n        } else if (this.format === this.data_formats.schema) {\n            this.names = Object.keys(data);\n            for (const name of this.names) {\n                const new_type = get_type_config(data[name]);\n                if (new_type.type) {\n                    console.debug(\n                        `Converting \"${data[name]}\" to \"${new_type.type}\"`\n                    );\n                    overridden_types[name] = data[name];\n                    data[name] = new_type.type;\n                }\n            }\n        } else {\n            throw `Could not initialize - failed to determine format for ${data}`;\n        }\n        return overridden_types;\n    }\n}\n\n/**\n * Coerce string null into value null.\n * @private\n * @param {*} value\n */\nexport function clean_data(value) {\n    if (value === null || value === \"null\") {\n        return null;\n    } else if (value === undefined || value === \"undefined\") {\n        return undefined;\n    } else {\n        return value;\n    }\n}\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\n/** Translation layer Interface between C++ and JS to handle conversions/data\n * structures that were previously handled in non-portable perspective.js\n */\n\nexport const extract_vector = function (vector) {\n    // handles deletion already - do not call delete() on the input vector again\n    let extracted = [];\n    for (let i = 0; i < vector.size(); i++) {\n        let item = vector.get(i);\n        extracted.push(item);\n    }\n    vector.delete();\n    return extracted;\n};\n\nexport const extract_map = function (map) {\n    // handles deletion already - do not call delete() on the input map again\n    let extracted = {};\n    let keys = map.keys();\n    for (let i = 0; i < keys.size(); i++) {\n        let key = keys.get(i);\n        extracted[key] = map.get(key);\n    }\n    map.delete();\n    keys.delete();\n    return extracted;\n};\n\n/**\n * Given a C++ vector constructed in Emscripten, fill it with data. Assume that\n * data types are already validated, thus Emscripten will throw an error if the\n * vector is filled with the wrong type of data.\n *\n * @param {*} vector the `std::vector` to be filled\n * @param {Array} arr the `Array` from which to draw data\n *\n * @private\n */\nexport const fill_vector = function (vector, arr) {\n    for (const elem of arr) {\n        vector.push_back(elem);\n    }\n    return vector;\n};\n", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nimport * as defaults from \"./config/constants.js\";\nimport { get_type_config } from \"./config/index.js\";\nimport { DataAccessor } from \"./data_accessor\";\nimport { extract_vector, extract_map, fill_vector } from \"./emscripten.js\";\nimport { bindall, get_column_type } from \"./utils.js\";\nimport { Server } from \"./api/server.js\";\n\nif (typeof self !== \"undefined\" && self.performance === undefined) {\n    self.performance = { now: Date.now };\n}\n\nconst WARNED_KEYS = new Set();\n\n/**\n * The main API module for `@finos/perspective`.\n *\n * For more information, see the\n * [Javascript user guide](https://perspective.finos.org/docs/js.html).\n *\n * @module perspective\n */\nexport default function (Module) {\n    let __MODULE__ = Module;\n    let accessor = new DataAccessor();\n    const SIDES = [\"zero\", \"one\", \"two\"];\n\n    /***************************************************************************\n     *\n     * Private\n     *\n     */\n\n    let _POOL_DEBOUNCES = {};\n\n    function _set_process(pool, table_id) {\n        if (!_POOL_DEBOUNCES[table_id]) {\n            _POOL_DEBOUNCES[table_id] = pool;\n            setTimeout(() => _call_process(table_id));\n        } else {\n            pool.delete();\n        }\n    }\n\n    function _call_process(table_id) {\n        const pool = _POOL_DEBOUNCES[table_id];\n        if (pool) {\n            pool._process();\n            _remove_process(table_id);\n        }\n    }\n\n    function _remove_process(table_id) {\n        _POOL_DEBOUNCES[table_id]?.delete();\n        delete _POOL_DEBOUNCES[table_id];\n    }\n\n    function memory_usage() {\n        const mem = performance.memory\n            ? JSON.parse(\n                  JSON.stringify(performance.memory, [\n                      \"totalJSHeapSize\",\n                      \"usedJSHeapSize\",\n                      \"jsHeapSizeLimit\",\n                  ])\n              )\n            : process.memoryUsage();\n        mem.wasmHeap = __MODULE__.HEAP8.length;\n        return mem;\n    }\n\n    /**\n     * Common logic for creating and registering a Table.\n     *\n     * @param {DataAccessor|Object[]} accessor - the data we provide to the\n     * Table\n     * @param {Object} _Table - `undefined` if a new table will be created, or\n     * an `std::shared_ptr<Table>` if updating.\n     * @param {String} index - A column name to be used as a primary key.\n     * @param {Number} limit - an upper bound on the number of rows in the\n     * table. If set, new rows that exceed the limit start overwriting old ones\n     * from row 0.\n     * @param {t_op} op - either `OP_INSERT` or `OP_DELETE`\n     * @param {boolean} is_update - true if we are updating an already-created\n     * table\n     * @param {boolean} is_arrow - true if the dataset is in the Arrow format\n     * @param {Number} port_id - an integer indicating the internal `t_port`\n     * which should receive this update.\n     *\n     * @private\n     * @returns {Table} An `std::shared_ptr<Table>` to a `Table` inside C++.\n     */\n    function make_table(\n        accessor,\n        _Table,\n        index,\n        limit,\n        op,\n        is_update,\n        is_arrow,\n        is_csv,\n        port_id\n    ) {\n        // C++ constructor cannot take null values - use default values if\n        // index or limit are null.\n        if (!index) {\n            index = \"\";\n        }\n\n        if (!limit) {\n            limit = 4294967295;\n        }\n\n        _Table = __MODULE__.make_table(\n            _Table,\n            accessor,\n            limit,\n            index,\n            op,\n            is_update,\n            is_arrow,\n            is_csv,\n            port_id\n        );\n\n        const pool = _Table.get_pool();\n        const table_id = _Table.get_id();\n\n        if (is_update || op == __MODULE__.t_op.OP_DELETE) {\n            _set_process(pool, table_id);\n        } else {\n            pool._process();\n            pool.delete();\n        }\n\n        return _Table;\n    }\n\n    /***************************************************************************\n     *\n     * View\n     *\n     */\n\n    /**\n     * A View object represents a specific transform (configuration or pivot,\n     * filter, sort, etc) configuration on an underlying\n     * {@link module:perspective~table}. A View receives all updates from the\n     * {@link module:perspective~table} from which it is derived, and can be\n     * serialized to JSON or trigger a callback when it is updated.  View\n     * objects are immutable, and will remain in memory and actively process\n     * updates until its {@link module:perspective~view#delete} method is\n     * called.\n     *\n     * <strong>Note</strong> This constructor is not public - Views are created\n     * by invoking the {@link module:perspective~table#view} method.\n     *\n     * @example\n     * // Returns a new View, pivoted in the row space by the \"name\" column.\n     * await table.view({group_by: [\"name\"]});\n     *\n     * @class\n     * @hideconstructor\n     */\n    function view(table, sides, config, view_config, name) {\n        this.name = name;\n        this._View = undefined;\n        this.table = table;\n\n        this.config = config || {};\n        this.view_config = view_config || new view_config();\n\n        this.is_unit_context =\n            this.table.index === \"\" &&\n            sides === 0 &&\n            this.view_config.group_by.length === 0 &&\n            this.view_config.split_by.length === 0 &&\n            this.view_config.filter.length === 0 &&\n            this.view_config.sort.length === 0 &&\n            this.view_config.expressions.length === 0;\n\n        if (this.is_unit_context) {\n            this._View = __MODULE__.make_view_unit(\n                table._Table,\n                name,\n                defaults.COLUMN_SEPARATOR_STRING,\n                this.view_config,\n                null\n            );\n        } else if (sides === 0) {\n            this._View = __MODULE__.make_view_zero(\n                table._Table,\n                name,\n                defaults.COLUMN_SEPARATOR_STRING,\n                this.view_config,\n                null\n            );\n        } else if (sides === 1) {\n            this._View = __MODULE__.make_view_one(\n                table._Table,\n                name,\n                defaults.COLUMN_SEPARATOR_STRING,\n                this.view_config,\n                null\n            );\n        } else if (sides === 2) {\n            this._View = __MODULE__.make_view_two(\n                table._Table,\n                name,\n                defaults.COLUMN_SEPARATOR_STRING,\n                this.view_config,\n                null\n            );\n        }\n\n        this.ctx = this._View.get_context();\n        this.column_only = this._View.is_column_only();\n        this.update_callbacks = this.table.update_callbacks;\n        this.overridden_types = this.table.overridden_types;\n        this._delete_callbacks = [];\n        bindall(this);\n    }\n\n    /**\n     * A copy of the config object passed to the {@link table#view} method which\n     * created this {@link module:perspective~view}.\n     *\n     * @returns {Promise<object>} Shared the same key/values properties as\n     * {@link module:perspective~view}\n     */\n    view.prototype.get_config = function () {\n        return JSON.parse(JSON.stringify(this.config));\n    };\n\n    /**\n     * Delete this {@link module:perspective~view} and clean up all resources\n     * associated with it. View objects do not stop consuming resources or\n     * processing updates when they are garbage collected - you must call this\n     * method to reclaim these.\n     *\n     * @async\n     */\n    view.prototype.delete = function () {\n        _remove_process(this.table.get_id());\n        this._View.delete();\n        this.ctx.delete();\n\n        this.table.views.splice(this.table.views.indexOf(this), 1);\n        this.table = undefined;\n        let i = 0,\n            j = 0;\n\n        // Remove old update callbacks from the Table.\n        while (i < this.update_callbacks.length) {\n            let val = this.update_callbacks[i];\n            if (val.view !== this) this.update_callbacks[j++] = val;\n            i++;\n        }\n        this.update_callbacks.length = j;\n        this._delete_callbacks.forEach((cb) => cb());\n    };\n\n    /**\n     * How many pivoted sides does this {@link module:perspective~view} have?\n     *\n     * @private\n     * @returns {number} sides The number of sides of this\n     * {@link module:perspective~view}.\n     */\n    view.prototype.sides = function () {\n        return this._View.sides();\n    };\n\n    /**\n     * Counts hidden columns in the {@link module:perspective~view}. A hidden\n     * column is a column used as a sort column, but not shown in the view.\n     *\n     * @private\n     * @returns {number} sides The number of hidden columns in this\n     * {@link module:perspective~view}.\n     */\n    view.prototype._num_hidden = function () {\n        // Count hidden columns.\n        let hidden = 0;\n        for (const sort of this.config.sort) {\n            if (this.config.columns.indexOf(sort[0]) === -1) {\n                hidden++;\n            }\n        }\n        return hidden;\n    };\n\n    function col_path_vector_to_string(vector) {\n        let extracted = [];\n        for (let i = 0; i < vector.size(); i++) {\n            let s = vector.get(i);\n            extracted.push(__MODULE__.scalar_to_val(s, false, true));\n            s.delete();\n        }\n        vector.delete();\n        return extracted;\n    }\n\n    const extract_vector_scalar = function (vector) {\n        // handles deletion already - do not call delete() on the input vector\n        // again\n        let extracted = [];\n        for (let i = 0; i < vector.size(); i++) {\n            let item = vector.get(i);\n            extracted.push(col_path_vector_to_string(item));\n        }\n        vector.delete();\n        return extracted;\n    };\n\n    const extract_vector_string = function (vector) {\n        // handles deletion already - do not call delete() on the input vector\n        // again\n        let extracted = [];\n        for (let i = 0; i < vector.size(); i++) {\n            let item = vector.get(i);\n            let row = [];\n            for (let i = 0; i < item.size(); i++) {\n                let s = item.get(i);\n                row.push(s);\n            }\n\n            item.delete();\n            extracted.push(row);\n        }\n        vector.delete();\n        return extracted;\n    };\n\n    /**\n     * The schema of this {@link module:perspective~view}.\n     *\n     * A schema is an Object, the keys of which are the columns of this\n     * {@link module:perspective~view}, and the values are their string type\n     * names. If this {@link module:perspective~view} is aggregated, theses will\n     * be the aggregated types; otherwise these types will be the same as the\n     * columns in the underlying {@link module:perspective~table}.\n     *\n     * @example\n     * // Create a view\n     * const view = await table.view({\n     *      columns: [\"a\", \"b\"]\n     * });\n     * const schema = await view.schema(); // {a: \"float\", b: \"string\"}\n     *\n     * @async\n     *\n     * @returns {Promise<Object>} A Promise of this\n     * {@link module:perspective~view}'s schema.\n     */\n    view.prototype.schema = function (override = true) {\n        const schema = extract_map(this._View.schema());\n        if (override) {\n            for (const key of Object.keys(schema)) {\n                let colname = key.split(defaults.COLUMN_SEPARATOR_STRING);\n                colname = colname[colname.length - 1];\n                if (\n                    this.overridden_types[colname] &&\n                    get_type_config(this.overridden_types[colname]).type ===\n                        schema[key]\n                ) {\n                    schema[key] = this.overridden_types[colname];\n                }\n            }\n        }\n        return schema;\n    };\n\n    /**\n     * The expression schema of this {@link module:perspective~view},\n     * which contains only the expressions created on this view.\n     *\n     * A schema is an Object, the keys of which are the columns of this\n     * {@link module:perspective~view}, and the values are their string type\n     * names. If this {@link module:perspective~view} is aggregated, these will\n     * be the aggregated types; otherwise these types will be the same as the\n     * columns in the underlying {@link module:perspective~table}.\n     *\n     * @example\n     * // Create a view with expressions\n     * const view = table.view({\n     *      expressions: {'\"x\" + \"y\" - 100': '\"x\" + \"y\" - 100'}\n     * });\n     *\n     * await view.expression_schema(); // {'\"x\" + \"y\" - 100': \"float\"}\n     *\n     * @async\n     *\n     * @returns {Promise<Object>} A Promise of this\n     * {@link module:perspective~view}'s expression schema.\n     */\n    view.prototype.expression_schema = function (override = true) {\n        const schema = extract_map(this._View.expression_schema());\n        if (override) {\n            for (const key of Object.keys(schema)) {\n                let colname = key.split(defaults.COLUMN_SEPARATOR_STRING);\n                colname = colname[colname.length - 1];\n                if (\n                    this.overridden_types[colname] &&\n                    get_type_config(this.overridden_types[colname]).type ===\n                        schema[key]\n                ) {\n                    schema[key] = this.overridden_types[colname];\n                }\n            }\n        }\n        return schema;\n    };\n\n    view.prototype._column_names = function (skip = false, depth = 0) {\n        return extract_vector_scalar(this._View.column_names(skip, depth)).map(\n            (x) => x.join(defaults.COLUMN_SEPARATOR_STRING)\n        );\n    };\n\n    /**\n     * Returns an array of strings containing the column paths of the View\n     * without any of the source columns.\n     *\n     * A column path shows the columns that a given cell belongs to after pivots\n     * are applied.\n     *\n     * @returns {Array<String>} an Array of Strings containing the column paths.\n     */\n    view.prototype.column_paths = function () {\n        return extract_vector_string(this._View.column_paths()).map((x) =>\n            x.join(defaults.COLUMN_SEPARATOR_STRING)\n        );\n    };\n\n    view.prototype.get_data_slice = function (\n        start_row,\n        end_row,\n        start_col,\n        end_col\n    ) {\n        if (this.is_unit_context) {\n            return __MODULE__.get_data_slice_unit(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        } else {\n            const num_sides = this.sides();\n            const nidx = SIDES[num_sides];\n            return __MODULE__[`get_data_slice_${nidx}`](\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        }\n    };\n\n    /**\n     * Given an `options` Object, calculate the correct start/end rows and\n     * columns, as well as other metadata required by the data formatter.\n     *\n     * @private\n     * @param {Object} options User-provided options for `to_format`.\n     * @returns {Object} an Object containing the parsed options.\n     */\n    const _parse_format_options = function (options) {\n        options = options || {};\n        const max_cols =\n            this._View.num_columns() + (this.sides() === 0 ? 0 : 1);\n        const max_rows = this._View.num_rows();\n        const hidden = this._num_hidden();\n        const psp_offset = this.sides() > 0 || this.column_only ? 1 : 0;\n\n        const viewport = this.config.viewport ? this.config.viewport : {};\n        const start_row =\n            options.start_row || (viewport.top ? viewport.top : 0);\n        const end_row = Math.min(\n            max_rows,\n            options.end_row !== undefined\n                ? options.end_row\n                : viewport.height\n                ? start_row + viewport.height\n                : max_rows\n        );\n        const start_col =\n            options.start_col || (viewport.left ? viewport.left : 0);\n        const end_col = Math.min(\n            max_cols,\n            (options.end_col !== undefined\n                ? options.end_col + psp_offset\n                : viewport.width\n                ? start_col + viewport.width\n                : max_cols) *\n                (hidden + 1)\n        );\n\n        // Return the calculated values\n        options.start_row = Math.floor(start_row);\n        options.end_row = Math.ceil(end_row);\n        options.start_col = Math.floor(start_col);\n        options.end_col = Math.ceil(end_col);\n\n        return options;\n    };\n\n    /**\n     * Calculates the [min, max] of the leaf nodes of a column `colname`.\n     *\n     * @param {String} colname A column name in this `View`.\n     * @returns {Array<Object>} A tuple of [min, max], whose types are column\n     * and aggregate dependent.\n     */\n    view.prototype.get_min_max = function (colname) {\n        if (this.is_unit_context) {\n            return __MODULE__.get_min_max_unit(this._View, colname);\n        } else {\n            const num_sides = this.sides();\n            const nidx = SIDES[num_sides];\n            return __MODULE__[`get_min_max_${nidx}`](this._View, colname);\n        }\n    };\n\n    /**\n     * Generic base function for returning serialized data for a single column.\n     *\n     * @private\n     */\n    const column_to_format = function (col_name, options, format_function) {\n        const num_rows = this.num_rows();\n        const start_row = options.start_row || 0;\n        const end_row = options.end_row || num_rows;\n        const names = this._column_names();\n        let idx = names.indexOf(col_name);\n\n        if (idx === -1) {\n            return undefined;\n        }\n\n        // mutate the column index if necessary: in pivoted views, columns start\n        // at 1\n        const num_sides = this.sides();\n        if (num_sides > 0) {\n            idx++;\n        }\n\n        // use a specified data slice, if provided\n        let slice, data_slice;\n\n        if (!options.data_slice) {\n            data_slice = this.get_data_slice(start_row, end_row, idx, idx + 1);\n            slice = data_slice.get_slice();\n        } else {\n            slice = options.data_slice.get_column_slice(idx);\n        }\n\n        const dtype = this._View.get_column_dtype(idx);\n\n        const rst = format_function(slice, dtype, idx);\n        slice.delete();\n        if (data_slice) {\n            data_slice.delete();\n        }\n        return rst;\n    };\n\n    /**\n     * Serializes this view to JSON data in a column-oriented format.\n     *\n     * @async\n     *\n     * @param {Object} [options] An optional configuration object.\n     * @param {number} options.start_row The starting row index from which to\n     * serialize.\n     * @param {number} options.end_row The ending row index from which to\n     * serialize.\n     * @param {number} options.start_col The starting column index from which to\n     * serialize.\n     * @param {number} options.end_col The ending column index from which to\n     * serialize.\n     * @param {boolean} [config.index=false] Should the index from the\n     * underlying {@link module:perspective~table} be in the output (as\n     * `\"__INDEX__\"`).\n     *\n     * @returns {Promise<Array>} A Promise resolving to An array of Objects\n     * representing the rows of this {@link module:perspective~view}.  If this\n     * {@link module:perspective~view} had a \"group_by\" config parameter\n     * supplied when constructed, each row Object will have a \"__ROW_PATH__\"\n     * key, whose value specifies this row's aggregated path.  If this\n     * {@link module:perspective~view} had a \"split_by\" config parameter\n     * supplied, the keys of this object will be comma-prepended with their\n     * comma-separated column paths.\n     */\n    view.prototype.to_columns = function (options) {\n        return JSON.parse(this.to_columns_string(options));\n    };\n\n    /**\n     *  Serializes this view to a string of JSON data. Useful if you want to\n     *  save additional round trip serialize/deserialize cycles.\n     */\n    view.prototype.to_columns_string = function (options) {\n        _call_process(this.table.get_id());\n        options = _parse_format_options.bind(this)(options);\n        const start_row = options.start_row;\n        const end_row = options.end_row;\n        const start_col = options.start_col;\n        const end_col = options.end_col;\n        const hidden = this._num_hidden();\n        const is_formatted = options.formatted;\n        const get_pkeys = !!options.index;\n        const get_ids = !!options.id;\n        const leaves_only = !!options.leaves_only;\n        const num_sides = this.sides();\n        const has_row_path = num_sides !== 0 && !this.column_only;\n        const nidx = SIDES[num_sides];\n        const config = this.get_config();\n        const columns_length = config.columns.length;\n        const group_by_length = config.group_by.length;\n        return this._View.to_columns(\n            start_row,\n            end_row,\n            start_col,\n            end_col,\n            hidden,\n            is_formatted,\n            get_pkeys,\n            get_ids,\n            leaves_only,\n            num_sides,\n            has_row_path,\n            nidx,\n            columns_length,\n            group_by_length\n        );\n    };\n\n    /**\n     * Serializes this view to JSON data in a row-oriented format.\n     *\n     * @async\n     *\n     * @param {Object} [options] An optional configuration object.\n     * @param {number} options.start_row The starting row index from which to\n     * serialize.\n     * @param {number} options.end_row The ending row index from which to\n     * serialize.\n     * @param {number} options.start_col The starting column index from which to\n     * serialize.\n     * @param {number} options.end_col The ending column index from which to\n     * serialize.\n     *\n     * @returns {Promise<Array>} A Promise resolving to An array of Objects\n     * representing the rows of this {@link module:perspective~view}.  If this\n     * {@link module:perspective~view} had a \"group_by\" config parameter\n     * supplied when constructed, each row Object will have a \"__ROW_PATH__\"\n     * key, whose value specifies this row's aggregated path.  If this\n     * {@link module:perspective~view} had a \"split_by\" config parameter\n     * supplied, the keys of this object will be comma-prepended with their\n     * comma-separated column paths.\n     */\n    view.prototype.to_json = function (options) {\n        const cols = this.to_columns(options);\n        const colnames = Object.keys(cols);\n        const first_col = cols[colnames[0]] || [];\n        return first_col.map((_, idx) => {\n            const obj = {};\n            for (const key of colnames) {\n                obj[key] = cols[key][idx];\n            }\n\n            return obj;\n        });\n    };\n\n    /**\n     * Serializes this view to CSV data in a standard format.\n     *\n     * @async\n     *\n     * @param {Object} [options] An optional configuration object.\n     * @param {number} options.start_row The starting row index from which to\n     * serialize.\n     * @param {number} options.end_row The ending row index from which to\n     * serialize.\n     * @param {number} options.start_col The starting column index from which to\n     * serialize.\n     * @param {number} options.end_col The ending column index from which to\n     * serialize.\n     * @returns {Promise<string>} A Promise resolving to a string in CSV format\n     * representing the rows of this {@link module:perspective~view}.  If this\n     * {@link module:perspective~view} had a \"group_by\" config parameter\n     * supplied when constructed, each row will have prepended those values\n     * specified by this row's aggregated path.  If this\n     * {@link module:perspective~view} had a \"split_by\" config parameter\n     * supplied, the keys of this object will be comma-prepended with their\n     * comma-separated column paths.\n     */\n    view.prototype.to_csv = function (options) {\n        _call_process(this.table.get_id());\n        options = _parse_format_options.bind(this)(options);\n        const start_row = options.start_row;\n        const end_row = options.end_row;\n        const start_col = options.start_col;\n        const end_col = options.end_col;\n        const sides = this.sides();\n        if (this.is_unit_context) {\n            return __MODULE__.to_csv_unit(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        } else if (sides === 0) {\n            return __MODULE__.to_csv_zero(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        } else if (sides === 1) {\n            return __MODULE__.to_csv_one(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        } else if (sides === 2) {\n            return __MODULE__.to_csv_two(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col\n            );\n        }\n    };\n\n    /**\n     * Serializes a view column into a TypedArray.\n     *\n     * @async\n     *\n     * @param {string} column_name The name of the column to serialize.\n     *\n     * @param {Object} options An optional configuration object.\n     *\n     * @param {*} options.data_slice A data slice object from which to\n     * serialize.\n     *\n     * @param {number} options.start_row The starting row index from which to\n     * serialize.\n     * @param {number} options.end_row The ending row index from which to\n     * serialize.\n     *\n     * @returns {Promise<TypedArray>} A promise resolving to a TypedArray\n     * representing the data of the column as retrieved from the\n     * {@link module:perspective~view} - all pivots, aggregates, sorts, and\n     * filters have been applied onto the values inside the TypedArray. The\n     * TypedArray will be constructed based on data type - integers will resolve\n     * to Int8Array, Int16Array, or Int32Array. Floats resolve to Float32Array\n     * or Float64Array. If the column cannot be found, or is not of an\n     * integer/float type, the Promise returns undefined.\n     */\n    view.prototype.col_to_js_typed_array = function (col_name, options = {}) {\n        _call_process(this.table.get_id());\n        const format_function = __MODULE__[`col_to_js_typed_array`];\n        return column_to_format.call(this, col_name, options, format_function);\n    };\n\n    /**\n     * Serializes a view to the Apache Arrow data format.\n     *\n     * @async\n     *\n     * @param {Object} [options] An optional configuration object.\n     * @param {number} options.start_row The starting row index from which to\n     * serialize.\n     * @param {number} options.end_row The ending row index from which to\n     * serialize.\n     * @param {number} options.start_col The starting column index from which to\n     * serialize.\n     * @param {number} options.end_col The ending column index from which to\n     * serialize.\n     * @param {number} options.compression The compression codec to use. Can be\n     * `null` or `\"lz4\"` (default).\n     * @returns {Promise<ArrayBuffer>} An `ArrayBuffer` in the Apache Arrow\n     * format containing data from the view.\n     */\n    view.prototype.to_arrow = function (options = {}) {\n        _call_process(this.table.get_id());\n        options = _parse_format_options.bind(this)(options);\n        const start_row = options.start_row;\n        const end_row = options.end_row;\n        const start_col = options.start_col;\n        const end_col = options.end_col;\n        const sides = this.sides();\n        const compression =\n            \"compression\" in options ? options.compression === \"lz4\" : true;\n\n        if (this.is_unit_context) {\n            return __MODULE__.to_arrow_unit(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col,\n                compression\n            );\n        } else if (sides === 0) {\n            return __MODULE__.to_arrow_zero(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col,\n                compression\n            );\n        } else if (sides === 1) {\n            return __MODULE__.to_arrow_one(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col,\n                compression\n            );\n        } else if (sides === 2) {\n            return __MODULE__.to_arrow_two(\n                this._View,\n                start_row,\n                end_row,\n                start_col,\n                end_col,\n                compression\n            );\n        }\n    };\n\n    /**\n     * The number of aggregated rows in this {@link module:perspective~view}.\n     * This is affected by the \"group_by\" configuration parameter supplied to\n     * this {@link module:perspective~view}'s contructor.\n     *\n     * @async\n     *\n     * @returns {Promise<number>} The number of aggregated rows.\n     */\n    view.prototype.num_rows = function () {\n        _call_process(this.table.get_id());\n        return this._View.num_rows();\n    };\n\n    /**\n     * The number of aggregated columns in this {@link view}.  This is affected\n     * by the \"split_by\" configuration parameter supplied to this\n     * {@link view}'s contructor.\n     *\n     * @async\n     *\n     * @returns {Promise<number>} The number of aggregated columns.\n     */\n    view.prototype.num_columns = function () {\n        const ncols = this._View.num_columns();\n        const nhidden = this._num_hidden();\n        return (\n            ncols - (ncols / (this.config.columns.length + nhidden)) * nhidden\n        );\n    };\n\n    view.prototype.dimensions = function () {\n        return {\n            num_table_rows: this.table.num_rows(),\n            num_table_columns: this.table.num_columns(),\n            num_view_rows: this._View.num_rows(),\n            num_view_columns: this.num_columns(),\n        };\n    };\n\n    /**\n     * Whether this row at index `idx` is in an expanded or collapsed state.\n     *\n     * @async\n     *\n     * @returns {Promise<bool>} Whether this row is expanded.\n     */\n    view.prototype.get_row_expanded = function (idx) {\n        return this._View.get_row_expanded(idx);\n    };\n\n    /**\n     * Expands the row at index `idx`.\n     *\n     * @async\n     *\n     * @returns {Promise<void>}\n     */\n    view.prototype.expand = function (idx) {\n        return this._View.expand(idx, this.config.group_by.length);\n    };\n\n    /**\n     * Collapses the row at index `idx`.\n     *\n     * @async\n     *\n     * @returns {Promise<void>}\n     */\n    view.prototype.collapse = function (idx) {\n        return this._View.collapse(idx);\n    };\n\n    /**\n     * Set expansion `depth` of the pivot tree.\n     *\n     */\n    view.prototype.set_depth = function (depth) {\n        return this._View.set_depth(depth, this.config.group_by.length);\n    };\n\n    /**\n     * Returns the data of all changed rows in JSON format, or for 1+ sided\n     * contexts the entire dataset of the view.\n     * @private\n     */\n    view.prototype._get_step_delta = async function () {\n        let delta = this._View.get_step_delta(0, 2147483647);\n        let data;\n        if (delta.cells.size() === 0) {\n            // FIXME This is currently not implemented for 1+ sided contexts.\n            data = this.to_json();\n        } else {\n            let rows = {};\n            for (let x = 0; x < delta.cells.size(); x++) {\n                rows[delta.cells.get(x).row] = true;\n            }\n            rows = Object.keys(rows);\n            const results = rows.map((row) =>\n                this.to_json({\n                    start_row: Number.parseInt(row),\n                    end_row: Number.parseInt(row) + 1,\n                })\n            );\n            data = [].concat.apply([], results);\n        }\n        delta.cells.delete();\n        return data;\n    };\n\n    /**\n     * Returns an Arrow-serialized dataset that contains the data from updated\n     * rows. Do not call this function directly, instead use the\n     * {@link module:perspective~view}'s `on_update` method with `{mode: \"row\"}`\n     * in order to access the row deltas.\n     *\n     * @private\n     */\n    view.prototype._get_row_delta = async function () {\n        if (this.is_unit_context) {\n            return __MODULE__.get_row_delta_unit(this._View);\n        } else {\n            const sides = this.sides();\n            const nidx = SIDES[sides];\n            return __MODULE__[`get_row_delta_${nidx}`](this._View);\n        }\n    };\n\n    /**\n     * Register a callback with this {@link module:perspective~view}. Whenever\n     * the {@link module:perspective~view}'s underlying table emits an update,\n     * this callback will be invoked with an object containing `port_id`,\n     * indicating which port the update fired on, and optionally `delta`, which\n     * is the new data that was updated for each cell or each row.\n     *\n     * @example\n     * // Attach an `on_update` callback\n     * view.on_update(updated => console.log(updated.port_id));\n     *\n     * @example\n     * // `on_update` with row deltas\n     * view.on_update(updated => console.log(updated.delta), {mode: \"row\"});\n     *\n     * @param {function} callback A callback function invoked on update, which\n     * receives an object with two keys: `port_id`, indicating which port the\n     * update was triggered on, and `delta`, whose value is dependent on the\n     * `mode` parameter:\n     *     - \"none\" (default): `delta` is `undefined`.\n     *     - \"row\": `delta` is an Arrow of the updated rows.\n     */\n    view.prototype.on_update = function (callback, { mode = \"none\" } = {}) {\n        _call_process(this.table.get_id());\n\n        if ([\"none\", \"row\"].indexOf(mode) === -1) {\n            throw new Error(\n                `Invalid update mode \"${mode}\" - valid modes are \"none\" and \"row\".`\n            );\n        }\n\n        if (mode === \"row\") {\n            // Enable deltas only if needed by callback\n            if (!this._View._get_deltas_enabled()) {\n                this._View._set_deltas_enabled(true);\n            }\n        }\n\n        this.update_callbacks.push({\n            view: this,\n            orig_callback: callback,\n            callback: async (port_id, cache) => {\n                // Cache prevents repeated calls to expensive delta functions\n                // for on_update callbacks triggered sequentially from the same\n                // update delta.\n                if (cache[port_id] === undefined) {\n                    cache[port_id] = {};\n                }\n\n                let updated = { port_id };\n\n                if (mode === \"row\") {\n                    if (cache[port_id][\"row_delta\"] === undefined) {\n                        cache[port_id][\"row_delta\"] =\n                            await this._get_row_delta();\n                    }\n                    updated.delta = cache[port_id][\"row_delta\"];\n                }\n\n                // Call the callback with the updated object containing\n                // `port_id` and `delta`.\n                callback(updated);\n            },\n        });\n    };\n\n    function filterInPlace(a, condition) {\n        let i = 0,\n            j = 0;\n\n        while (i < a.length) {\n            const val = a[i];\n            if (condition(val, i, a)) a[j++] = val;\n            i++;\n        }\n\n        a.length = j;\n        return a;\n    }\n\n    /*\n     * Unregister a previously registered update callback with this\n     * {@link module:perspective~view}.\n     *\n     * @example\n     * // remove an `on_update` callback\n     * const callback = updated => console.log(updated);\n     * view.remove_update(callback);\n     *\n     * @param {function} callback A update callback function to be removed\n     */\n    view.prototype.remove_update = function (callback) {\n        _call_process(this.table.get_id());\n        const total = this.update_callbacks.length;\n        filterInPlace(\n            this.update_callbacks,\n            (x) => x.orig_callback !== callback\n        );\n        console.assert(\n            total > this.update_callbacks.length,\n            `\"callback\" does not match a registered updater`\n        );\n    };\n\n    /**\n     * Register a callback with this {@link module:perspective~view}.  Whenever\n     * the {@link module:perspective~view} is deleted, this callback will be\n     * invoked.\n     *\n     * @example\n     * // attach an `on_delete` callback\n     * view.on_delete(() => console.log(\"Deleted!\"));\n     *\n     * @param {function} callback A callback function invoked on delete.\n     */\n    view.prototype.on_delete = function (callback) {\n        this._delete_callbacks.push(callback);\n    };\n\n    /**\n     * Unregister a previously registered delete callback with this\n     * {@link module:perspective~view}.\n     *\n     * @example\n     * // remove an `on_delete` callback\n     * const callback = () => console.log(\"Deleted!\")\n     * view.remove_delete(callback);\n     *\n     * @param {function} callback A delete callback function to be removed\n     */\n    view.prototype.remove_delete = function (callback) {\n        const initial_length = this._delete_callbacks.length;\n        filterInPlace(this._delete_callbacks, (cb) => cb !== callback);\n        console.assert(\n            initial_length > this._delete_callbacks.length,\n            `\"callback\" does not match a registered delete callbacks`\n        );\n    };\n\n    /**\n     * A view config is a set of options that configures the underlying\n     * {@link module:perspective~view}, specifying its pivots, columns to show,\n     * aggregates, filters, and sorts.\n     *\n     * The view config receives an `Object` containing configuration options,\n     * and the `view_config` transforms it into a canonical format for\n     * interfacing with the core engine.\n     *\n     * <strong>Note</strong> This constructor is not public - view config\n     * objects should be created using standard Javascript `Object`s in the\n     * {@link module:perspective~table#view} method, which has an `options`\n     * parameter.\n     *\n     * @param {Object} config the configuration `Object` passed by the user to\n     * the {@link module:perspective~table#view} method.\n     * @private\n     * @class\n     * @hideconstructor\n     */\n    function view_config(config) {\n        this.group_by = config.group_by || [];\n        this.split_by = config.split_by || [];\n        this.aggregates = config.aggregates || {};\n        this.columns = config.columns;\n        this.filter = config.filter || [];\n        this.sort = config.sort || [];\n        this.expressions = config.expressions || [];\n        this.filter_op = config.filter_op || \"and\";\n        this.group_by_depth = config.group_by_depth;\n        this.split_by_depth = config.split_by_depth;\n    }\n\n    /**\n     * Transform configuration items into `std::vector` objects for interface\n     * with C++. `this.aggregates` is not transformed into a C++ map, as the use\n     * of `ordered_map` in the engine makes binding more difficult.\n     *\n     * @private\n     */\n    view_config.prototype.get_group_by = function () {\n        let vector = __MODULE__.make_string_vector();\n        return fill_vector(vector, this.group_by);\n    };\n\n    view_config.prototype.get_split_by = function () {\n        let vector = __MODULE__.make_string_vector();\n        return fill_vector(vector, this.split_by);\n    };\n\n    view_config.prototype.get_columns = function () {\n        let vector = __MODULE__.make_string_vector();\n        return fill_vector(vector, this.columns);\n    };\n\n    view_config.prototype.get_filter = function () {\n        let vector = __MODULE__.make_2d_val_vector();\n        for (let filter of this.filter) {\n            let filter_vector = __MODULE__.make_val_vector();\n            let filled = fill_vector(filter_vector, filter);\n            vector.push_back(filled);\n        }\n        return vector;\n    };\n\n    view_config.prototype.get_sort = function () {\n        let vector = __MODULE__.make_2d_string_vector();\n        for (let sort of this.sort) {\n            let sort_vector = __MODULE__.make_string_vector();\n            let filled = fill_vector(sort_vector, sort);\n            vector.push_back(filled);\n        }\n        return vector;\n    };\n\n    view_config.prototype.get_expressions = function () {\n        let vector = __MODULE__.make_2d_val_vector();\n        for (let expression of this.expressions) {\n            let inner = __MODULE__.make_val_vector();\n            for (let val of expression) {\n                inner.push_back(val);\n            }\n            vector.push_back(inner);\n        }\n        return vector;\n    };\n\n    /***************************************************************************\n     *\n     * Table\n     *\n     */\n\n    /**\n     * A Table object is the basic data container in Perspective.  Tables are\n     * typed - they have an immutable set of column names, and a known type for\n     * each.\n     *\n     * <strong>Note</strong> This constructor is not public - Tables are created\n     * by invoking the {@link module:perspective~table} factory method, either\n     * on the perspective module object, or an a\n     * {@link module:perspective~worker} instance.\n     *\n     * @class\n     * @hideconstructor\n     */\n    function table(_Table, index, limit, overridden_types) {\n        this._Table = _Table;\n        const gnode = this._Table.get_gnode();\n        this.gnode_id = gnode.get_id();\n        gnode.delete();\n        const pool = this._Table.get_pool();\n        pool.set_update_delegate(this);\n        pool.delete();\n        this.name = Math.random() + \"\";\n        this.initialized = false;\n        this.index = index;\n        this.limit = limit;\n        this.update_callbacks = [];\n        this._delete_callbacks = [];\n        this.views = [];\n        this.overridden_types = overridden_types;\n        bindall(this);\n    }\n\n    table.prototype.get_id = function () {\n        return this._Table.get_id();\n    };\n\n    table.prototype.get_pool = function () {\n        return this._Table.get_pool();\n    };\n\n    table.prototype.make_port = function () {\n        return this._Table.make_port();\n    };\n\n    table.prototype.remove_port = function () {\n        this._Table.remove_port();\n    };\n\n    table.prototype._update_callback = function (port_id) {\n        let cache = {};\n        for (let e in this.update_callbacks) {\n            this.update_callbacks[e].callback(port_id, cache);\n        }\n    };\n\n    /**\n     * Returns the user-specified index column for this\n     * {@link module:perspective~table} or null if an index is not set.\n     */\n    table.prototype.get_index = function () {\n        return this.index;\n    };\n\n    /**\n     * Returns the user-specified limit column for this\n     * {@link module:perspective~table} or null if an limit is not set.\n     */\n    table.prototype.get_limit = function () {\n        return this.limit;\n    };\n\n    /**\n     * Remove all rows in this {@link module:perspective~table} while preserving\n     * the schema and construction options.\n     */\n    table.prototype.clear = function () {\n        _call_process(this.get_id());\n        this._Table.reset_gnode(this.gnode_id);\n    };\n\n    /**\n     * @returns The number of views associated to this table.\n     *          Note that this may be more than what is visible on a screen.\n     *          As views are created to manage various internal\n     *          state of the application.\n     */\n    table.prototype.get_num_views = function () {\n        return this.views.length;\n    };\n\n    /**\n     * Replace all rows in this {@link module:perspective~table} the input data.\n     */\n    table.prototype.replace = function (data) {\n        _remove_process(this.get_id());\n        this._Table.reset_gnode(this.gnode_id);\n        this.update(data);\n        _call_process(this.get_id());\n    };\n\n    /**\n     * Delete this {@link module:perspective~table} and clean up all resources\n     * associated with it. Table objects do not stop consuming resources or\n     * processing updates when they are garbage collected - you must call this\n     * method to reclaim these.\n     */\n    table.prototype.delete = function () {\n        if (this.views.length > 0) {\n            throw `Cannot delete Table as it still has ${this.views.length} registered View(s).`;\n        }\n        _remove_process(this.get_id());\n        this._Table.unregister_gnode(this.gnode_id);\n        this._Table.delete();\n\n        // Call delete callbacks\n        for (const callback of this._delete_callbacks) {\n            callback();\n        }\n    };\n\n    /**\n     * Register a callback with this {@link module:perspective~table}.  Whenever\n     * the {@link module:perspective~table} is deleted, this callback will be\n     * invoked.\n     *\n     * @param {function} callback A callback function with no parameters\n     *      that will be invoked on `delete()`.\n     */\n    table.prototype.on_delete = function (callback) {\n        this._delete_callbacks.push(callback);\n    };\n\n    /**\n     * Unregister a previously registered delete callback with this\n     * {@link module:perspective~table}.\n     *\n     * @param {function} callback A delete callback function to be removed\n     */\n    table.prototype.remove_delete = function (callback) {\n        const initial_length = this._delete_callbacks.length;\n        filterInPlace(this._delete_callbacks, (cb) => cb !== callback);\n        console.assert(\n            initial_length > this._delete_callbacks.length,\n            `\"callback\" does not match a registered delete callbacks`\n        );\n    };\n\n    /**\n     * The number of accumulated rows in this {@link module:perspective~table}.\n     * This is affected by the \"index\" configuration parameter supplied to this\n     * {@link module:perspective~view}'s contructor - as rows will be\n     * overwritten when they share an idnex column.\n     *\n     * @async\n     *\n     * @returns {Promise<number>} The number of accumulated rows.\n     */\n    table.prototype.size = function () {\n        _call_process(this._Table.get_id());\n        return this._Table.size();\n    };\n\n    table.prototype.num_rows = function () {\n        return this.size();\n    };\n\n    table.prototype.num_columns = function () {\n        let schema = this._Table.get_schema();\n        let columns = schema.columns();\n        const size = columns.size();\n        columns.delete();\n        schema.delete();\n        return size - 1;\n    };\n\n    /**\n     * The schema of this {@link module:perspective~table}.  A schema is an\n     * Object whose keys are the columns of this\n     * {@link module:perspective~table}, and whose values are their string type\n     * names.\n     *\n     * @async\n     * @returns {Promise<Object>} A Promise of this\n     * {@link module:perspective~table}'s schema.\n     */\n    table.prototype.schema = function (override = true) {\n        let schema = this._Table.get_schema();\n        let columns = schema.columns();\n        let types = schema.types();\n        let new_schema = {};\n        for (let key = 0; key < columns.size(); key++) {\n            const name = columns.get(key);\n            if (name === \"psp_okey\") {\n                continue;\n            }\n            if (override && this.overridden_types[name]) {\n                new_schema[name] = this.overridden_types[name];\n            } else {\n                new_schema[name] = get_column_type(types.get(key).value);\n            }\n        }\n        schema.delete();\n        columns.delete();\n        types.delete();\n        return new_schema;\n    };\n\n    /**\n     * Transform an expression string into a vector that internally provides\n     * the engine with more metadata in order to efficiently compute the\n     * expression:\n     *\n     * v[0]: the expression string as typed by the user\n     * v[1]: the expression string with \"column\" replaced with col0, col1,\n     *  etc., which allows for faster lookup of column values.\n     * v[2]: a map of column keys (col0, col1) to actual column names,\n     *  which will be used in the engine to look up column values.\n     *\n     * @private\n     * @param {Object | Array<string>} expressions\n     */\n    function parse_expression_strings(expressions) {\n        let validated_expressions = [];\n        const expression_idx_map = {};\n        const is_new_format = !Array.isArray(expressions);\n        for (let expression of is_new_format\n            ? Object.keys(expressions)\n            : expressions) {\n            const name = expression;\n            if (is_new_format) {\n                expression = expressions[expression];\n            }\n\n            // Map of column names to column IDs, so that we generate\n            // column IDs correctly without collision.\n            let column_name_map = {};\n\n            // Map of column IDs to column names, so the engine can look\n            // up the right column internally without more transforms.\n            let column_id_map = {};\n            let running_cidx = 0;\n\n            // First, look for a column alias, which is a // style comment\n            // on the first line of the expression.\n            let expression_alias;\n            if (is_new_format) {\n                expression_alias = name;\n            } else {\n                let alias_match = expression.match(/^\\/\\/(?<alias>.+?)\\n/);\n\n                if (alias_match?.groups?.alias) {\n                    expression_alias = alias_match.groups.alias.trim();\n                }\n\n                // If an alias does not exist, the alias is the expression itself.\n                if (!expression_alias || expression_alias.length == 0) {\n                    expression_alias = expression;\n                }\n            }\n\n            // Replace `true` and `false` reserved words with symbols\n            let parsed_expression_string = expression.replace(\n                /([a-zA-Z_]+[a-zA-Z0-9_]*)/g,\n                (match) => {\n                    if (match == \"true\") {\n                        return \"True\";\n                    } else if (match == \"false\") {\n                        return \"False\";\n                    } else {\n                        return match;\n                    }\n                }\n            );\n\n            parsed_expression_string = parsed_expression_string.replace(\n                /\\\"(.*?[^\\\\])\\\"/g,\n                (_, cname) => {\n                    // If the column name contains escaped double quotes, replace\n                    // them and assume that they escape one double quote. If there\n                    // are multiple double quotes being escaped, i.e. \\\"\"...well?\n                    cname = cname.replace(/\\\\\"/g, '\"');\n\n                    if (column_name_map[cname] === undefined) {\n                        let column_id = `COLUMN${running_cidx}`;\n                        column_name_map[cname] = column_id;\n                        column_id_map[column_id] = cname;\n                    }\n\n                    running_cidx++;\n                    return column_name_map[cname];\n                }\n            );\n\n            // Replace single quote string literals and wrap them in a call to\n            // intern() which makes sure they don't leak\n            parsed_expression_string = parsed_expression_string.replace(\n                /'(.*?[^\\\\])'/g,\n                (match) => `intern(${match})`\n            );\n\n            const replace_interned_param = (match, _, intern_fn, value) => {\n                // Takes a string of the form fn(x, intern('y'))\n                // and removes intern() to create fn(x, 'y')\n                const intern_idx = match.indexOf(intern_fn);\n                return `${match.substring(\n                    0,\n                    intern_idx\n                )}'${value}'${match.substring(intern_idx + intern_fn.length)}`;\n            };\n\n            // Replace intern() for bucket and regex functions that take\n            // a string literal parameter and does not work if that param is\n            // interned. TODO: this is clumsy and we should have a better\n            // way of handling it.\n            // TODO I concur  -- texodus\n            parsed_expression_string = parsed_expression_string.replace(\n                /(bucket|match|match_all|search|indexof)\\(.*?,\\s*(intern\\(\\'(.+)\\'\\)).*\\)/g,\n                replace_interned_param\n            );\n\n            // replace and replace_all have multiple string params, only one of\n            // which needs to be interned - the regex differs from the one\n            // above as it asserts the middle parameter is the one to be\n            // replaced.\n            parsed_expression_string = parsed_expression_string.replace(\n                /(replace_all|replace)\\(.*?,\\s*(intern\\(\\'(.*)\\'\\)),.*\\)/g,\n                replace_interned_param\n            );\n\n            const validated = [\n                expression_alias,\n                expression,\n                parsed_expression_string,\n                column_id_map,\n            ];\n\n            // Check if this expression is already in the array, if so then\n            // we need to replace the expression so the last expression tagged\n            // with the alias is the one that is applied to the engine.\n            if (expression_idx_map[expression_alias] !== undefined) {\n                const idx = expression_idx_map[expression_alias];\n                validated_expressions[idx] = validated;\n            } else {\n                validated_expressions.push(validated);\n                expression_idx_map[expression_alias] =\n                    validated_expressions.length - 1;\n            }\n        }\n\n        return validated_expressions;\n    }\n\n    /**\n     * Given an array of expressions, return an object containing `expressions`,\n     * which map expression aliases to data types, and `errors`, which\n     * maps expression aliases to error messages. If an expression that was\n     * passed in is not in `expressions`, it is guaranteed to be in `errors`.\n     *\n     * @async\n     * @param {Object} expressions A dictionary of name/expressions to\n     * be validated.\n     *\n     * @returns {Promise<Object>}\n     *\n     * @example\n     * const results = await table.validate_expressions([\n     *  '\"Sales\" + \"Profit\"', \"invalid\", \"1 + 'string'\"\n     * ]);\n     *\n     * // {'\"Sales\" + \"Profit\"': \"float\"}\n     * console.log(results.expression_schema);\n     *\n     * // {\n     * //   \"invalid\": {column: 0, line: 0, error_message: \"unknown token!\"},\n     * //   \"1 + 'string'\": {column: 0, line: 0, error_message: \"Type Error\"}\n     * // }\n     * console.log(results.errors);\n     */\n    table.prototype.validate_expressions = function (\n        expressions,\n        override = true\n    ) {\n        const validated = {\n            expression_schema: {},\n            expression_alias: {},\n            errors: {},\n        };\n\n        if (!expressions || Object.keys(expressions).length === 0) {\n            return validated;\n        }\n\n        expressions = parse_expression_strings(expressions);\n\n        // Transform Array into a C++ vector that can be passed through\n        // Emscripten.\n        let vector = __MODULE__.make_2d_val_vector();\n\n        for (let expression of expressions) {\n            let inner = __MODULE__.make_val_vector();\n            for (let val of expression) {\n                inner.push_back(val);\n            }\n            vector.push_back(inner);\n            validated.expression_alias[expression[0]] = expression[1];\n        }\n\n        const validation_results = __MODULE__.validate_expressions(\n            this._Table,\n            vector\n        );\n        const expression_schema = validation_results.get_expression_schema();\n        const expression_errors = validation_results.get_expression_errors();\n\n        const expression_aliases = expression_schema.keys();\n\n        for (let i = 0; i < expression_aliases.size(); i++) {\n            const alias = expression_aliases.get(i);\n            let dtype = expression_schema.get(alias);\n\n            if (override && this.overridden_types[alias]) {\n                dtype = this.overridden_types[alias];\n            }\n\n            validated.expression_schema[alias] = dtype;\n        }\n\n        const error_aliases = expression_errors.keys();\n\n        for (let i = 0; i < error_aliases.size(); i++) {\n            const alias = error_aliases.get(i);\n\n            // bound using `value_object` in embind so no need to manually\n            // convert to Object, or call delete() as memory is auto-managed.\n            const error_object = expression_errors.get(alias);\n            validated.errors[alias] = error_object;\n        }\n\n        error_aliases.delete();\n        expression_aliases.delete();\n        expression_errors.delete();\n        expression_schema.delete();\n        validation_results.delete();\n        return validated;\n    };\n\n    /**\n     * Validates a filter configuration, i.e. that the value to filter by is not\n     * null or undefined.\n     *\n     * @async\n     * @param {Array<string>} [filter] a filter configuration to test.\n     */\n    table.prototype.is_valid_filter = function (filter) {\n        // isNull and isNotNull filter operators are always valid and apply to\n        // all schema types\n        if (\n            filter[1] === perspective.FILTER_OPERATORS.isNull ||\n            filter[1] === perspective.FILTER_OPERATORS.isNotNull\n        ) {\n            return true;\n        }\n\n        let value = filter[2];\n        if (value === null) {\n            return false;\n        }\n\n        const schema = this.schema();\n        const exists = schema[filter[0]];\n        if (\n            exists &&\n            (schema[filter[0]] === \"date\" || schema[filter[0]] === \"datetime\")\n        ) {\n            return __MODULE__.is_valid_datetime(filter[2]);\n        }\n\n        return typeof value !== \"undefined\" && value !== null;\n    };\n\n    /**\n     * Create a new {@link module:perspective~view} from this table with a\n     * specified configuration. For a better understanding of the View\n     * configuration options, see the\n     * [Documentation](https://perspective.finos.org/docs/md/view.html).\n     *\n     * @param {Object} [config] The configuration object for this\n     * {@link module:perspective~view}.\n     * @param {Array<string>} [config.group_by] An array of column names to\n     * use as {@link https://en.wikipedia.org/wiki/Pivot_table#Row_labels Group By}.\n     * @param {Array<string>} [config.split_by] An array of column names to\n     * use as {@link https://en.wikipedia.org/wiki/Pivot_table#Column_labels Split By}.\n     * @param {Array<Object>} [config.columns] An array of column names for the\n     * output columns. If none are provided, all columns are output.\n     * @param {Object} [config.aggregates] An object, the keys of which are\n     * column names, and their respective values are the aggregates calculations\n     * to use when this view has `group_by`. A column provided to\n     * `config.columns` without an aggregate in this object, will use the\n     * default aggregate calculation for its type.\n     * @param {Array<Array<string>>} [config.filter] An Array of Filter\n     * configurations to apply. A filter configuration is an array of 3\n     * elements: A column name, a supported filter comparison string (e.g.\n     * '===', '>'), and a value to compare.\n     * @param {Array<string>} [config.sort] An Array of Sort configurations to\n     * apply. A sort configuration is an array of 2 elements: A column name, and\n     * a sort direction, which are: \"none\", \"asc\", \"desc\", \"col asc\", \"col\n     * desc\", \"asc abs\", \"desc abs\", \"col asc abs\", \"col desc abs\".\n     *\n     * @example\n     * const view = await table.view({\n     *      group_by: [\"region\"],\n     *      columns: [\"region\"],\n     *      aggregates: {\"region\": \"dominant\"},\n     *      filter: [[\"client\", \"contains\", \"fred\"]],\n     *      sort: [[\"value\", \"asc\"]]\n     * });\n     *\n     * @returns {Promise<view>} A Promise that resolves to a new\n     * {@link module:perspective~view} object for the supplied configuration,\n     * bound to this table.\n     */\n    table.prototype.view = function (_config = {}) {\n        _call_process(this._Table.get_id());\n        let config = {};\n        for (const key of Object.keys(_config)) {\n            if (defaults.CONFIG_ALIASES[key]) {\n                if (!config[defaults.CONFIG_ALIASES[key]]) {\n                    if (!WARNED_KEYS.has(key)) {\n                        console.warn(\n                            `Deprecated: \"${key}\" config parameter, please use \"${defaults.CONFIG_ALIASES[key]}\" instead`\n                        );\n                        WARNED_KEYS.add(key);\n                    }\n                    config[defaults.CONFIG_ALIASES[key]] = _config[key];\n                } else {\n                    throw new Error(\n                        `Duplicate configuration parameter \"${key}\"`\n                    );\n                }\n            } else if (key === \"aggregate\") {\n                if (!WARNED_KEYS.has(\"aggregate\")) {\n                    console.warn(\n                        `Deprecated: \"aggregate\" config parameter has been replaced by \"aggregates\" and \"columns\"`\n                    );\n                    WARNED_KEYS.add(\"aggregate\");\n                }\n                // backwards compatibility: deconstruct `aggregate` into\n                // `aggregates` and `columns`\n                config[\"aggregates\"] = {};\n                config[\"columns\"] = [];\n                for (const agg of _config[\"aggregate\"]) {\n                    config[\"aggregates\"][agg[\"column\"]] = agg[\"op\"];\n                    config[\"columns\"].push(agg[\"column\"]);\n                }\n            } else if (defaults.CONFIG_VALID_KEYS.indexOf(key) > -1) {\n                config[key] = _config[key];\n            } else {\n                throw new Error(`Unrecognized config parameter \"${key}\"`);\n            }\n        }\n\n        config.group_by = config.group_by || [];\n        config.split_by = config.split_by || [];\n        config.aggregates = config.aggregates || {};\n        config.filter = config.filter || [];\n        config.sort = config.sort || [];\n        config.expressions = config.expressions || {};\n\n        const table_schema = this.schema();\n\n        if (config.expressions !== undefined) {\n            if (Array.isArray(config.expressions)) {\n                console.warn(\n                    \"Legacy `expressions` format: \" +\n                        JSON.stringify(config.expressions)\n                );\n            }\n\n            config.expressions = parse_expression_strings(config.expressions);\n        }\n\n        if (config.columns === undefined) {\n            // If columns are not provided, use all columns\n            config.columns = this.columns();\n\n            if (config.expressions != undefined) {\n                for (const expr of config.expressions) {\n                    config.columns.push(expr[0]);\n                }\n            }\n        }\n\n        // convert date/datetime filters to Date() objects, so they are parsed\n        // as local time\n        if (config.filter.length > 0) {\n            for (let filter of config.filter) {\n                // TODO: this does not work for expressions\n                const dtype = table_schema[filter[0]];\n                const is_compare =\n                    filter[1] !== perspective.FILTER_OPERATORS.isNull &&\n                    filter[1] !== perspective.FILTER_OPERATORS.isNotNull;\n                if (is_compare && (dtype === \"date\" || dtype === \"datetime\")) {\n                    // new Date() accepts strings and new Date() objects, so no\n                    // need to type check here.\n                    filter[2] = new Date(filter[2]);\n                }\n            }\n        }\n\n        let name = Math.random() + \"\";\n        let sides;\n\n        if (config.group_by.length > 0 || config.split_by.length > 0) {\n            if (config.split_by && config.split_by.length > 0) {\n                sides = 2;\n            } else {\n                sides = 1;\n            }\n        } else {\n            sides = 0;\n        }\n\n        let vc = new view_config(config);\n        let v = new view(this, sides, config, vc, name);\n        this.views.push(v);\n        return v;\n    };\n\n    let meter;\n\n    function initialize_profile_thread() {\n        if (meter === undefined) {\n            let _msgs = 0;\n            let start = performance.now();\n            setTimeout(function poll() {\n                let now = performance.now();\n                console.log(\n                    `${((1000 * _msgs) / (now - start)).toFixed(2)} msgs/sec`\n                );\n                _msgs = 0;\n                start = now;\n                setTimeout(poll, 5000);\n            }, 5000);\n            meter = function update(x) {\n                _msgs += x;\n            };\n            console.log(\"Profiling initialized\");\n        }\n    }\n\n    table.prototype.query_columns = function (config, format) {\n        const view = this.view(config);\n        const columns = view.to_columns(format);\n        view.delete();\n        return columns;\n    };\n\n    /**\n     * Updates the rows of a {@link module:perspective~table}. Updated rows are\n     * pushed down to any derived {@link module:perspective~view} objects.\n     *\n     * @param {Object<string, Array>|Array<Object>|string} data The input data\n     * for this table. {@link module:perspective~table}s are immutable after\n     * creation, so this method cannot be called with a schema.\n     *\n     * Otherwise, the supported input types are the same as the\n     * {@link module:perspective~table} constructor.\n     *\n     * @see {@link module:perspective~table}\n     */\n    table.prototype.update = function (data, options) {\n        options = options || {};\n        options.port_id = options.port_id || 0;\n\n        let pdata;\n        let cols = this.columns();\n        let schema = this._Table.get_schema();\n        let types = schema.types();\n        let is_arrow = false;\n        let is_csv = false;\n\n        pdata = accessor;\n\n        if (data instanceof ArrayBuffer) {\n            pdata = new Uint8Array(data);\n            is_arrow = true;\n        } else if (typeof data === \"string\") {\n            if (data[0] === \",\") {\n                data = \"_\" + data;\n            }\n            is_csv = true;\n            is_arrow = true;\n            pdata = data;\n        } else {\n            accessor.init(data);\n            accessor.names = cols.concat(\n                accessor.names.filter((x) => x === \"__INDEX__\")\n            );\n            accessor.types = extract_vector(types).slice(0, cols.length);\n\n            if (meter) {\n                meter(accessor.row_count);\n            }\n        }\n\n        if (!is_arrow) {\n            if (pdata.row_count === 0) {\n                console.warn(\"table.update called with no data - ignoring\");\n                return;\n            }\n\n            // process implicit index column\n            const has_index = accessor.names.indexOf(\"__INDEX__\");\n            if (has_index != -1) {\n                const explicit_index = !!this.index;\n                if (explicit_index) {\n                    // find the type of the index column\n                    accessor.types.push(\n                        accessor.types[accessor.names.indexOf(this.index)]\n                    );\n                } else {\n                    // default index is an integer\n                    accessor.types.push(__MODULE__.t_dtype.DTYPE_INT32);\n                }\n            }\n        }\n\n        try {\n            const op = __MODULE__.t_op.OP_INSERT;\n            // update the Table in C++, but don't keep the returned C++ Table\n            // reference as it is identical\n            make_table(\n                pdata,\n                this._Table,\n                this.index,\n                this.limit,\n                op,\n                true,\n                is_arrow,\n                is_csv,\n                options.port_id\n            ).delete();\n            this.initialized = true;\n        } catch (e) {\n            console.error(`Update failed: ${e}`);\n        } finally {\n            schema.delete();\n        }\n    };\n\n    /**\n     * Removes the rows of a {@link module:perspective~table}. Removed rows are\n     * pushed down to any derived {@link module:perspective~view} objects.\n     *\n     * @param {Array<Object>} data An array of primary keys to remove.\n     *\n     * @see {@link module:perspective~table}\n     */\n    table.prototype.remove = function (data, options) {\n        if (!this.index) {\n            console.error(\n                \"Cannot call `remove()` on a Table without a user-specified index.\"\n            );\n            return;\n        }\n\n        options = options || {};\n        options.port_id = options.port_id || 0;\n        let pdata;\n        let cols = this.columns();\n        let schema = this._Table.get_schema();\n        let types = schema.types();\n        let is_arrow = false;\n\n        data = data.map((idx) => ({ [this.index]: idx }));\n\n        if (data instanceof ArrayBuffer) {\n            pdata = new Uint8Array(data);\n            is_arrow = true;\n        } else {\n            accessor.init(data);\n            accessor.names = [this.index];\n            accessor.types = [extract_vector(types)[cols.indexOf(this.index)]];\n            pdata = accessor;\n        }\n\n        try {\n            const op = __MODULE__.t_op.OP_DELETE;\n            // update the Table in C++, but don't keep the returned Table\n            // reference as it is identical\n            make_table(\n                pdata,\n                this._Table,\n                this.index,\n                this.limit,\n                op,\n                false,\n                is_arrow,\n                false,\n                options.port_id\n            ).delete();\n            this.initialized = true;\n        } catch (e) {\n            console.error(`Remove failed`, e);\n        } finally {\n            schema.delete();\n        }\n    };\n\n    /**\n     * The column names of this table.\n     *\n     * @async\n     * @returns {Promise<Array<string>>} An array of column names for this\n     * table.\n     */\n    table.prototype.columns = function () {\n        let schema = this._Table.get_schema();\n        let cols = schema.columns();\n        let names = [];\n        for (let cidx = 0; cidx < cols.size(); cidx++) {\n            let name = cols.get(cidx);\n            if (name !== \"psp_okey\") {\n                names.push(name);\n            }\n        }\n        schema.delete();\n        cols.delete();\n        return names;\n    };\n\n    table.prototype.execute = function (f) {\n        f(this);\n    };\n\n    /***************************************************************************\n     *\n     * Perspective\n     *\n     */\n\n    const perspective = {\n        __module__: __MODULE__,\n\n        Server,\n\n        worker: function () {\n            return this;\n        },\n\n        initialize_profile_thread,\n\n        memory_usage,\n\n        /**\n         * A factory method for constructing {@link module:perspective~table}s.\n         *\n         * @example\n         * // Creating a table directly from node\n         * const table = await perspective.table([{x: 1}, {x: 2}]);\n         *\n         * @example\n         * // Creating a table from a Web Worker (instantiated via the worker()\n         * method).\n         * const table = await worker.table([{x: 1}, {x: 2}]);\n         *\n         * @param {Object<string, Array>|Object<string,\n         *     string>|Array<Object>|string} data The input data for this table.\n         *     When supplied an Object with string values, an empty table is\n         *     returned using this Object as a schema. When an Object with\n         *     Array values is supplied, a table is returned using this object's\n         *     key/value pairs as name/columns respectively. When an Array is\n         *     supplied, a table is constructed using this Array's objects as\n         *     rows. When a string is supplied, the parameter as parsed as a\n         *     CSV.\n         * @param {Object} [options] An optional options dictionary.\n         * @param {string} options.index The name of the column in the resulting\n         *     table to treat as an index. When updating this table, rows\n         *     sharing an index of a new row will be overwritten. `index`\n         *     cannot be applied at the same time as `limit`.\n         * @param {integer} options.limit The maximum number of rows that can be\n         *     added to this table. When exceeded, old rows will be overwritten\n         *     in the order they were inserted. `limit` cannot be applied at\n         *     the same time as `index`.\n         *\n         * @returns {Promise<table>} A Promise that will resolve to a new\n         * {@link module:perspective~table} object, or be rejected if an error\n         * happens during Table construction.\n         */\n        table: function (data, options) {\n            options = options || {};\n\n            // Always store index and limit as user-provided values or `null`.\n            options.index = options.index || null;\n            options.limit = options.limit || null;\n\n            let data_accessor;\n            let is_arrow = false;\n            let overridden_types = {};\n            let is_csv = false;\n\n            if (\n                data instanceof ArrayBuffer ||\n                (typeof Buffer !== \"undefined\" && data instanceof Buffer)\n            ) {\n                data_accessor = new Uint8Array(data);\n                is_arrow = true;\n            } else if (typeof data === \"string\") {\n                if (data[0] === \",\") {\n                    data = \"_\" + data;\n                }\n                is_csv = true;\n                is_arrow = true;\n                data_accessor = data;\n            } else {\n                accessor.clean();\n                overridden_types = accessor.init(data);\n                data_accessor = accessor;\n            }\n\n            if (options.index && options.limit) {\n                throw `Cannot specify both index '${options.index}' and limit '${options.limit}'.`;\n            }\n\n            let _Table;\n\n            try {\n                const op = __MODULE__.t_op.OP_INSERT;\n\n                // C++ Table constructor cannot take null values for index\n                // and limit, so `make_table` will convert null to default\n                // values of \"\" for index and 4294967295 for limit. Tables\n                // must be created on port 0.\n                _Table = make_table(\n                    data_accessor,\n                    undefined,\n                    options.index,\n                    options.limit,\n                    op,\n                    false,\n                    is_arrow,\n                    is_csv,\n                    0\n                );\n\n                // Pass through user-provided values or `null` to the\n                // Javascript Table constructor.\n                return new table(\n                    _Table,\n                    options.index,\n                    options.limit,\n                    overridden_types\n                );\n            } catch (e) {\n                if (_Table) {\n                    _Table.delete();\n                }\n                console.error(`Table initialization failed: ${e}`);\n                throw e;\n            }\n        },\n    };\n\n    for (let prop of Object.keys(defaults)) {\n        perspective[prop] = defaults[prop];\n    }\n\n    /**\n     * Hosting Perspective\n     *\n     * Create a WebWorker API that loads perspective in `init` and extends\n     * `post` using the worker's `postMessage` method.\n     *\n     * If Perspective is running inside a Web Worker, use the WebSorkerServer as\n     * default.\n     *\n     * @extends Server\n     * @private\n     */\n    class WebWorkerServer extends Server {\n        /**\n         * On initialization, listen for messages posted from the client and\n         * send it to `Server.process()`.\n         *\n         * @param perspective a reference to the Perspective module, allowing\n         * the `Server` to access Perspective methods.\n         */\n        constructor(perspective) {\n            super(perspective);\n            self.addEventListener(\n                \"message\",\n                (e) => this.process(e.data),\n                false\n            );\n        }\n\n        /**\n         * Implements the `Server`'s `post()` method using the Web Worker\n         * `postMessage()` API.\n         *\n         * @param {Object} msg a message to pass to the client\n         * @param {*} transfer a transferable object to pass to the client, if\n         * needed\n         */\n        post(msg, transfer) {\n            self.postMessage(msg, transfer);\n        }\n\n        /**\n         * When initialized, replace Perspective's internal `__MODULE` variable\n         * with the WASM binary.\n         *\n         * @param {ArrayBuffer} buffer an ArrayBuffer or Buffer containing the\n         * Perspective WASM code\n         */\n        async init(msg) {\n            let wasmBinary = msg.buffer;\n            const mod = await WebAssembly.instantiate(wasmBinary);\n            const exports = mod.instance.exports;\n            const size = exports.size();\n            const offset = exports.offset();\n            const array = new Uint8Array(exports.memory.buffer);\n            wasmBinary = array.slice(offset, offset + size);\n            __MODULE__ = await __MODULE__({\n                wasmBinary,\n                wasmJSMethod: \"native-wasm\",\n                locateFile: (x) => x,\n            });\n\n            __MODULE__.init();\n            super.init(msg);\n        }\n    }\n\n    /**\n     * Use WebSorkerServer as default inside a Web Worker, where `window` is\n     * replaced with `self`.\n     */\n    if (typeof self !== \"undefined\" && self.addEventListener) {\n        new WebWorkerServer(perspective);\n    }\n\n    return perspective;\n}\n", "\nvar load_perspective = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=true;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require(\"fs\");var nodePath=require(\"path\");if(ENVIRONMENT_IS_WORKER){scriptDirectory=nodePath.dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}read_=(filename,binary)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)onerror(err);else onload(binary?data.buffer:data)})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow};Module[\"inspect\"]=()=>\"[Emscripten Module object]\"}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b);Module[\"HEAP64\"]=HEAP64=new BigInt64Array(b);Module[\"HEAPU64\"]=HEAPU64=new BigUint64Array(b)}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";var isDataURI=filename=>filename.startsWith(dataURIPrefix);var isFileURI=filename=>filename.startsWith(\"file://\");var wasmBinaryFile;wasmBinaryFile=\"perspective.cpp.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"env\":wasmImports,\"wasi_snapshot_preview1\":wasmImports};function receiveInstance(instance,module){wasmExports=instance.exports;wasmExports=applySignatureConversions(wasmExports);wasmMemory=wasmExports[\"memory\"];updateMemoryViews();wasmTable=wasmExports[\"__indirect_function_table\"];removeRunDependency(\"wasm-instantiate\");return wasmExports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var ASM_CONSTS={847732:$0=>{throw new Error(UTF8ToString($0))}};function ExitStatus(status){this.name=\"ExitStatus\";this.message=`Program terminated with exit(${status})`;this.status=status}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var noExitRuntime=Module[\"noExitRuntime\"]||true;var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{idx>>>=0;var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>{ptr>>>=0;return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"};var SYSCALLS={varargs:undefined,get(){var ret=HEAP32[+SYSCALLS.varargs>>>2>>>0];SYSCALLS.varargs+=4;return ret},getp(){return SYSCALLS.get()},getStr(ptr){var ret=UTF8ToString(ptr);return ret}};var MAX_INT53=9007199254740992;var MIN_INT53=-9007199254740992;var bigintToI53Checked=num=>num<MIN_INT53||num>MAX_INT53?NaN:Number(num);function ___syscall_ftruncate64(fd,length){length=bigintToI53Checked(length)}var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{outIdx>>>=0;if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++>>>0]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++>>>0]=192|u>>6;heap[outIdx++>>>0]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++>>>0]=224|u>>12;heap[outIdx++>>>0]=128|u>>6&63;heap[outIdx++>>>0]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++>>>0]=240|u>>18;heap[outIdx++>>>0]=128|u>>12&63;heap[outIdx++>>>0]=128|u>>6&63;heap[outIdx++>>>0]=128|u&63}}heap[outIdx>>>0]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);function ___syscall_getdents64(fd,dirp,count){dirp>>>=0;count>>>=0}var structRegistrations={};var runDestructors=destructors=>{while(destructors.length){var ptr=destructors.pop();var del=destructors.pop();del(ptr)}};function simpleReadValueFromPointer(pointer){return this[\"fromWireType\"](HEAP32[pointer>>>2>>>0])}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var InternalError;var throwInternalError=message=>{throw new InternalError(message)};var whenDependentTypesAreResolved=(myTypes,dependentTypes,getTypeConverters)=>{myTypes.forEach(function(type){typeDependencies[type]=dependentTypes});function onComplete(typeConverters){var myTypeConverters=getTypeConverters(typeConverters);if(myTypeConverters.length!==myTypes.length){throwInternalError(\"Mismatched type converter count\")}for(var i=0;i<myTypes.length;++i){registerType(myTypes[i],myTypeConverters[i])}}var typeConverters=new Array(dependentTypes.length);var unregisteredTypes=[];var registered=0;dependentTypes.forEach((dt,i)=>{if(registeredTypes.hasOwnProperty(dt)){typeConverters[i]=registeredTypes[dt]}else{unregisteredTypes.push(dt);if(!awaitingDependencies.hasOwnProperty(dt)){awaitingDependencies[dt]=[]}awaitingDependencies[dt].push(()=>{typeConverters[i]=registeredTypes[dt];++registered;if(registered===unregisteredTypes.length){onComplete(typeConverters)}})}});if(0===unregisteredTypes.length){onComplete(typeConverters)}};var __embind_finalize_value_object=function(structType){structType>>>=0;var reg=structRegistrations[structType];delete structRegistrations[structType];var rawConstructor=reg.rawConstructor;var rawDestructor=reg.rawDestructor;var fieldRecords=reg.fields;var fieldTypes=fieldRecords.map(field=>field.getterReturnType).concat(fieldRecords.map(field=>field.setterArgumentType));whenDependentTypesAreResolved([structType],fieldTypes,fieldTypes=>{var fields={};fieldRecords.forEach((field,i)=>{var fieldName=field.fieldName;var getterReturnType=fieldTypes[i];var getter=field.getter;var getterContext=field.getterContext;var setterArgumentType=fieldTypes[i+fieldRecords.length];var setter=field.setter;var setterContext=field.setterContext;fields[fieldName]={read:ptr=>getterReturnType[\"fromWireType\"](getter(getterContext,ptr)),write:(ptr,o)=>{var destructors=[];setter(setterContext,ptr,setterArgumentType[\"toWireType\"](destructors,o));runDestructors(destructors)}}});return[{name:reg.name,\"fromWireType\":ptr=>{var rv={};for(var i in fields){rv[i]=fields[i].read(ptr)}rawDestructor(ptr);return rv},\"toWireType\":(destructors,o)=>{for(var fieldName in fields){if(!(fieldName in o)){throw new TypeError(`Missing field: \"${fieldName}\"`)}}var ptr=rawConstructor();for(fieldName in fields){fields[fieldName].write(ptr,o[fieldName])}if(destructors!==null){destructors.push(rawDestructor,ptr)}return ptr},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":simpleReadValueFromPointer,destructorFunction:rawDestructor}]})};var embindRepr=v=>{if(v===null){return\"null\"}var t=typeof v;if(t===\"object\"||t===\"array\"||t===\"function\"){return v.toString()}else{return\"\"+v}};var embind_init_charCodes=()=>{var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i)}embind_charCodes=codes};var embind_charCodes;var readLatin1String=ptr=>{var ret=\"\";var c=ptr;while(HEAPU8[c>>>0]){ret+=embind_charCodes[HEAPU8[c++>>>0]]}return ret};var BindingError;var throwBindingError=message=>{throw new BindingError(message)};function sharedRegisterType(rawType,registeredInstance,options={}){var name=registeredInstance.name;if(!rawType){throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`)}if(registeredTypes.hasOwnProperty(rawType)){if(options.ignoreDuplicateRegistrations){return}else{throwBindingError(`Cannot register type '${name}' twice`)}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(awaitingDependencies.hasOwnProperty(rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(cb=>cb())}}function registerType(rawType,registeredInstance,options={}){if(!(\"argPackAdvance\"in registeredInstance)){throw new TypeError(\"registerType registeredInstance requires argPackAdvance\")}return sharedRegisterType(rawType,registeredInstance,options)}var integerReadValueFromPointer=(name,width,signed)=>{switch(width){case 1:return signed?pointer=>HEAP8[pointer>>>0>>>0]:pointer=>HEAPU8[pointer>>>0>>>0];case 2:return signed?pointer=>HEAP16[pointer>>>1>>>0]:pointer=>HEAPU16[pointer>>>1>>>0];case 4:return signed?pointer=>HEAP32[pointer>>>2>>>0]:pointer=>HEAPU32[pointer>>>2>>>0];case 8:return signed?pointer=>HEAP64[pointer>>>3]:pointer=>HEAPU64[pointer>>>3];default:throw new TypeError(`invalid integer width (${width}): ${name}`)}};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){primitiveType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);var isUnsignedType=name.indexOf(\"u\")!=-1;if(isUnsignedType){maxRange=(1n<<64n)-1n}registerType(primitiveType,{name:name,\"fromWireType\":value=>value,\"toWireType\":function(destructors,value){if(typeof value!=\"bigint\"&&typeof value!=\"number\"){throw new TypeError(`Cannot convert \"${embindRepr(value)}\" to ${this.name}`)}if(value<minRange||value>maxRange){throw new TypeError(`Passing a number \"${embindRepr(value)}\" from JS side to C/C++ side to an argument of type \"${name}\", which is outside the valid range [${minRange}, ${maxRange}]!`)}return value},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":integerReadValueFromPointer(name,size,!isUnsignedType),destructorFunction:null})}var GenericWireTypeSize=8;function __embind_register_bool(rawType,name,trueValue,falseValue){rawType>>>=0;name>>>=0;name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":function(wt){return!!wt},\"toWireType\":function(destructors,o){return o?trueValue:falseValue},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":function(pointer){return this[\"fromWireType\"](HEAPU8[pointer>>>0])},destructorFunction:null})}var shallowCopyInternalPointer=o=>({count:o.count,deleteScheduled:o.deleteScheduled,preservePointerOnDelete:o.preservePointerOnDelete,ptr:o.ptr,ptrType:o.ptrType,smartPtr:o.smartPtr,smartPtrType:o.smartPtrType});var throwInstanceAlreadyDeleted=obj=>{function getInstanceTypeName(handle){return handle.$$.ptrType.registeredClass.name}throwBindingError(getInstanceTypeName(obj)+\" instance already deleted\")};var finalizationRegistry=false;var detachFinalizer=handle=>{};var runDestructor=$$=>{if($$.smartPtr){$$.smartPtrType.rawDestructor($$.smartPtr)}else{$$.ptrType.registeredClass.rawDestructor($$.ptr)}};var releaseClassHandle=$$=>{$$.count.value-=1;var toDelete=0===$$.count.value;if(toDelete){runDestructor($$)}};var downcastPointer=(ptr,ptrClass,desiredClass)=>{if(ptrClass===desiredClass){return ptr}if(undefined===desiredClass.baseClass){return null}var rv=downcastPointer(ptr,ptrClass,desiredClass.baseClass);if(rv===null){return null}return desiredClass.downcast(rv)};var registeredPointers={};var getInheritedInstanceCount=()=>Object.keys(registeredInstances).length;var getLiveInheritedInstances=()=>{var rv=[];for(var k in registeredInstances){if(registeredInstances.hasOwnProperty(k)){rv.push(registeredInstances[k])}}return rv};var deletionQueue=[];var flushPendingDeletes=()=>{while(deletionQueue.length){var obj=deletionQueue.pop();obj.$$.deleteScheduled=false;obj[\"delete\"]()}};var delayFunction;var setDelayFunction=fn=>{delayFunction=fn;if(deletionQueue.length&&delayFunction){delayFunction(flushPendingDeletes)}};var init_embind=()=>{Module[\"getInheritedInstanceCount\"]=getInheritedInstanceCount;Module[\"getLiveInheritedInstances\"]=getLiveInheritedInstances;Module[\"flushPendingDeletes\"]=flushPendingDeletes;Module[\"setDelayFunction\"]=setDelayFunction};var registeredInstances={};var getBasestPointer=(class_,ptr)=>{if(ptr===undefined){throwBindingError(\"ptr should not be undefined\")}while(class_.baseClass){ptr=class_.upcast(ptr);class_=class_.baseClass}return ptr};var getInheritedInstance=(class_,ptr)=>{ptr=getBasestPointer(class_,ptr);return registeredInstances[ptr]};var makeClassHandle=(prototype,record)=>{if(!record.ptrType||!record.ptr){throwInternalError(\"makeClassHandle requires ptr and ptrType\")}var hasSmartPtrType=!!record.smartPtrType;var hasSmartPtr=!!record.smartPtr;if(hasSmartPtrType!==hasSmartPtr){throwInternalError(\"Both smartPtrType and smartPtr must be specified\")}record.count={value:1};return attachFinalizer(Object.create(prototype,{$$:{value:record}}))};function RegisteredPointer_fromWireType(ptr){var rawPointer=this.getPointee(ptr);if(!rawPointer){this.destructor(ptr);return null}var registeredInstance=getInheritedInstance(this.registeredClass,rawPointer);if(undefined!==registeredInstance){if(0===registeredInstance.$$.count.value){registeredInstance.$$.ptr=rawPointer;registeredInstance.$$.smartPtr=ptr;return registeredInstance[\"clone\"]()}else{var rv=registeredInstance[\"clone\"]();this.destructor(ptr);return rv}}function makeDefaultHandle(){if(this.isSmartPointer){return makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:rawPointer,smartPtrType:this,smartPtr:ptr})}else{return makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this,ptr:ptr})}}var actualType=this.registeredClass.getActualType(rawPointer);var registeredPointerRecord=registeredPointers[actualType];if(!registeredPointerRecord){return makeDefaultHandle.call(this)}var toType;if(this.isConst){toType=registeredPointerRecord.constPointerType}else{toType=registeredPointerRecord.pointerType}var dp=downcastPointer(rawPointer,this.registeredClass,toType.registeredClass);if(dp===null){return makeDefaultHandle.call(this)}if(this.isSmartPointer){return makeClassHandle(toType.registeredClass.instancePrototype,{ptrType:toType,ptr:dp,smartPtrType:this,smartPtr:ptr})}else{return makeClassHandle(toType.registeredClass.instancePrototype,{ptrType:toType,ptr:dp})}}var attachFinalizer=handle=>{if(\"undefined\"===typeof FinalizationRegistry){attachFinalizer=handle=>handle;return handle}finalizationRegistry=new FinalizationRegistry(info=>{releaseClassHandle(info.$$)});attachFinalizer=handle=>{var $$=handle.$$;var hasSmartPtr=!!$$.smartPtr;if(hasSmartPtr){var info={$$:$$};finalizationRegistry.register(handle,info,handle)}return handle};detachFinalizer=handle=>finalizationRegistry.unregister(handle);return attachFinalizer(handle)};var init_ClassHandle=()=>{Object.assign(ClassHandle.prototype,{\"isAliasOf\"(other){if(!(this instanceof ClassHandle)){return false}if(!(other instanceof ClassHandle)){return false}var leftClass=this.$$.ptrType.registeredClass;var left=this.$$.ptr;other.$$=other.$$;var rightClass=other.$$.ptrType.registeredClass;var right=other.$$.ptr;while(leftClass.baseClass){left=leftClass.upcast(left);leftClass=leftClass.baseClass}while(rightClass.baseClass){right=rightClass.upcast(right);rightClass=rightClass.baseClass}return leftClass===rightClass&&left===right},\"clone\"(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.preservePointerOnDelete){this.$$.count.value+=1;return this}else{var clone=attachFinalizer(Object.create(Object.getPrototypeOf(this),{$$:{value:shallowCopyInternalPointer(this.$$)}}));clone.$$.count.value+=1;clone.$$.deleteScheduled=false;return clone}},\"delete\"(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete){throwBindingError(\"Object already scheduled for deletion\")}detachFinalizer(this);releaseClassHandle(this.$$);if(!this.$$.preservePointerOnDelete){this.$$.smartPtr=undefined;this.$$.ptr=undefined}},\"isDeleted\"(){return!this.$$.ptr},\"deleteLater\"(){if(!this.$$.ptr){throwInstanceAlreadyDeleted(this)}if(this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete){throwBindingError(\"Object already scheduled for deletion\")}deletionQueue.push(this);if(deletionQueue.length===1&&delayFunction){delayFunction(flushPendingDeletes)}this.$$.deleteScheduled=true;return this}})};function ClassHandle(){}var createNamedFunction=(name,body)=>Object.defineProperty(body,\"name\",{value:name});var ensureOverloadTable=(proto,methodName,humanName)=>{if(undefined===proto[methodName].overloadTable){var prevFunc=proto[methodName];proto[methodName]=function(){if(!proto[methodName].overloadTable.hasOwnProperty(arguments.length)){throwBindingError(`Function '${humanName}' called with an invalid number of arguments (${arguments.length}) - expects one of (${proto[methodName].overloadTable})!`)}return proto[methodName].overloadTable[arguments.length].apply(this,arguments)};proto[methodName].overloadTable=[];proto[methodName].overloadTable[prevFunc.argCount]=prevFunc}};var exposePublicSymbol=(name,value,numArguments)=>{if(Module.hasOwnProperty(name)){if(undefined===numArguments||undefined!==Module[name].overloadTable&&undefined!==Module[name].overloadTable[numArguments]){throwBindingError(`Cannot register public name '${name}' twice`)}ensureOverloadTable(Module,name,name);if(Module.hasOwnProperty(numArguments)){throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${numArguments})!`)}Module[name].overloadTable[numArguments]=value}else{Module[name]=value;if(undefined!==numArguments){Module[name].numArguments=numArguments}}};var char_0=48;var char_9=57;var makeLegalFunctionName=name=>{if(undefined===name){return\"_unknown\"}name=name.replace(/[^a-zA-Z0-9_]/g,\"$\");var f=name.charCodeAt(0);if(f>=char_0&&f<=char_9){return`_${name}`}return name};function RegisteredClass(name,constructor,instancePrototype,rawDestructor,baseClass,getActualType,upcast,downcast){this.name=name;this.constructor=constructor;this.instancePrototype=instancePrototype;this.rawDestructor=rawDestructor;this.baseClass=baseClass;this.getActualType=getActualType;this.upcast=upcast;this.downcast=downcast;this.pureVirtualFunctions=[]}var upcastPointer=(ptr,ptrClass,desiredClass)=>{while(ptrClass!==desiredClass){if(!ptrClass.upcast){throwBindingError(`Expected null or instance of ${desiredClass.name}, got an instance of ${ptrClass.name}`)}ptr=ptrClass.upcast(ptr);ptrClass=ptrClass.baseClass}return ptr};function constNoSmartPtrRawPointerToWireType(destructors,handle){if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}return 0}if(!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;var ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);return ptr}function genericPointerToWireType(destructors,handle){var ptr;if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}if(this.isSmartPointer){ptr=this.rawConstructor();if(destructors!==null){destructors.push(this.rawDestructor,ptr)}return ptr}else{return 0}}if(!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}if(!this.isConst&&handle.$$.ptrType.isConst){throwBindingError(`Cannot convert argument of type ${handle.$$.smartPtrType?handle.$$.smartPtrType.name:handle.$$.ptrType.name} to parameter type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);if(this.isSmartPointer){if(undefined===handle.$$.smartPtr){throwBindingError(\"Passing raw pointer to smart pointer is illegal\")}switch(this.sharingPolicy){case 0:if(handle.$$.smartPtrType===this){ptr=handle.$$.smartPtr}else{throwBindingError(`Cannot convert argument of type ${handle.$$.smartPtrType?handle.$$.smartPtrType.name:handle.$$.ptrType.name} to parameter type ${this.name}`)}break;case 1:ptr=handle.$$.smartPtr;break;case 2:if(handle.$$.smartPtrType===this){ptr=handle.$$.smartPtr}else{var clonedHandle=handle[\"clone\"]();ptr=this.rawShare(ptr,Emval.toHandle(()=>clonedHandle[\"delete\"]()));if(destructors!==null){destructors.push(this.rawDestructor,ptr)}}break;default:throwBindingError(\"Unsupporting sharing policy\")}}return ptr}function nonConstNoSmartPtrRawPointerToWireType(destructors,handle){if(handle===null){if(this.isReference){throwBindingError(`null is not a valid ${this.name}`)}return 0}if(!handle.$$){throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`)}if(!handle.$$.ptr){throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`)}if(handle.$$.ptrType.isConst){throwBindingError(`Cannot convert argument of type ${handle.$$.ptrType.name} to parameter type ${this.name}`)}var handleClass=handle.$$.ptrType.registeredClass;var ptr=upcastPointer(handle.$$.ptr,handleClass,this.registeredClass);return ptr}function readPointer(pointer){return this[\"fromWireType\"](HEAPU32[pointer>>>2>>>0])}var init_RegisteredPointer=()=>{Object.assign(RegisteredPointer.prototype,{getPointee(ptr){if(this.rawGetPointee){ptr=this.rawGetPointee(ptr)}return ptr},destructor(ptr){if(this.rawDestructor){this.rawDestructor(ptr)}},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":readPointer,\"deleteObject\"(handle){if(handle!==null){handle[\"delete\"]()}},\"fromWireType\":RegisteredPointer_fromWireType})};function RegisteredPointer(name,registeredClass,isReference,isConst,isSmartPointer,pointeeType,sharingPolicy,rawGetPointee,rawConstructor,rawShare,rawDestructor){this.name=name;this.registeredClass=registeredClass;this.isReference=isReference;this.isConst=isConst;this.isSmartPointer=isSmartPointer;this.pointeeType=pointeeType;this.sharingPolicy=sharingPolicy;this.rawGetPointee=rawGetPointee;this.rawConstructor=rawConstructor;this.rawShare=rawShare;this.rawDestructor=rawDestructor;if(!isSmartPointer&&registeredClass.baseClass===undefined){if(isConst){this[\"toWireType\"]=constNoSmartPtrRawPointerToWireType;this.destructorFunction=null}else{this[\"toWireType\"]=nonConstNoSmartPtrRawPointerToWireType;this.destructorFunction=null}}else{this[\"toWireType\"]=genericPointerToWireType}}var replacePublicSymbol=(name,value,numArguments)=>{if(!Module.hasOwnProperty(name)){throwInternalError(\"Replacing nonexistant public symbol\")}if(undefined!==Module[name].overloadTable&&undefined!==numArguments){Module[name].overloadTable[numArguments]=value}else{Module[name]=value;Module[name].argCount=numArguments}};var wasmTableMirror=[];var wasmTable;var getWasmTableEntry=funcPtr=>{var func=wasmTableMirror[funcPtr];if(!func){if(funcPtr>=wasmTableMirror.length)wasmTableMirror.length=funcPtr+1;wasmTableMirror[funcPtr]=func=wasmTable.get(funcPtr)}return func};var embind__requireFunction=(signature,rawFunction)=>{signature=readLatin1String(signature);function makeDynCaller(){return getWasmTableEntry(rawFunction)}var fp=makeDynCaller();if(typeof fp!=\"function\"){throwBindingError(`unknown function pointer with signature ${signature}: ${rawFunction}`)}return fp};var extendError=(baseErrorType,errorName)=>{var errorClass=createNamedFunction(errorName,function(message){this.name=errorName;this.message=message;var stack=new Error(message).stack;if(stack!==undefined){this.stack=this.toString()+\"\\n\"+stack.replace(/^Error(:[^\\n]*)?\\n/,\"\")}});errorClass.prototype=Object.create(baseErrorType.prototype);errorClass.prototype.constructor=errorClass;errorClass.prototype.toString=function(){if(this.message===undefined){return this.name}else{return`${this.name}: ${this.message}`}};return errorClass};var UnboundTypeError;var getTypeName=type=>{var ptr=___getTypeName(type);var rv=readLatin1String(ptr);_free(ptr);return rv};var throwUnboundTypeError=(message,types)=>{var unboundTypes=[];var seen={};function visit(type){if(seen[type]){return}if(registeredTypes[type]){return}if(typeDependencies[type]){typeDependencies[type].forEach(visit);return}unboundTypes.push(type);seen[type]=true}types.forEach(visit);throw new UnboundTypeError(`${message}: `+unboundTypes.map(getTypeName).join([\", \"]))};function __embind_register_class(rawType,rawPointerType,rawConstPointerType,baseClassRawType,getActualTypeSignature,getActualType,upcastSignature,upcast,downcastSignature,downcast,name,destructorSignature,rawDestructor){rawType>>>=0;rawPointerType>>>=0;rawConstPointerType>>>=0;baseClassRawType>>>=0;getActualTypeSignature>>>=0;getActualType>>>=0;upcastSignature>>>=0;upcast>>>=0;downcastSignature>>>=0;downcast>>>=0;name>>>=0;destructorSignature>>>=0;rawDestructor>>>=0;name=readLatin1String(name);getActualType=embind__requireFunction(getActualTypeSignature,getActualType);if(upcast){upcast=embind__requireFunction(upcastSignature,upcast)}if(downcast){downcast=embind__requireFunction(downcastSignature,downcast)}rawDestructor=embind__requireFunction(destructorSignature,rawDestructor);var legalFunctionName=makeLegalFunctionName(name);exposePublicSymbol(legalFunctionName,function(){throwUnboundTypeError(`Cannot construct ${name} due to unbound types`,[baseClassRawType])});whenDependentTypesAreResolved([rawType,rawPointerType,rawConstPointerType],baseClassRawType?[baseClassRawType]:[],function(base){base=base[0];var baseClass;var basePrototype;if(baseClassRawType){baseClass=base.registeredClass;basePrototype=baseClass.instancePrototype}else{basePrototype=ClassHandle.prototype}var constructor=createNamedFunction(name,function(){if(Object.getPrototypeOf(this)!==instancePrototype){throw new BindingError(\"Use 'new' to construct \"+name)}if(undefined===registeredClass.constructor_body){throw new BindingError(name+\" has no accessible constructor\")}var body=registeredClass.constructor_body[arguments.length];if(undefined===body){throw new BindingError(`Tried to invoke ctor of ${name} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(registeredClass.constructor_body).toString()}) parameters instead!`)}return body.apply(this,arguments)});var instancePrototype=Object.create(basePrototype,{constructor:{value:constructor}});constructor.prototype=instancePrototype;var registeredClass=new RegisteredClass(name,constructor,instancePrototype,rawDestructor,baseClass,getActualType,upcast,downcast);if(registeredClass.baseClass){if(registeredClass.baseClass.__derivedClasses===undefined){registeredClass.baseClass.__derivedClasses=[]}registeredClass.baseClass.__derivedClasses.push(registeredClass)}var referenceConverter=new RegisteredPointer(name,registeredClass,true,false,false);var pointerConverter=new RegisteredPointer(name+\"*\",registeredClass,false,false,false);var constPointerConverter=new RegisteredPointer(name+\" const*\",registeredClass,false,true,false);registeredPointers[rawType]={pointerType:pointerConverter,constPointerType:constPointerConverter};replacePublicSymbol(legalFunctionName,constructor);return[referenceConverter,pointerConverter,constPointerConverter]})}var heap32VectorToArray=(count,firstElement)=>{var array=[];for(var i=0;i<count;i++){array.push(HEAPU32[firstElement+i*4>>>2>>>0])}return array};function newFunc(constructor,argumentList){if(!(constructor instanceof Function)){throw new TypeError(`new_ called with constructor type ${typeof constructor} which is not a function`)}var dummy=createNamedFunction(constructor.name||\"unknownFunctionName\",function(){});dummy.prototype=constructor.prototype;var obj=new dummy;var r=constructor.apply(obj,argumentList);return r instanceof Object?r:obj}function craftInvokerFunction(humanName,argTypes,classType,cppInvokerFunc,cppTargetFunc,isAsync){var argCount=argTypes.length;if(argCount<2){throwBindingError(\"argTypes array size mismatch! Must at least get return value and 'this' types!\")}var isClassMethodFunc=argTypes[1]!==null&&classType!==null;var needsDestructorStack=false;for(var i=1;i<argTypes.length;++i){if(argTypes[i]!==null&&argTypes[i].destructorFunction===undefined){needsDestructorStack=true;break}}var returns=argTypes[0].name!==\"void\";var argsList=\"\";var argsListWired=\"\";for(var i=0;i<argCount-2;++i){argsList+=(i!==0?\", \":\"\")+\"arg\"+i;argsListWired+=(i!==0?\", \":\"\")+\"arg\"+i+\"Wired\"}var invokerFnBody=`\\n        return function (${argsList}) {\\n        if (arguments.length !== ${argCount-2}) {\\n          throwBindingError('function ${humanName} called with ' + arguments.length + ' arguments, expected ${argCount-2}');\\n        }`;if(needsDestructorStack){invokerFnBody+=\"var destructors = [];\\n\"}var dtorStack=needsDestructorStack?\"destructors\":\"null\";var args1=[\"throwBindingError\",\"invoker\",\"fn\",\"runDestructors\",\"retType\",\"classParam\"];var args2=[throwBindingError,cppInvokerFunc,cppTargetFunc,runDestructors,argTypes[0],argTypes[1]];if(isClassMethodFunc){invokerFnBody+=\"var thisWired = classParam.toWireType(\"+dtorStack+\", this);\\n\"}for(var i=0;i<argCount-2;++i){invokerFnBody+=\"var arg\"+i+\"Wired = argType\"+i+\".toWireType(\"+dtorStack+\", arg\"+i+\"); // \"+argTypes[i+2].name+\"\\n\";args1.push(\"argType\"+i);args2.push(argTypes[i+2])}if(isClassMethodFunc){argsListWired=\"thisWired\"+(argsListWired.length>0?\", \":\"\")+argsListWired}invokerFnBody+=(returns||isAsync?\"var rv = \":\"\")+\"invoker(fn\"+(argsListWired.length>0?\", \":\"\")+argsListWired+\");\\n\";if(needsDestructorStack){invokerFnBody+=\"runDestructors(destructors);\\n\"}else{for(var i=isClassMethodFunc?1:2;i<argTypes.length;++i){var paramName=i===1?\"thisWired\":\"arg\"+(i-2)+\"Wired\";if(argTypes[i].destructorFunction!==null){invokerFnBody+=paramName+\"_dtor(\"+paramName+\"); // \"+argTypes[i].name+\"\\n\";args1.push(paramName+\"_dtor\");args2.push(argTypes[i].destructorFunction)}}}if(returns){invokerFnBody+=\"var ret = retType.fromWireType(rv);\\n\"+\"return ret;\\n\"}else{}invokerFnBody+=\"}\\n\";args1.push(invokerFnBody);var invokerFn=newFunc(Function,args1).apply(null,args2);return createNamedFunction(humanName,invokerFn)}function __embind_register_class_constructor(rawClassType,argCount,rawArgTypesAddr,invokerSignature,invoker,rawConstructor){rawClassType>>>=0;rawArgTypesAddr>>>=0;invokerSignature>>>=0;invoker>>>=0;rawConstructor>>>=0;var rawArgTypes=heap32VectorToArray(argCount,rawArgTypesAddr);invoker=embind__requireFunction(invokerSignature,invoker);whenDependentTypesAreResolved([],[rawClassType],function(classType){classType=classType[0];var humanName=`constructor ${classType.name}`;if(undefined===classType.registeredClass.constructor_body){classType.registeredClass.constructor_body=[]}if(undefined!==classType.registeredClass.constructor_body[argCount-1]){throw new BindingError(`Cannot register multiple constructors with identical number of parameters (${argCount-1}) for class '${classType.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`)}classType.registeredClass.constructor_body[argCount-1]=()=>{throwUnboundTypeError(`Cannot construct ${classType.name} due to unbound types`,rawArgTypes)};whenDependentTypesAreResolved([],rawArgTypes,argTypes=>{argTypes.splice(1,0,null);classType.registeredClass.constructor_body[argCount-1]=craftInvokerFunction(humanName,argTypes,null,invoker,rawConstructor);return[]});return[]})}var getFunctionName=signature=>{signature=signature.trim();const argsIndex=signature.indexOf(\"(\");if(argsIndex!==-1){return signature.substr(0,argsIndex)}else{return signature}};function __embind_register_class_function(rawClassType,methodName,argCount,rawArgTypesAddr,invokerSignature,rawInvoker,context,isPureVirtual,isAsync){rawClassType>>>=0;methodName>>>=0;rawArgTypesAddr>>>=0;invokerSignature>>>=0;rawInvoker>>>=0;context>>>=0;var rawArgTypes=heap32VectorToArray(argCount,rawArgTypesAddr);methodName=readLatin1String(methodName);methodName=getFunctionName(methodName);rawInvoker=embind__requireFunction(invokerSignature,rawInvoker);whenDependentTypesAreResolved([],[rawClassType],function(classType){classType=classType[0];var humanName=`${classType.name}.${methodName}`;if(methodName.startsWith(\"@@\")){methodName=Symbol[methodName.substring(2)]}if(isPureVirtual){classType.registeredClass.pureVirtualFunctions.push(methodName)}function unboundTypesHandler(){throwUnboundTypeError(`Cannot call ${humanName} due to unbound types`,rawArgTypes)}var proto=classType.registeredClass.instancePrototype;var method=proto[methodName];if(undefined===method||undefined===method.overloadTable&&method.className!==classType.name&&method.argCount===argCount-2){unboundTypesHandler.argCount=argCount-2;unboundTypesHandler.className=classType.name;proto[methodName]=unboundTypesHandler}else{ensureOverloadTable(proto,methodName,humanName);proto[methodName].overloadTable[argCount-2]=unboundTypesHandler}whenDependentTypesAreResolved([],rawArgTypes,function(argTypes){var memberFunction=craftInvokerFunction(humanName,argTypes,classType,rawInvoker,context,isAsync);if(undefined===proto[methodName].overloadTable){memberFunction.argCount=argCount-2;proto[methodName]=memberFunction}else{proto[methodName].overloadTable[argCount-2]=memberFunction}return[]});return[]})}function handleAllocatorInit(){Object.assign(HandleAllocator.prototype,{get(id){return this.allocated[id]},has(id){return this.allocated[id]!==undefined},allocate(handle){var id=this.freelist.pop()||this.allocated.length;this.allocated[id]=handle;return id},free(id){this.allocated[id]=undefined;this.freelist.push(id)}})}function HandleAllocator(){this.allocated=[undefined];this.freelist=[]}var emval_handles=new HandleAllocator;function __emval_decref(handle){handle>>>=0;if(handle>=emval_handles.reserved&&0===--emval_handles.get(handle).refcount){emval_handles.free(handle)}}var count_emval_handles=()=>{var count=0;for(var i=emval_handles.reserved;i<emval_handles.allocated.length;++i){if(emval_handles.allocated[i]!==undefined){++count}}return count};var init_emval=()=>{emval_handles.allocated.push({value:undefined},{value:null},{value:true},{value:false});emval_handles.reserved=emval_handles.allocated.length;Module[\"count_emval_handles\"]=count_emval_handles};var Emval={toValue:handle=>{if(!handle){throwBindingError(\"Cannot use deleted val. handle = \"+handle)}return emval_handles.get(handle).value},toHandle:value=>{switch(value){case undefined:return 1;case null:return 2;case true:return 3;case false:return 4;default:{return emval_handles.allocate({refcount:1,value:value})}}}};var __embind_register_emval=function(rawType,name){rawType>>>=0;name>>>=0;name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":handle=>{var rv=Emval.toValue(handle);__emval_decref(handle);return rv},\"toWireType\":(destructors,value)=>Emval.toHandle(value),\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":simpleReadValueFromPointer,destructorFunction:null})};var enumReadValueFromPointer=(name,width,signed)=>{switch(width){case 1:return signed?function(pointer){return this[\"fromWireType\"](HEAP8[pointer>>>0>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU8[pointer>>>0>>>0])};case 2:return signed?function(pointer){return this[\"fromWireType\"](HEAP16[pointer>>>1>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU16[pointer>>>1>>>0])};case 4:return signed?function(pointer){return this[\"fromWireType\"](HEAP32[pointer>>>2>>>0])}:function(pointer){return this[\"fromWireType\"](HEAPU32[pointer>>>2>>>0])};default:throw new TypeError(`invalid integer width (${width}): ${name}`)}};function __embind_register_enum(rawType,name,size,isSigned){rawType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);function ctor(){}ctor.values={};registerType(rawType,{name:name,constructor:ctor,\"fromWireType\":function(c){return this.constructor.values[c]},\"toWireType\":(destructors,c)=>c.value,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":enumReadValueFromPointer(name,size,isSigned),destructorFunction:null});exposePublicSymbol(name,ctor)}var requireRegisteredType=(rawType,humanName)=>{var impl=registeredTypes[rawType];if(undefined===impl){throwBindingError(humanName+\" has unknown type \"+getTypeName(rawType))}return impl};function __embind_register_enum_value(rawEnumType,name,enumValue){rawEnumType>>>=0;name>>>=0;enumValue>>>=0;var enumType=requireRegisteredType(rawEnumType,\"enum\");name=readLatin1String(name);var Enum=enumType.constructor;var Value=Object.create(enumType.constructor.prototype,{value:{value:enumValue},constructor:{value:createNamedFunction(`${enumType.name}_${name}`,function(){})}});Enum.values[enumValue]=Value;Enum[name]=Value}var floatReadValueFromPointer=(name,width)=>{switch(width){case 4:return function(pointer){return this[\"fromWireType\"](HEAPF32[pointer>>>2>>>0])};case 8:return function(pointer){return this[\"fromWireType\"](HEAPF64[pointer>>>3>>>0])};default:throw new TypeError(`invalid float width (${width}): ${name}`)}};var __embind_register_float=function(rawType,name,size){rawType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":value=>value,\"toWireType\":(destructors,value)=>value,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":floatReadValueFromPointer(name,size),destructorFunction:null})};function __embind_register_function(name,argCount,rawArgTypesAddr,signature,rawInvoker,fn,isAsync){name>>>=0;rawArgTypesAddr>>>=0;signature>>>=0;rawInvoker>>>=0;fn>>>=0;var argTypes=heap32VectorToArray(argCount,rawArgTypesAddr);name=readLatin1String(name);name=getFunctionName(name);rawInvoker=embind__requireFunction(signature,rawInvoker);exposePublicSymbol(name,function(){throwUnboundTypeError(`Cannot call ${name} due to unbound types`,argTypes)},argCount-1);whenDependentTypesAreResolved([],argTypes,function(argTypes){var invokerArgsArray=[argTypes[0],null].concat(argTypes.slice(1));replacePublicSymbol(name,craftInvokerFunction(name,invokerArgsArray,null,rawInvoker,fn,isAsync),argCount-1);return[]})}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){primitiveType>>>=0;name>>>=0;size>>>=0;name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295}var fromWireType=value=>value;if(minRange===0){var bitshift=32-8*size;fromWireType=value=>value<<bitshift>>>bitshift}var isUnsignedType=name.includes(\"unsigned\");var checkAssertions=(value,toTypeName)=>{};var toWireType;if(isUnsignedType){toWireType=function(destructors,value){checkAssertions(value,this.name);return value>>>0}}else{toWireType=function(destructors,value){checkAssertions(value,this.name);return value}}registerType(primitiveType,{name:name,\"fromWireType\":fromWireType,\"toWireType\":toWireType,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":integerReadValueFromPointer(name,size,minRange!==0),destructorFunction:null})}function __embind_register_memory_view(rawType,dataTypeIndex,name){rawType>>>=0;name>>>=0;var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){var size=HEAPU32[handle>>>2>>>0];var data=HEAPU32[handle+4>>>2>>>0];return new TA(HEAP8.buffer,data,size)}name=readLatin1String(name);registerType(rawType,{name:name,\"fromWireType\":decodeMemoryView,\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":decodeMemoryView},{ignoreDuplicateRegistrations:true})}function __embind_register_smart_ptr(rawType,rawPointeeType,name,sharingPolicy,getPointeeSignature,rawGetPointee,constructorSignature,rawConstructor,shareSignature,rawShare,destructorSignature,rawDestructor){rawType>>>=0;rawPointeeType>>>=0;name>>>=0;getPointeeSignature>>>=0;rawGetPointee>>>=0;constructorSignature>>>=0;rawConstructor>>>=0;shareSignature>>>=0;rawShare>>>=0;destructorSignature>>>=0;rawDestructor>>>=0;name=readLatin1String(name);rawGetPointee=embind__requireFunction(getPointeeSignature,rawGetPointee);rawConstructor=embind__requireFunction(constructorSignature,rawConstructor);rawShare=embind__requireFunction(shareSignature,rawShare);rawDestructor=embind__requireFunction(destructorSignature,rawDestructor);whenDependentTypesAreResolved([rawType],[rawPointeeType],function(pointeeType){pointeeType=pointeeType[0];var registeredPointer=new RegisteredPointer(name,pointeeType.registeredClass,false,false,true,pointeeType,sharingPolicy,rawGetPointee,rawConstructor,rawShare,rawDestructor);return[registeredPointer]})}var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};function __embind_register_std_string(rawType,name){rawType>>>=0;name>>>=0;name=readLatin1String(name);var stdStringIsUTF8=name===\"std::string\";registerType(rawType,{name:name,\"fromWireType\"(value){var length=HEAPU32[value>>>2>>>0];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr>>>0]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+1}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i>>>0])}str=a.join(\"\")}_free(value);return str},\"toWireType\"(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value)}var length;var valueIsOfTypeString=typeof value==\"string\";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError(\"Cannot pass non-string to std::string\")}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value)}else{length=value.length}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>>2>>>0]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1)}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError(\"String has UTF-16 code units that do not fit in 8 bits\")}HEAPU8[ptr+i>>>0]=charCode}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i>>>0]=value[i]}}}if(destructors!==null){destructors.push(_free,base)}return base},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":readPointer,destructorFunction(ptr){_free(ptr)}})}var UTF16Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf-16le\"):undefined;var UTF16ToString=(ptr,maxBytesToRead)=>{var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx>>>0])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr>>>0,endPtr>>>0));var str=\"\";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>>1>>>0];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit)}return str};var stringToUTF16=(str,outPtr,maxBytesToWrite)=>{if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>>1>>>0]=codeUnit;outPtr+=2}HEAP16[outPtr>>>1>>>0]=0;return outPtr-startPtr};var lengthBytesUTF16=str=>str.length*2;var UTF32ToString=(ptr,maxBytesToRead)=>{var i=0;var str=\"\";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>>2>>>0];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=String.fromCharCode(utf32)}}return str};var stringToUTF32=(str,outPtr,maxBytesToWrite)=>{outPtr>>>=0;if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023}HEAP32[outPtr>>>2>>>0]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break}HEAP32[outPtr>>>2>>>0]=0;return outPtr-startPtr};var lengthBytesUTF32=str=>{var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4}return len};var __embind_register_std_wstring=function(rawType,charSize,name){rawType>>>=0;charSize>>>=0;name>>>=0;name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=()=>HEAPU16;shift=1}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=()=>HEAPU32;shift=2}registerType(rawType,{name:name,\"fromWireType\":value=>{var length=HEAPU32[value>>>2>>>0];var HEAP=getHeap();var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||HEAP[currentBytePtr>>>shift]==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment}else{str+=String.fromCharCode(0);str+=stringSegment}decodeStartPtr=currentBytePtr+charSize}}_free(value);return str},\"toWireType\":(destructors,value)=>{if(!(typeof value==\"string\")){throwBindingError(`Cannot pass non-string to C++ string type ${name}`)}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr)}return ptr},\"argPackAdvance\":GenericWireTypeSize,\"readValueFromPointer\":simpleReadValueFromPointer,destructorFunction(ptr){_free(ptr)}})};function __embind_register_value_object(rawType,name,constructorSignature,rawConstructor,destructorSignature,rawDestructor){rawType>>>=0;name>>>=0;constructorSignature>>>=0;rawConstructor>>>=0;destructorSignature>>>=0;rawDestructor>>>=0;structRegistrations[rawType]={name:readLatin1String(name),rawConstructor:embind__requireFunction(constructorSignature,rawConstructor),rawDestructor:embind__requireFunction(destructorSignature,rawDestructor),fields:[]}}function __embind_register_value_object_field(structType,fieldName,getterReturnType,getterSignature,getter,getterContext,setterArgumentType,setterSignature,setter,setterContext){structType>>>=0;fieldName>>>=0;getterReturnType>>>=0;getterSignature>>>=0;getter>>>=0;getterContext>>>=0;setterArgumentType>>>=0;setterSignature>>>=0;setter>>>=0;setterContext>>>=0;structRegistrations[structType].fields.push({fieldName:readLatin1String(fieldName),getterReturnType:getterReturnType,getter:embind__requireFunction(getterSignature,getter),getterContext:getterContext,setterArgumentType:setterArgumentType,setter:embind__requireFunction(setterSignature,setter),setterContext:setterContext})}var __embind_register_void=function(rawType,name){rawType>>>=0;name>>>=0;name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,\"argPackAdvance\":0,\"fromWireType\":()=>undefined,\"toWireType\":(destructors,o)=>undefined})};var emval_returnValue=(returnType,destructorsRef,handle)=>{var destructors=[];var result=returnType[\"toWireType\"](destructors,handle);if(destructors.length){HEAPU32[destructorsRef>>>2>>>0]=Emval.toHandle(destructors)}return result};function __emval_as(handle,returnType,destructorsRef){handle>>>=0;returnType>>>=0;destructorsRef>>>=0;handle=Emval.toValue(handle);returnType=requireRegisteredType(returnType,\"emval::as\");return emval_returnValue(returnType,destructorsRef,handle)}var emval_methodCallers=[];function __emval_call(caller,handle,destructorsRef,args){caller>>>=0;handle>>>=0;destructorsRef>>>=0;args>>>=0;caller=emval_methodCallers[caller];handle=Emval.toValue(handle);return caller(null,handle,destructorsRef,args)}var emval_symbols={};var getStringOrSymbol=address=>{var symbol=emval_symbols[address];if(symbol===undefined){return readLatin1String(address)}return symbol};function __emval_call_method(caller,objHandle,methodName,destructorsRef,args){caller>>>=0;objHandle>>>=0;methodName>>>=0;destructorsRef>>>=0;args>>>=0;caller=emval_methodCallers[caller];objHandle=Emval.toValue(objHandle);methodName=getStringOrSymbol(methodName);return caller(objHandle,objHandle[methodName],destructorsRef,args)}var emval_get_global=()=>{if(typeof globalThis==\"object\"){return globalThis}return function(){return Function}()(\"return this\")()};function __emval_get_global(name){name>>>=0;if(name===0){return Emval.toHandle(emval_get_global())}else{name=getStringOrSymbol(name);return Emval.toHandle(emval_get_global()[name])}}var emval_addMethodCaller=caller=>{var id=emval_methodCallers.length;emval_methodCallers.push(caller);return id};var emval_lookupTypes=(argCount,argTypes)=>{var a=new Array(argCount);for(var i=0;i<argCount;++i){a[i]=requireRegisteredType(HEAPU32[argTypes+i*4>>>2>>>0],\"parameter \"+i)}return a};var reflectConstruct=Reflect.construct;function __emval_get_method_caller(argCount,argTypes,kind){argTypes>>>=0;var types=emval_lookupTypes(argCount,argTypes);var retType=types.shift();argCount--;var functionBody=`return function (obj, func, destructorsRef, args) {\\n`;var offset=0;var argsList=[];if(kind===0){argsList.push(\"obj\")}var params=[\"retType\"];var args=[retType];for(var i=0;i<argCount;++i){argsList.push(\"arg\"+i);params.push(\"argType\"+i);args.push(types[i]);functionBody+=`  var arg${i} = argType${i}.readValueFromPointer(args${offset?\"+\"+offset:\"\"});\\n`;offset+=types[i][\"argPackAdvance\"]}var invoker=kind===1?\"new func\":\"func.call\";functionBody+=`  var rv = ${invoker}(${argsList.join(\", \")});\\n`;for(var i=0;i<argCount;++i){if(types[i][\"deleteObject\"]){functionBody+=`  argType${i}.deleteObject(arg${i});\\n`}}if(!retType.isVoid){params.push(\"emval_returnValue\");args.push(emval_returnValue);functionBody+=\"  return emval_returnValue(retType, destructorsRef, rv);\\n\"}functionBody+=\"};\\n\";params.push(functionBody);var invokerFunction=newFunc(Function,params).apply(null,args);var functionName=`methodCaller<(${types.map(t=>t.name).join(\", \")}) => ${retType.name}>`;return emval_addMethodCaller(createNamedFunction(functionName,invokerFunction))}function __emval_get_module_property(name){name>>>=0;name=getStringOrSymbol(name);return Emval.toHandle(Module[name])}function __emval_get_property(handle,key){handle>>>=0;key>>>=0;handle=Emval.toValue(handle);key=Emval.toValue(key);return Emval.toHandle(handle[key])}function __emval_incref(handle){handle>>>=0;if(handle>4){emval_handles.get(handle).refcount+=1}}function __emval_instanceof(object,constructor){object>>>=0;constructor>>>=0;object=Emval.toValue(object);constructor=Emval.toValue(constructor);return object instanceof constructor}function __emval_new_array(){return Emval.toHandle([])}function __emval_new_cstring(v){v>>>=0;return Emval.toHandle(getStringOrSymbol(v))}function __emval_new_object(){return Emval.toHandle({})}function __emval_run_destructors(handle){handle>>>=0;var destructors=Emval.toValue(handle);runDestructors(destructors);__emval_decref(handle)}function __emval_set_property(handle,key,value){handle>>>=0;key>>>=0;value>>>=0;handle=Emval.toValue(handle);key=Emval.toValue(key);value=Emval.toValue(value);handle[key]=value}function __emval_take_value(type,arg){type>>>=0;arg>>>=0;type=requireRegisteredType(type,\"_emval_take_value\");var v=type[\"readValueFromPointer\"](arg);return Emval.toHandle(v)}function __emval_typeof(handle){handle>>>=0;handle=Emval.toValue(handle);return Emval.toHandle(typeof handle)}var _emscripten_get_now;_emscripten_get_now=()=>performance.now();var nowIsMonotonic=true;var checkWasiClock=clock_id=>clock_id==0||clock_id==1||clock_id==2||clock_id==3;function _clock_time_get(clk_id,ignored_precision,ptime){ignored_precision=bigintToI53Checked(ignored_precision);ptime>>>=0;if(!checkWasiClock(clk_id)){return 28}var now;if(clk_id===0){now=Date.now()}else if(nowIsMonotonic){now=_emscripten_get_now()}else{return 52}var nsec=Math.round(now*1e3*1e3);HEAP32[ptime>>>2>>>0]=nsec>>>0;HEAP32[ptime+4>>>2>>>0]=nsec/Math.pow(2,32)>>>0;return 0}var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=HEAPU8[sigPtr++>>>0]){var wide=ch!=105;wide&=ch!=112;buf+=wide&&buf%8?4:0;readEmAsmArgsArray.push(ch==112?HEAPU32[buf>>>2>>>0]:ch==106?HEAP64[buf>>>3]:ch==105?HEAP32[buf>>>2>>>0]:HEAPF64[buf>>>3>>>0]);buf+=wide?8:4}return readEmAsmArgsArray};var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code].apply(null,args)};function _emscripten_asm_const_int(code,sigPtr,argbuf){code>>>=0;sigPtr>>>=0;argbuf>>>=0;return runEmAsmFunction(code,sigPtr,argbuf)}function _emscripten_notify_memory_growth(memoryIndex){memoryIndex>>>=0;updateMemoryViews()}var ENV={};var getExecutableName=()=>thisProgram||\"./this.program\";var getEnvStrings=()=>{if(!getEnvStrings.strings){var lang=(typeof navigator==\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={\"USER\":\"web_user\",\"LOGNAME\":\"web_user\",\"PATH\":\"/\",\"PWD\":\"/\",\"HOME\":\"/home/web_user\",\"LANG\":lang,\"_\":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(`${x}=${env[x]}`)}getEnvStrings.strings=strings}return getEnvStrings.strings};var stringToAscii=(str,buffer)=>{for(var i=0;i<str.length;++i){HEAP8[buffer++>>>0>>>0]=str.charCodeAt(i)}HEAP8[buffer>>>0>>>0]=0};var _environ_get=function(__environ,environ_buf){__environ>>>=0;environ_buf>>>=0;var bufSize=0;getEnvStrings().forEach((string,i)=>{var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>>2>>>0]=ptr;stringToAscii(string,ptr);bufSize+=string.length+1});return 0};var _environ_sizes_get=function(penviron_count,penviron_buf_size){penviron_count>>>=0;penviron_buf_size>>>=0;var strings=getEnvStrings();HEAPU32[penviron_count>>>2>>>0]=strings.length;var bufSize=0;strings.forEach(string=>bufSize+=string.length+1);HEAPU32[penviron_buf_size>>>2>>>0]=bufSize;return 0};var _fd_close=fd=>52;function _fd_read(fd,iov,iovcnt,pnum){iov>>>=0;iovcnt>>>=0;pnum>>>=0;return 52}function _fd_seek(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);newOffset>>>=0;return 70}var printCharBuffers=[null,[],[]];var printChar=(stream,curr)=>{var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}};function _fd_write(fd,iov,iovcnt,pnum){iov>>>=0;iovcnt>>>=0;pnum>>>=0;var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>>2>>>0];var len=HEAPU32[iov+4>>>2>>>0];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j>>>0])}num+=len}HEAPU32[pnum>>>2>>>0]=num;return 0}var runtimeKeepaliveCounter=0;var keepRuntimeAlive=()=>noExitRuntime||runtimeKeepaliveCounter>0;var _proc_exit=code=>{EXITSTATUS=code;if(!keepRuntimeAlive()){if(Module[\"onExit\"])Module[\"onExit\"](code);ABORT=true}quit_(code,new ExitStatus(code))};var isLeapYear=year=>year%4===0&&(year%100!==0||year%400===0);var arraySum=(array,index)=>{var sum=0;for(var i=0;i<=index;sum+=array[i++]){}return sum};var MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31];var MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];var addDays=(date,days)=>{var newDate=new Date(date.getTime());while(days>0){var leap=isLeapYear(newDate.getFullYear());var currentMonth=newDate.getMonth();var daysInCurrentMonth=(leap?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR)[currentMonth];if(days>daysInCurrentMonth-newDate.getDate()){days-=daysInCurrentMonth-newDate.getDate()+1;newDate.setDate(1);if(currentMonth<11){newDate.setMonth(currentMonth+1)}else{newDate.setMonth(0);newDate.setFullYear(newDate.getFullYear()+1)}}else{newDate.setDate(newDate.getDate()+days);return newDate}}return newDate};var jstoi_q=str=>parseInt(str);function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}function _strptime(buf,format,tm){buf>>>=0;format>>>=0;tm>>>=0;var pattern=UTF8ToString(format);var SPECIAL_CHARS=\"\\\\!@#$^&*()+=-[]/{}|:<>?,.\";for(var i=0,ii=SPECIAL_CHARS.length;i<ii;++i){pattern=pattern.replace(new RegExp(\"\\\\\"+SPECIAL_CHARS[i],\"g\"),\"\\\\\"+SPECIAL_CHARS[i])}var EQUIVALENT_MATCHERS={\"%A\":\"%a\",\"%B\":\"%b\",\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m\\\\/%d\\\\/%y\",\"%e\":\"%d\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%R\":\"%H\\\\:%M\",\"%r\":\"%I\\\\:%M\\\\:%S\\\\s%p\",\"%T\":\"%H\\\\:%M\\\\:%S\",\"%x\":\"%m\\\\/%d\\\\/(?:%y|%Y)\",\"%X\":\"%H\\\\:%M\\\\:%S\"};for(var matcher in EQUIVALENT_MATCHERS){pattern=pattern.replace(matcher,EQUIVALENT_MATCHERS[matcher])}var DATE_PATTERNS={\"%a\":\"(?:Sun(?:day)?)|(?:Mon(?:day)?)|(?:Tue(?:sday)?)|(?:Wed(?:nesday)?)|(?:Thu(?:rsday)?)|(?:Fri(?:day)?)|(?:Sat(?:urday)?)\",\"%b\":\"(?:Jan(?:uary)?)|(?:Feb(?:ruary)?)|(?:Mar(?:ch)?)|(?:Apr(?:il)?)|May|(?:Jun(?:e)?)|(?:Jul(?:y)?)|(?:Aug(?:ust)?)|(?:Sep(?:tember)?)|(?:Oct(?:ober)?)|(?:Nov(?:ember)?)|(?:Dec(?:ember)?)\",\"%C\":\"\\\\d\\\\d\",\"%d\":\"0[1-9]|[1-9](?!\\\\d)|1\\\\d|2\\\\d|30|31\",\"%H\":\"\\\\d(?!\\\\d)|[0,1]\\\\d|20|21|22|23\",\"%I\":\"\\\\d(?!\\\\d)|0\\\\d|10|11|12\",\"%j\":\"00[1-9]|0?[1-9](?!\\\\d)|0?[1-9]\\\\d(?!\\\\d)|[1,2]\\\\d\\\\d|3[0-6]\\\\d\",\"%m\":\"0[1-9]|[1-9](?!\\\\d)|10|11|12\",\"%M\":\"0\\\\d|\\\\d(?!\\\\d)|[1-5]\\\\d\",\"%n\":\"\\\\s\",\"%p\":\"AM|am|PM|pm|A\\\\.M\\\\.|a\\\\.m\\\\.|P\\\\.M\\\\.|p\\\\.m\\\\.\",\"%S\":\"0\\\\d|\\\\d(?!\\\\d)|[1-5]\\\\d|60\",\"%U\":\"0\\\\d|\\\\d(?!\\\\d)|[1-4]\\\\d|50|51|52|53\",\"%W\":\"0\\\\d|\\\\d(?!\\\\d)|[1-4]\\\\d|50|51|52|53\",\"%w\":\"[0-6]\",\"%y\":\"\\\\d\\\\d\",\"%Y\":\"\\\\d\\\\d\\\\d\\\\d\",\"%%\":\"%\",\"%t\":\"\\\\s\"};var MONTH_NUMBERS={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11};var DAY_NUMBERS_SUN_FIRST={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};var DAY_NUMBERS_MON_FIRST={MON:0,TUE:1,WED:2,THU:3,FRI:4,SAT:5,SUN:6};for(var datePattern in DATE_PATTERNS){pattern=pattern.replace(datePattern,\"(\"+datePattern+DATE_PATTERNS[datePattern]+\")\")}var capture=[];for(var i=pattern.indexOf(\"%\");i>=0;i=pattern.indexOf(\"%\")){capture.push(pattern[i+1]);pattern=pattern.replace(new RegExp(\"\\\\%\"+pattern[i+1],\"g\"),\"\")}var matches=new RegExp(\"^\"+pattern,\"i\").exec(UTF8ToString(buf));function initDate(){function fixup(value,min,max){return typeof value!=\"number\"||isNaN(value)?min:value>=min?value<=max?value:max:min}return{year:fixup(HEAP32[tm+20>>>2>>>0]+1900,1970,9999),month:fixup(HEAP32[tm+16>>>2>>>0],0,11),day:fixup(HEAP32[tm+12>>>2>>>0],1,31),hour:fixup(HEAP32[tm+8>>>2>>>0],0,23),min:fixup(HEAP32[tm+4>>>2>>>0],0,59),sec:fixup(HEAP32[tm>>>2>>>0],0,59)}}if(matches){var date=initDate();var value;var getMatch=symbol=>{var pos=capture.indexOf(symbol);if(pos>=0){return matches[pos+1]}return};if(value=getMatch(\"S\")){date.sec=jstoi_q(value)}if(value=getMatch(\"M\")){date.min=jstoi_q(value)}if(value=getMatch(\"H\")){date.hour=jstoi_q(value)}else if(value=getMatch(\"I\")){var hour=jstoi_q(value);if(value=getMatch(\"p\")){hour+=value.toUpperCase()[0]===\"P\"?12:0}date.hour=hour}if(value=getMatch(\"Y\")){date.year=jstoi_q(value)}else if(value=getMatch(\"y\")){var year=jstoi_q(value);if(value=getMatch(\"C\")){year+=jstoi_q(value)*100}else{year+=year<69?2e3:1900}date.year=year}if(value=getMatch(\"m\")){date.month=jstoi_q(value)-1}else if(value=getMatch(\"b\")){date.month=MONTH_NUMBERS[value.substring(0,3).toUpperCase()]||0}if(value=getMatch(\"d\")){date.day=jstoi_q(value)}else if(value=getMatch(\"j\")){var day=jstoi_q(value);var leapYear=isLeapYear(date.year);for(var month=0;month<12;++month){var daysUntilMonth=arraySum(leapYear?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR,month-1);if(day<=daysUntilMonth+(leapYear?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR)[month]){date.day=day-daysUntilMonth}}}else if(value=getMatch(\"a\")){var weekDay=value.substring(0,3).toUpperCase();if(value=getMatch(\"U\")){var weekDayNumber=DAY_NUMBERS_SUN_FIRST[weekDay];var weekNumber=jstoi_q(value);var janFirst=new Date(date.year,0,1);var endDate;if(janFirst.getDay()===0){endDate=addDays(janFirst,weekDayNumber+7*(weekNumber-1))}else{endDate=addDays(janFirst,7-janFirst.getDay()+weekDayNumber+7*(weekNumber-1))}date.day=endDate.getDate();date.month=endDate.getMonth()}else if(value=getMatch(\"W\")){var weekDayNumber=DAY_NUMBERS_MON_FIRST[weekDay];var weekNumber=jstoi_q(value);var janFirst=new Date(date.year,0,1);var endDate;if(janFirst.getDay()===1){endDate=addDays(janFirst,weekDayNumber+7*(weekNumber-1))}else{endDate=addDays(janFirst,7-janFirst.getDay()+1+weekDayNumber+7*(weekNumber-1))}date.day=endDate.getDate();date.month=endDate.getMonth()}}var fullDate=new Date(date.year,date.month,date.day,date.hour,date.min,date.sec,0);HEAP32[tm>>>2>>>0]=fullDate.getSeconds();HEAP32[tm+4>>>2>>>0]=fullDate.getMinutes();HEAP32[tm+8>>>2>>>0]=fullDate.getHours();HEAP32[tm+12>>>2>>>0]=fullDate.getDate();HEAP32[tm+16>>>2>>>0]=fullDate.getMonth();HEAP32[tm+20>>>2>>>0]=fullDate.getFullYear()-1900;HEAP32[tm+24>>>2>>>0]=fullDate.getDay();HEAP32[tm+28>>>2>>>0]=arraySum(isLeapYear(fullDate.getFullYear())?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR,fullDate.getMonth()-1)+fullDate.getDate()-1;HEAP32[tm+32>>>2>>>0]=0;return buf+intArrayFromString(matches[0]).length-1}return 0}var exitJS=(status,implicit)=>{EXITSTATUS=status;_proc_exit(status)};var handleException=e=>{if(e instanceof ExitStatus||e==\"unwind\"){return EXITSTATUS}quit_(1,e)};InternalError=Module[\"InternalError\"]=class InternalError extends Error{constructor(message){super(message);this.name=\"InternalError\"}};embind_init_charCodes();BindingError=Module[\"BindingError\"]=class BindingError extends Error{constructor(message){super(message);this.name=\"BindingError\"}};init_ClassHandle();init_embind();init_RegisteredPointer();UnboundTypeError=Module[\"UnboundTypeError\"]=extendError(Error,\"UnboundTypeError\");handleAllocatorInit();init_emval();var wasmImports={__syscall_ftruncate64:___syscall_ftruncate64,__syscall_getdents64:___syscall_getdents64,_embind_finalize_value_object:__embind_finalize_value_object,_embind_register_bigint:__embind_register_bigint,_embind_register_bool:__embind_register_bool,_embind_register_class:__embind_register_class,_embind_register_class_constructor:__embind_register_class_constructor,_embind_register_class_function:__embind_register_class_function,_embind_register_emval:__embind_register_emval,_embind_register_enum:__embind_register_enum,_embind_register_enum_value:__embind_register_enum_value,_embind_register_float:__embind_register_float,_embind_register_function:__embind_register_function,_embind_register_integer:__embind_register_integer,_embind_register_memory_view:__embind_register_memory_view,_embind_register_smart_ptr:__embind_register_smart_ptr,_embind_register_std_string:__embind_register_std_string,_embind_register_std_wstring:__embind_register_std_wstring,_embind_register_value_object:__embind_register_value_object,_embind_register_value_object_field:__embind_register_value_object_field,_embind_register_void:__embind_register_void,_emval_as:__emval_as,_emval_call:__emval_call,_emval_call_method:__emval_call_method,_emval_decref:__emval_decref,_emval_get_global:__emval_get_global,_emval_get_method_caller:__emval_get_method_caller,_emval_get_module_property:__emval_get_module_property,_emval_get_property:__emval_get_property,_emval_incref:__emval_incref,_emval_instanceof:__emval_instanceof,_emval_new_array:__emval_new_array,_emval_new_cstring:__emval_new_cstring,_emval_new_object:__emval_new_object,_emval_run_destructors:__emval_run_destructors,_emval_set_property:__emval_set_property,_emval_take_value:__emval_take_value,_emval_typeof:__emval_typeof,clock_time_get:_clock_time_get,emscripten_asm_const_int:_emscripten_asm_const_int,emscripten_notify_memory_growth:_emscripten_notify_memory_growth,environ_get:_environ_get,environ_sizes_get:_environ_sizes_get,fd_close:_fd_close,fd_read:_fd_read,fd_seek:_fd_seek,fd_write:_fd_write,proc_exit:_proc_exit,strptime:_strptime};var wasmExports=createWasm();var _malloc=a0=>(_malloc=wasmExports[\"malloc\"])(a0);var _free=a0=>(_free=wasmExports[\"free\"])(a0);var ___errno_location=()=>(___errno_location=wasmExports[\"__errno_location\"])();var __initialize=Module[\"__initialize\"]=()=>(__initialize=Module[\"__initialize\"]=wasmExports[\"_initialize\"])();var ___getTypeName=a0=>(___getTypeName=wasmExports[\"__getTypeName\"])(a0);var ___cxa_increment_exception_refcount=a0=>(___cxa_increment_exception_refcount=wasmExports[\"__cxa_increment_exception_refcount\"])(a0);var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"__cxa_is_pointer_type\"])(a0);function applySignatureConversions(wasmExports){wasmExports=Object.assign({},wasmExports);var makeWrapper_pp=f=>a0=>f(a0)>>>0;var makeWrapper_p=f=>()=>f()>>>0;wasmExports[\"malloc\"]=makeWrapper_pp(wasmExports[\"malloc\"]);wasmExports[\"__errno_location\"]=makeWrapper_p(wasmExports[\"__errno_location\"]);wasmExports[\"__getTypeName\"]=makeWrapper_pp(wasmExports[\"__getTypeName\"]);wasmExports[\"stackSave\"]=makeWrapper_p(wasmExports[\"stackSave\"]);wasmExports[\"stackAlloc\"]=makeWrapper_pp(wasmExports[\"stackAlloc\"]);return wasmExports}var calledRun;var mainArgs=undefined;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function callMain(args=[]){var entryFunction=__initialize;mainArgs=[thisProgram].concat(args);try{entryFunction();var ret=0;exitJS(ret,true);return ret}catch(e){return handleException(e)}}function run(args=arguments_){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();preMain();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();if(shouldRunNow)callMain(args);postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}var shouldRunNow=true;if(Module[\"noInitialRun\"])shouldRunNow=false;run();\n\n\n  return moduleArg.ready\n}\n);\n})();\n;\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = load_perspective;\nelse if (typeof define === 'function' && define['amd'])\n  define([], () => load_perspective);\n", "\n                    import wasm from \"../../dist/pkg/node/perspective.cpp.wasm\";\n                    export default Promise.resolve(wasm);\n                ", "// \u250F\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n// \u2503 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588       \u2588      \u2588      \u2588      \u2588      \u2588 \u2588\u2584  \u2580\u2588\u2588\u2588 \u2588       \u2503\n// \u2503 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2584\u2584\u2584\u2584\u2584 \u2584\u2584\u2584\u2584\u2584\u2588  \u2580\u2580\u2580\u2580\u2580\u2588\u2580\u2580\u2580\u2580\u2580 \u2588 \u2580\u2580\u2580\u2580\u2580\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2584  \u2580\u2588 \u2588 \u2580\u2580\u2580\u2580\u2580 \u2503\n// \u2503 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2580\u2580\u2580\u2580 \u2588\u2580\u2588\u2588\u2580\u2580 \u2584\u2584\u2584\u2584\u2584 \u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2584\u2584\u2584\u2584\u2584\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2584   \u2588 \u2584\u2584\u2584\u2584\u2584 \u2503\n// \u2503 \u2588      \u2588\u2588\u2588\u2588\u2588\u2588 \u2588  \u2580\u2588\u2584       \u2588 \u2588\u2588\u2588\u2588\u2588\u2588      \u2588      \u2588\u2588\u2588\u258C\u2590\u2588\u2588\u2588 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584 \u2588       \u2503\n// \u2523\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u252B\n// \u2503 Copyright (c) 2017, the Perspective Authors.                              \u2503\n// \u2503 \u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C\u254C \u2503\n// \u2503 This file is part of the Perspective library, distributed under the terms \u2503\n// \u2503 of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). \u2503\n// \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251B\n\nconst { Client } = require(\"./api/client.js\");\nconst { Server } = require(\"./api/server.js\");\nconst { WebSocketManager } = require(\"./websocket/manager\");\nconst { WebSocketClient } = require(\"./websocket/client\");\nconst { get_config, get_type_config } = require(\"./config/index.js\");\nconst stoppable = require(\"stoppable\");\n\nconst perspective = require(\"./perspective.js\").default;\n\nconst fs = require(\"fs\");\nconst http = require(\"http\");\nconst WebSocket = require(\"ws\");\nconst process = require(\"process\");\nconst path = require(\"path\");\n\nconst load_perspective = require(\"../../dist/pkg/node/perspective.cpp.js\");\n\nconst LOCAL_PATH = path.join(process.cwd(), \"node_modules\");\nconst buffer = require(\"../../dist/pkg/node/perspective.cpp.wasm\").default;\n\nconst SYNC_SERVER = new (class extends Server {\n    init(msg) {\n        this._loaded_promise = (async () => {\n            let wasmBinary = await buffer;\n            const mod = await WebAssembly.instantiate(wasmBinary);\n            const exports = mod.instance.exports;\n            const size = exports.size();\n            const offset = exports.offset();\n            const array = new Uint8Array(exports.memory.buffer);\n            wasmBinary = array.slice(offset, offset + size);\n            const core = await load_perspective({\n                wasmBinary,\n                wasmJSMethod: \"native-wasm\",\n            });\n\n            core.init();\n            this.perspective = perspective(core);\n            super.init(msg);\n        })();\n    }\n\n    post(msg) {\n        SYNC_CLIENT._handle({ data: msg });\n    }\n})();\n\nconst SYNC_CLIENT = new (class extends Client {\n    send(msg) {\n        SYNC_SERVER.process(msg);\n    }\n\n    loaded() {\n        return SYNC_SERVER._loaded_promise;\n    }\n})();\n\nSYNC_CLIENT.send({ id: -1, cmd: \"init\" });\n\nmodule.exports = SYNC_CLIENT;\nmodule.exports.sync_module = async () => {\n    await SYNC_CLIENT.loaded();\n    return SYNC_SERVER.perspective;\n};\n\nconst DEFAULT_ASSETS = [\n    path.join(__dirname, \"../../../../tools/perspective-bench/dist\"),\n    \"@finos/perspective-test\",\n    \"@finos/perspective/dist/cdn\",\n    \"@finos/perspective-workspace/dist/cdn\",\n    \"@finos/perspective-workspace/dist/css\",\n    \"@finos/perspective-viewer/dist/cdn\",\n    \"@finos/perspective-viewer/dist/css\",\n    \"@finos/perspective-viewer-openlayers/dist/cdn\",\n    \"@finos/perspective-viewer-datagrid/dist/cdn\",\n    \"@finos/perspective-viewer-d3fc/dist/cdn\",\n    \"@finos/perspective-jupyterlab/dist/cdn\",\n];\n\nconst CONTENT_TYPES = {\n    \".js\": \"text/javascript; charset=utf-8\",\n    \".css\": \"text/css; charset=utf-8\",\n    \".json\": \"application/json; charset=utf-8\",\n    \".arrow\": \"arraybuffer\",\n    \".feather\": \"arraybuffer\",\n    \".wasm\": \"application/wasm\",\n};\n\nfunction read_promise(filePath) {\n    return new Promise((resolve, reject) => {\n        fs.readFile(filePath, function (error, content) {\n            if (error && error.code !== \"ENOENT\") {\n                reject(error);\n            } else {\n                resolve(content);\n            }\n        });\n    });\n}\n\n/**\n * Host a Perspective server that hosts data, code files, etc.\n */\nfunction perspective_assets(assets, host_psp) {\n    return async function (request, response) {\n        response.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n        response.setHeader(\"Access-Control-Request-Method\", \"*\");\n        response.setHeader(\"Access-Control-Allow-Methods\", \"OPTIONS,GET\");\n        response.setHeader(\"Access-Control-Allow-Headers\", \"*\");\n\n        let url = request.url.split(/[\\?\\#]/)[0];\n\n        // Strip version numbers from the URL so we can handle CDN-like requests\n        // of the form @[^~]major.minor.patch when testing local versions of\n        // Perspective against Voila.\n        url = url.replace(/@[\\^~]?\\d+.[\\d\\*]*.[\\d\\*]*/, \"\");\n\n        if (url === \"/\") {\n            url = \"/index.html\";\n        }\n\n        let extname = path.extname(url);\n        let contentType = CONTENT_TYPES[extname] || \"text/html\";\n        try {\n            for (let rootDir of assets) {\n                let filePath = rootDir + url;\n                let content = await read_promise(filePath);\n                if (typeof content !== \"undefined\") {\n                    console.log(`200 ${url}`);\n                    response.writeHead(200, { \"Content-Type\": contentType });\n                    response.end(\n                        content,\n                        extname === \".arrow\" || extname === \".feather\"\n                            ? undefined\n                            : \"utf-8\"\n                    );\n                    return;\n                }\n            }\n            if (host_psp || typeof host_psp === \"undefined\") {\n                for (let rootDir of DEFAULT_ASSETS) {\n                    try {\n                        let filePath;\n                        if (url.startsWith(\"/\" + rootDir)) {\n                            filePath = require.resolve(url.slice(1));\n                        } else {\n                            let paths = require.resolve.paths(rootDir + url);\n                            paths = [\n                                ...paths,\n                                ...assets.map((x) =>\n                                    path.join(x, \"node_modules\")\n                                ),\n                                LOCAL_PATH,\n                            ];\n                            filePath = require.resolve(rootDir + url, {\n                                paths,\n                            });\n                        }\n                        let content = await read_promise(filePath);\n                        if (typeof content !== \"undefined\") {\n                            console.log(`200 ${url}`);\n                            response.writeHead(200, {\n                                \"Content-Type\": contentType,\n                            });\n                            response.end(\n                                content,\n                                extname === \".arrow\" || extname === \".feather\"\n                                    ? undefined\n                                    : \"utf-8\"\n                            );\n                            return;\n                        }\n                    } catch (e) {\n                        // console.log(e);\n                    }\n                }\n            }\n            if (url.indexOf(\"favicon.ico\") > -1) {\n                response.writeHead(200);\n                response.end(\"\", \"utf-8\");\n            } else {\n                console.error(`404 ${url}`);\n                response.writeHead(404);\n                response.end(\"\", \"utf-8\");\n            }\n        } catch (error) {\n            if (error.code !== \"ENOENT\") {\n                console.error(`500 ${url}`);\n                response.writeHead(500);\n                response.end(\"\", \"utf-8\");\n            }\n        }\n    };\n}\n\nclass WebSocketServer extends WebSocketManager {\n    constructor({ assets, host_psp, port, on_start } = {}) {\n        super();\n        port = typeof port === \"undefined\" ? 8080 : port;\n        assets = assets || [\"./\"];\n\n        // Serve Perspective files through HTTP\n        this._server = stoppable(\n            http.createServer(perspective_assets(assets, host_psp))\n        );\n\n        // Serve Worker API through WebSockets\n        this._wss = new WebSocket.Server({\n            noServer: true,\n            perMessageDeflate: true,\n        });\n\n        // When the server starts, define how to handle messages\n        this._wss.on(\"connection\", (ws) => this.add_connection(ws));\n\n        this._server.on(\"upgrade\", (request, socket, head) => {\n            console.log(\"200    *** websocket upgrade ***\");\n            this._wss.handleUpgrade(request, socket, head, (sock) =>\n                this._wss.emit(\"connection\", sock, request)\n            );\n        });\n\n        this._server.listen(port, () => {\n            console.log(`Listening on port ${this._server.address().port}`);\n            if (on_start) {\n                on_start();\n            }\n        });\n    }\n\n    async close() {\n        super.clear();\n        await new Promise((x) => this._server.stop(x));\n    }\n}\n\n/**\n * Create a new Websocket connection to `url`, setting up the protocol for\n * a Perspective server and Perspective client to communicate.\n * @param {*} url\n */\nconst websocket = (url) => {\n    return new WebSocketClient(new WebSocket(url));\n};\n\nmodule.exports.get_type_config = get_type_config;\nmodule.exports.get_config = get_config;\nmodule.exports.worker = () => module.exports;\nmodule.exports.shared_worker = () => module.exports;\nmodule.exports.websocket = websocket;\nmodule.exports.perspective_assets = perspective_assets;\nmodule.exports.WebSocketServer = WebSocketServer;\nmodule.exports.WebSocketManager = WebSocketManager;\n"],
  "mappings": "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AChB,gBAAiB,WACjB,QAAS,SACT,MAAO,MACX,EAEaC,GAAoB,CAC7B,UACA,WACA,WACA,WACA,aACA,UACA,SACA,OACA,mBACA,cACA,iBACA,iBACA,WACJ,EAEMO,GAAoB,CACtB,MACA,MACA,UACA,QACA,iBACA,WACA,iBACA,gBACA,mBACA,OACA,OACA,OACA,MACA,iBACA,MACA,OACA,SACA,MACA,iBACA,sBACA,SACA,MACA,UACA,eACA,SACA,KACJ,EAEMC,GAAoB,CACtB,MACA,QACA,iBACA,gBACA,WACA,iBACA,OACA,gBACA,OACA,QACJ,EAEMC,GAAqB,CACvB,MACA,QACA,iBACA,gBACA,WACA,iBACA,gBACA,OACA,QACJ,EAEaN,GAAc,CACvB,OACA,MACA,OACA,UACA,WACA,UACA,WACA,cACA,cACJ,EAEaC,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAE3CC,GAAkB,CAC3B,OAAQG,GACR,MAAOD,GACP,QAASA,GACT,QAASE,GACT,SAAUD,GACV,KAAMA,EACV,EAEaN,EAAmB,CAC5B,SAAU,IACV,YAAa,IACb,OAAQ,KACR,iBAAkB,KAClB,oBAAqB,KACrB,aAAc,KACd,OAAQ,UACR,UAAW,cACX,KAAM,KACN,QAAS,SACT,SAAU,WACV,WAAY,IACZ,UAAW,IACX,IAAK,MACL,GAAI,KACJ,WAAY,cACZ,SAAU,WACd,EAEMQ,GAAkB,CACpBR,EAAiB,WACjBA,EAAiB,UACjBA,EAAiB,OACjBA,EAAiB,aACjBA,EAAiB,GACjBA,EAAiB,IACjBA,EAAiB,OACjBA,EAAiB,SACrB,EAEMS,GAAiB,CACnBT,EAAiB,SACjBA,EAAiB,YACjBA,EAAiB,OACjBA,EAAiB,iBACjBA,EAAiB,oBACjBA,EAAiB,aACjBA,EAAiB,OACjBA,EAAiB,SACrB,EAEMU,GAAiB,CACnBV,EAAiB,OACjBA,EAAiB,SACjBA,EAAiB,aACjBA,EAAiB,KACjBA,EAAiB,QACjBA,EAAiB,WACjBA,EAAiB,SACjBA,EAAiB,OACjBA,EAAiB,SACr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",
  "names": ["unsubscribe", "method", "cmd", "resolve", "reject", "args", "i", "callback_id", "__CALLBACK_CACHE__", "msg", "subscribe", "__CALLBACK_INDEX__", "async_queue", "init_dispatch", "__esmMin", "view", "worker", "table_name", "config", "resolve", "reject", "proxy_view", "name", "init_view_api", "__esmMin", "init_dispatch", "async_queue", "subscribe", "unsubscribe", "get_column_type", "val", "bindall", "self", "obj", "key", "value", "init_utils", "__esmMin", "search", "start", "searchElement", "fromIndex", "o", "len", "n", "k", "sameValueZero", "x", "y", "table", "worker", "data", "options", "resolve", "reject", "bindall", "arrow", "updated", "proxy_table", "name", "init_table_api", "__esmMin", "init_dispatch", "init_view_api", "init_utils", "config", "view", "async_queue", "subscribe", "unsubscribe", "f", "client_exports", "__export", "Client", "init_client", "__esmMin", "init_table_api", "init_utils", "bindall", "cmd", "handler", "key", "msg", "resolve", "reject", "keep_alive", "name", "proxy_table", "e", "msgs", "feature", "m", "data", "options", "table", "settings_default", "init_settings", "__esmMin", "config_exports", "__export", "get_config", "get_type_config", "get_types", "override_config", "type", "config", "props", "isObject", "item", "mergeDeep", "target", "sources", "source", "key", "settings_default", "init_config", "__esmMin", "init_settings", "server_exports", "__export", "Server", "error_to_json", "error", "obj", "key", "init_server", "__esmMin", "init_config", "perspective", "msg", "override_config", "client_id", "msgs", "table", "tbl", "tableMsgQueue", "view", "callback", "ev", "result", "remove_method", "name", "e", "manager_exports", "__export", "WebSocketManager", "CLIENT_ID_GEN", "init_manager", "__esmMin", "init_server", "Server", "args", "id", "ws", "msg", "new_args", "compoundId", "e", "transferable", "req", "binary_msg", "request", "binary", "start", "end", "length", "cache", "name", "input", "table", "client_exports", "__export", "WebSocketClient", "import_ws", "PING_TIMEOUT", "init_client", "__esmMin", "Client", "msg", "binary_msg", "result", "new_data_with_port_id", "ws", "WebSocket", "pre_msg", "resolve", "constants_exports", "__export", "COLUMN_SEPARATOR_STRING", "CONFIG_ALIASES", "CONFIG_VALID_KEYS", "DATA_TYPES", "FILTER_OPERATORS", "SORT_ORDERS", "SORT_ORDER_IDS", "TYPE_AGGREGATES", "TYPE_FILTERS", "NUMBER_AGGREGATES", "STRING_AGGREGATES", "BOOLEAN_AGGREGATES", "BOOLEAN_FILTERS", "NUMBER_FILTERS", "STRING_FILTERS", "DATETIME_FILTERS", "init_constants", "__esmMin", "clean_data", "value", "DataAccessor", "init_data_accessor", "__esmMin", "init_utils", "init_config", "data", "column_name", "row_index", "d", "column_index", "type", "val", "get_column_type", "overridden_types", "name", "new_type", "get_type_config", "extract_vector", "extract_map", "fill_vector", "init_emscripten", "__esmMin", "vector", "extracted", "i", "item", "map", "keys", "key", "arr", "elem", "perspective_exports", "__export", "perspective_default", "Module", "__MODULE__", "accessor", "DataAccessor", "SIDES", "_POOL_DEBOUNCES", "_set_process", "pool", "table_id", "_call_process", "_remove_process", "memory_usage", "mem", "make_table", "_Table", "index", "limit", "op", "is_update", "is_arrow", "is_csv", "port_id", "view", "table", "sides", "config", "view_config", "name", "COLUMN_SEPARATOR_STRING", "bindall", "i", "j", "val", "cb", "hidden", "sort", "col_path_vector_to_string", "vector", "extracted", "s", "extract_vector_scalar", "item", "extract_vector_string", "row", "override", "schema", "extract_map", "key", "colname", "get_type_config", "skip", "depth", "x", "start_row", "end_row", "start_col", "end_col", "num_sides", "nidx", "_parse_format_options", "options", "max_cols", "max_rows", "psp_offset", "viewport", "column_to_format", "col_name", "format_function", "num_rows", "idx", "slice", "data_slice", "dtype", "rst", "is_formatted", "get_pkeys", "get_ids", "leaves_only", "has_row_path", "columns_length", "group_by_length", "cols", "colnames", "_", "obj", "compression", "ncols", "nhidden", "delta", "data", "rows", "results", "callback", "mode", "cache", "updated", "filterInPlace", "a", "condition", "total", "initial_length", "fill_vector", "filter", "filter_vector", "filled", "sort_vector", "expression", "inner", "overridden_types", "gnode", "e", "columns", "size", "types", "new_schema", "get_column_type", "parse_expression_strings", "expressions", "validated_expressions", "expression_idx_map", "is_new_format", "column_name_map", "column_id_map", "running_cidx", "expression_alias", "alias_match", "parsed_expression_string", "match", "cname", "column_id", "replace_interned_param", "intern_fn", "value", "intern_idx", "validated", "validation_results", "expression_schema", "expression_errors", "expression_aliases", "alias", "error_aliases", "error_object", "perspective", "_config", "CONFIG_ALIASES", "WARNED_KEYS", "agg", "CONFIG_VALID_KEYS", "table_schema", "expr", "vc", "v", "meter", "initialize_profile_thread", "_msgs", "start", "poll", "now", "format", "pdata", "extract_vector", "names", "cidx", "f", "Server", "data_accessor", "prop", "constants_exports", "WebWorkerServer", "msg", "transfer", "wasmBinary", "exports", "offset", "init_perspective", "__esmMin", "init_constants", "init_config", "init_data_accessor", "init_emscripten", "init_utils", "init_server", "require_perspective_cpp", "__commonJSMin", "exports", "module", "load_perspective", "_scriptDir", "moduleArg", "Module", "readyPromiseResolve", "readyPromiseReject", "resolve", "reject", "moduleOverrides", "arguments_", "thisProgram", "quit_", "status", "toThrow", "ENVIRONMENT_IS_WEB", "ENVIRONMENT_IS_WORKER", "ENVIRONMENT_IS_NODE", "scriptDirectory", "locateFile", "path", "read_", "readAsync", "readBinary", "fs", "nodePath", "filename", "binary", "isFileURI", "ret", "onload", "onerror", "err", "data", "out", "wasmBinary", "abort", "wasmMemory", "ABORT", "EXITSTATUS", "HEAP8", "HEAPU8", "HEAP16", "HEAPU16", "HEAP32", "HEAPU32", "HEAPF32", "HEAP64", "HEAPU64", "HEAPF64", "updateMemoryViews", "b", "__ATPRERUN__", "__ATINIT__", "__ATMAIN__", "__ATPOSTRUN__", "runtimeInitialized", "preRun", "addOnPreRun", "callRuntimeCallbacks", "initRuntime", "preMain", "postRun", "addOnPostRun", "cb", "runDependencies", "runDependencyWatcher", "dependenciesFulfilled", "addRunDependency", "id", "removeRunDependency", "callback", "what", "e", "dataURIPrefix", "isDataURI", "wasmBinaryFile", "getBinarySync", "file", "getBinaryPromise", "binaryFile", "response", "instantiateArrayBuffer", "imports", "receiver", "instance", "reason", "instantiateAsync", "result", "createWasm", "info", "wasmImports", "receiveInstance", "wasmExports", "applySignatureConversions", "wasmTable", "receiveInstantiationResult", "ASM_CONSTS", "$0", "UTF8ToString", "ExitStatus", "callbacks", "noExitRuntime", "UTF8Decoder", "UTF8ArrayToString", "heapOrArray", "idx", "maxBytesToRead", "endIdx", "endPtr", "str", "u0", "u1", "u2", "ch", "ptr", "SYSCALLS", "MAX_INT53", "MIN_INT53", "bigintToI53Checked", "num", "___syscall_ftruncate64", "fd", "length", "stringToUTF8Array", "heap", "outIdx", "maxBytesToWrite", "startIdx", "i", "u", "stringToUTF8", "outPtr", "___syscall_getdents64", "dirp", "count", "structRegistrations", "runDestructors", "destructors", "del", "simpleReadValueFromPointer", "pointer", "awaitingDependencies", "registeredTypes", "typeDependencies", "InternalError", "throwInternalError", "message", "whenDependentTypesAreResolved", "myTypes", "dependentTypes", "getTypeConverters", "type", "onComplete", "typeConverters", "myTypeConverters", "registerType", "unregisteredTypes", "registered", "dt", "__embind_finalize_value_object", "structType", "reg", "rawConstructor", "rawDestructor", "fieldRecords", "fieldTypes", "field", "fields", "fieldName", "getterReturnType", "getter", "getterContext", "setterArgumentType", "setter", "setterContext", "o", "rv", "GenericWireTypeSize", "embindRepr", "v", "embind_init_charCodes", "codes", "embind_charCodes", "readLatin1String", "c", "BindingError", "throwBindingError", "sharedRegisterType", "rawType", "registeredInstance", "options", "name", "integerReadValueFromPointer", "width", "signed", "__embind_register_bigint", "primitiveType", "size", "minRange", "maxRange", "isUnsignedType", "value", "__embind_register_bool", "trueValue", "falseValue", "wt", "shallowCopyInternalPointer", "throwInstanceAlreadyDeleted", "obj", "getInstanceTypeName", "handle", "finalizationRegistry", "detachFinalizer", "runDestructor", "$$", "releaseClassHandle", "toDelete", "downcastPointer", "ptrClass", "desiredClass", "registeredPointers", "getInheritedInstanceCount", "registeredInstances", "getLiveInheritedInstances", "k", "deletionQueue", "flushPendingDeletes", "delayFunction", "setDelayFunction", "fn", "init_embind", "getBasestPointer", "class_", "getInheritedInstance", "makeClassHandle", "prototype", "record", "hasSmartPtrType", "hasSmartPtr", "attachFinalizer", "RegisteredPointer_fromWireType", "rawPointer", "makeDefaultHandle", "actualType", "registeredPointerRecord", "toType", "dp", "init_ClassHandle", "ClassHandle", "other", "leftClass", "left", "rightClass", "right", "clone", "createNamedFunction", "body", "ensureOverloadTable", "proto", "methodName", "humanName", "prevFunc", "exposePublicSymbol", "numArguments", "char_0", "char_9", "makeLegalFunctionName", "f", "RegisteredClass", "constructor", "instancePrototype", "baseClass", "getActualType", "upcast", "downcast", "upcastPointer", "constNoSmartPtrRawPointerToWireType", "handleClass", "genericPointerToWireType", "clonedHandle", "Emval", "nonConstNoSmartPtrRawPointerToWireType", "readPointer", "init_RegisteredPointer", "RegisteredPointer", "registeredClass", "isReference", "isConst", "isSmartPointer", "pointeeType", "sharingPolicy", "rawGetPointee", "rawShare", "replacePublicSymbol", "wasmTableMirror", "getWasmTableEntry", "funcPtr", "func", "embind__requireFunction", "signature", "rawFunction", "makeDynCaller", "fp", "extendError", "baseErrorType", "errorName", "errorClass", "stack", "UnboundTypeError", "getTypeName", "___getTypeName", "_free", "throwUnboundTypeError", "types", "unboundTypes", "seen", "visit", "__embind_register_class", "rawPointerType", "rawConstPointerType", "baseClassRawType", "getActualTypeSignature", "upcastSignature", "downcastSignature", "destructorSignature", "legalFunctionName", "base", "basePrototype", "referenceConverter", "pointerConverter", "constPointerConverter", "heap32VectorToArray", "firstElement", "array", "newFunc", "argumentList", "dummy", "r", "craftInvokerFunction", "argTypes", "classType", "cppInvokerFunc", "cppTargetFunc", "isAsync", "argCount", "isClassMethodFunc", "needsDestructorStack", "returns", "argsList", "argsListWired", "invokerFnBody", "dtorStack", "args1", "args2", "paramName", "invokerFn", "__embind_register_class_constructor", "rawClassType", "rawArgTypesAddr", "invokerSignature", "invoker", "rawArgTypes", "getFunctionName", "argsIndex", "__embind_register_class_function", "rawInvoker", "context", "isPureVirtual", "unboundTypesHandler", "method", "memberFunction", "handleAllocatorInit", "HandleAllocator", "emval_handles", "__emval_decref", "count_emval_handles", "init_emval", "__embind_register_emval", "enumReadValueFromPointer", "__embind_register_enum", "isSigned", "ctor", "requireRegisteredType", "impl", "__embind_register_enum_value", "rawEnumType", "enumValue", "enumType", "Enum", "Value", "floatReadValueFromPointer", "__embind_register_float", "__embind_register_function", "invokerArgsArray", "__embind_register_integer", "fromWireType", "bitshift", "checkAssertions", "toTypeName", "toWireType", "__embind_register_memory_view", "dataTypeIndex", "typeMapping", "TA", "decodeMemoryView", "__embind_register_smart_ptr", "rawPointeeType", "getPointeeSignature", "constructorSignature", "shareSignature", "registeredPointer", "lengthBytesUTF8", "len", "__embind_register_std_string", "stdStringIsUTF8", "payload", "decodeStartPtr", "currentBytePtr", "maxRead", "stringSegment", "a", "valueIsOfTypeString", "_malloc", "charCode", "UTF16Decoder", "UTF16ToString", "maxIdx", "codeUnit", "stringToUTF16", "startPtr", "numCharsToWrite", "lengthBytesUTF16", "UTF32ToString", "utf32", "stringToUTF32", "trailSurrogate", "lengthBytesUTF32", "__embind_register_std_wstring", "charSize", "decodeString", "encodeString", "getHeap", "lengthBytesUTF", "shift", "HEAP", "maxReadBytes", "__embind_register_value_object", "__embind_register_value_object_field", "getterSignature", "setterSignature", "__embind_register_void", "emval_returnValue", "returnType", "destructorsRef", "__emval_as", "emval_methodCallers", "__emval_call", "caller", "args", "emval_symbols", "getStringOrSymbol", "address", "symbol", "__emval_call_method", "objHandle", "emval_get_global", "__emval_get_global", "emval_addMethodCaller", "emval_lookupTypes", "reflectConstruct", "__emval_get_method_caller", "kind", "retType", "functionBody", "offset", "params", "invokerFunction", "functionName", "t", "__emval_get_module_property", "__emval_get_property", "key", "__emval_incref", "__emval_instanceof", "object", "__emval_new_array", "__emval_new_cstring", "__emval_new_object", "__emval_run_destructors", "__emval_set_property", "__emval_take_value", "arg", "__emval_typeof", "_emscripten_get_now", "nowIsMonotonic", "checkWasiClock", "clock_id", "_clock_time_get", "clk_id", "ignored_precision", "ptime", "now", "nsec", "readEmAsmArgsArray", "readEmAsmArgs", "sigPtr", "buf", "wide", "runEmAsmFunction", "code", "argbuf", "_emscripten_asm_const_int", "_emscripten_notify_memory_growth", "memoryIndex", "ENV", "getExecutableName", "getEnvStrings", "lang", "env", "x", "strings", "stringToAscii", "buffer", "_environ_get", "__environ", "environ_buf", "bufSize", "string", "_environ_sizes_get", "penviron_count", "penviron_buf_size", "_fd_close", "_fd_read", "iov", "iovcnt", "pnum", "_fd_seek", "whence", "newOffset", "printCharBuffers", "printChar", "stream", "curr", "_fd_write", "j", "runtimeKeepaliveCounter", "keepRuntimeAlive", "_proc_exit", "isLeapYear", "year", "arraySum", "index", "sum", "MONTH_DAYS_LEAP", "MONTH_DAYS_REGULAR", "addDays", "date", "days", "newDate", "leap", "currentMonth", "daysInCurrentMonth", "jstoi_q", "intArrayFromString", "stringy", "dontAddNull", "u8array", "numBytesWritten", "_strptime", "format", "tm", "pattern", "SPECIAL_CHARS", "ii", "EQUIVALENT_MATCHERS", "matcher", "DATE_PATTERNS", "MONTH_NUMBERS", "DAY_NUMBERS_SUN_FIRST", "DAY_NUMBERS_MON_FIRST", "datePattern", "capture", "matches", "initDate", "fixup", "min", "max", "getMatch", "pos", "hour", "day", "leapYear", "month", "daysUntilMonth", "weekDay", "weekDayNumber", "weekNumber", "janFirst", "endDate", "fullDate", "exitJS", "implicit", "handleException", "a0", "___errno_location", "__initialize", "___cxa_increment_exception_refcount", "___cxa_is_pointer_type", "makeWrapper_pp", "makeWrapper_p", "calledRun", "mainArgs", "runCaller", "run", "callMain", "entryFunction", "doRun", "shouldRunNow", "perspective_cpp_exports", "__export", "perspective_cpp_default", "init_perspective_cpp", "__esmMin", "Client", "Server", "WebSocketManager", "WebSocketClient", "get_config", "get_type_config", "stoppable", "perspective", "fs", "http", "WebSocket", "process", "path", "load_perspective", "LOCAL_PATH", "buffer", "SYNC_SERVER", "msg", "wasmBinary", "exports", "size", "offset", "core", "SYNC_CLIENT", "DEFAULT_ASSETS", "CONTENT_TYPES", "read_promise", "filePath", "resolve", "reject", "error", "content", "perspective_assets", "assets", "host_psp", "request", "response", "url", "extname", "contentType", "rootDir", "paths", "x", "WebSocketServer", "port", "on_start", "ws", "socket", "head", "sock", "websocket"]
}
