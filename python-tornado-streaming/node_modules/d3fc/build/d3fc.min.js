(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-fetch"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-scale-chromatic"),require("d3-dispatch"),require("d3-brush"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-fetch","d3-path","d3-selection","d3-shape","d3-scale-chromatic","d3-dispatch","d3-brush","d3-zoom"],t):(e="undefined"==typeof globalThis?e||self:globalThis,t(e.fc={},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3))})(this,function(e,t,a,n,i,l,r,o,d,s,c,g,h){'use strict';var fe=Math.round,pe=Math.floor,me=Math.min,ye=Math.ceil,be=Math.exp,ve=Math.max,xe=Math.abs;function u(e){return e}function f(){}function p(e){return"function"==typeof e?e:function(){return e}}function m(e){return"number"==typeof e&&isNaN(e)?void 0:e}function y(){var e=function(){return 10},t=f,a=u,n=function(e){return null!=e},i=function(i){var l=e.apply(this,arguments),r=i.slice(0,l).map(a);return i.map(function(e,o){return o>=l&&(r.shift(),r.push(a(e,o))),o<l-1||r.some(function(e){return!n(e)})?t(void 0,o):t(r,o)})};return i.period=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),i):e},i.accumulator=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.defined=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i}function b(){var e=2,a=y().accumulator(function(a){var n=a&&t.deviation(a),i=a&&t.mean(a);return{average:i,upper:m(i+e*n),lower:m(i-e*n)}}),n=function(e){return a(e)};return n.multiplier=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},we(n,a,"period","value"),n}function v(){var e=u,a=function(){return 9},n=function(e){var a=[];return function(n){var i;return a.length<e&&(null==n?a=[]:a.push(n)),a.length>=e&&(i=t.mean(a)),i}},i=function(t){var i=a.apply(this,arguments),l=2/(i+1),r=n(i),o;return t.map(function(t,a){var n=e(t,a);return o=void 0===o?r(n):n*l+(1-l)*o,m(o)})};return i.period=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),i):a},i.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i}function x(){var e=u,a=v().period(12),n=v().period(26),i=v().period(9),l=function(l){a.value(e),n.value(e);var r=t.zip(a(l),n(l)).map(function(e){return void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}),o=i(r);return t.zip(r,o).map(function(e){return{macd:e[0],signal:e[1],divergence:void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}})};return l.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},ke(l,a,De({period:"fastPeriod"})),ke(l,n,De({period:"slowPeriod"})),ke(l,i,De({period:"signalPeriod"})),l}function S(e){"@babel/helpers - typeof";return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function k(e,t,a){return t&&V(e.prototype,t),a&&V(e,a),e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _(){return _=D()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=Function.bind.apply(e,i),l=new a;return n&&T(l,n.prototype),l},_.apply(null,arguments)}function I(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function E(e){var t="function"==typeof Map?new Map:void 0;return E=function(e){function a(){return _(e,arguments,A(this).constructor)}if(null===e||!I(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,a)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),T(a,e)},E(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:z(e)}function P(e){var t=D();return function(){var a=A(e),n;if(t){var i=A(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return N(this,n)}}function B(e,t){return L(e)||W(e,t)||H(e,t)||G()}function R(e){return L(e)||O(e)||H(e)||G()}function M(e){return Y(e)||O(e)||H(e)||U()}function Y(e){if(Array.isArray(e))return F(e)}function L(e){if(Array.isArray(e))return e}function O(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function W(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,l=void 0;try{for(var r=e[Symbol.iterator](),o;!(n=(o=r.next()).done)&&(a.push(o.value),!(t&&a.length===t));n=!0);}catch(e){i=!0,l=e}finally{try{n||null==r["return"]||r["return"]()}finally{if(i)throw l}}return a}}function H(e,t){if(e){if("string"==typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function U(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=H(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=!0,d=!1,s;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(t){d=!0,s=t},f:function(){try{r||null==a.return||a.return()}finally{if(d)throw s}}}}function Q(){var e=y().accumulator(function(e){return e&&t.mean(e)}),a=function(t){return e(t)};return we(a,e,"period","value"),a}function X(){var e=.1,t=u,a=function(a){return a.map(function(a){var n=m(t(a)*(1-e)),i=m(t(a)*(1+e));return{lower:n,upper:i}})};return a.factor=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.value=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a}function j(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=v().period(13),l=function(l){return i.value(e),t.zip(l,i(l)).map(function(e){var t=m(a(e[0])-e[1]),i=m(n(e[0])-e[1]);return{bullPower:t,bearPower:i}})};return l.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},we(l,i,"period"),l}function Z(){var e={};return e.distance=function(e,t){return t-e},e.offset=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t},e.clampUp=function(e){return e},e.clampDown=function(e){return e},e.copy=function(){return e},e}function K(e,t){var a=e.map(t.clampUp);return a.length!==new Set(a.map(function(e){return null===e||void 0===e?void 0:e.valueOf()})).size&&console.warn("There are multiple ticks that fall within a discontinuity, which has led to them being rendered on top of each other. Consider using scale.ticks to explicitly specify the ticks for the scale."),a}function J(e){var t=this;arguments.length||(e=a.scaleIdentity());var n=Z(),i=function(t){var a=e.domain(),i=e.range(),l=n.distance(a[0],a[1]),r=n.distance(a[0],t),o=r/l*(i[1]-i[0])+i[0];return o};return i.invert=function(t){var a=e.domain(),i=e.range(),l=(t-i[0])/(i[1]-i[0]),r=n.distance(a[0],a[1]);return n.offset(a[0],l*r)},i.domain=function(){if(!arguments.length)return e.domain();var t=0>=arguments.length?void 0:arguments[0],a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.nice=function(){e.nice();var t=e.domain(),a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.ticks=function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=e.ticks.apply(t,i);return K(r,n)},i.copy=function(){return J(e.copy()).discontinuityProvider(n.copy())},i.discontinuityProvider=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},ke(i,e,Te("range","rangeRound","interpolate","clamp","tickFormat")),i}function $(e){if(1!==arguments.length||"string"!=typeof e)throw"Expected single argument of type string";var t=function(e,t){var a=Number.isInteger;return!!a(e)&&0<=e&&e<=t},a=[0,0,0,0],n=e.split(":");if(2>n.length||3<n.length)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(a[0]=t(parseInt(n[0],10),23)?parseInt(n[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(n[0],"'")}(),a[1]=t(parseInt(n[1],10),59)?parseInt(n[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(n[1],"'")}(),3===n.length){var i=n[2].split(".").map(function(e){return parseInt(e,10)});a[2]=t(i[0],59)?i[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(i[0],"'")}(),2===i.length&&(a[3]=t(i[1],999)?i[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(i[1],"'")}())}return"".concat(a[0].toString(10).padStart(2,"0"),":").concat(a[1].toString(10).padStart(2,"0"),":").concat(a[2].toString(10).padStart(2,"0"),".").concat(a[3].toString(10).padStart(3,"0"))}function ee(e,t){if(2!=arguments.length||!Array.isArray(e)||2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1])throw"Expected argument is a single string[] of length 2.";"SOD"===e[0]&&(e[0]="00:00:00.000"),"EOD"===e[1]&&(e[1]="00:00:00.000");var a=$(e[0]),n=$(e[1]);if("00:00:00.000"!==n&&a>n)throw"Time range start time '".concat(a,"' must be before end time '").concat(n,"' or both must equal ").concat("00:00:00.000");var i=t.setTime(new Date("00:00:00.000"===n?86400000:0),n)-t.setTime(new Date(0),a),l={startTime:a,endTime:n,lenghtInMs:i};return l.isInRange=function(e){var a=t.getTimeString(e);return!!(l.startTime<=a&&("00:00:00.000"===l.endTime||l.endTime>a))},l}function te(){var e=[function(e){return e}],a=[0,0],n="percent",l=null,r=[],o=function(o){var d=Array(o.length),s=q(e),c;try{for(s.s();!(c=s.n()).done;)for(var g=c.value,h=0,u;h<o.length;h++)u=g(o[h],h),Array.isArray(u)?d.push.apply(d,M(u)):d.push(u)}catch(e){s.e(e)}finally{s.f()}var f=[t.min(d),t.max(d)];if(f[0]=null==f[0]?t.min(r):t.min([f[0]].concat(M(r))),f[1]=null==f[1]?t.max(r):t.max([f[1]].concat(M(r))),null!=l){var p=ve(xe(f[1]-l),xe(f[0]-l));f[0]=l-p,f[1]=l+p}switch(n){case"domain":{f[0]-=a[0],f[1]+=a[1];break}case"percent":{var m=f[1]-f[0];f[0]-=a[0]*m,f[1]+=a[1]*m;break}default:throw new Error("Unknown padUnit: ".concat(n));}return f};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.padUnit=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.include=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],o):r},o.symmetricalAbout=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o}function ae(){var e=[],t=[0,0],a="percent",n=null,i=[],l=te(),r=function(e){return null==e?null:e.valueOf()},o=function(o){var d=e.map(function(e){return function(){var t=e.apply(void 0,arguments);return Array.isArray(t)?t.map(r):r(t)}});return l.accessors(d).pad(t).padUnit(a).symmetricalAbout(null==n?null:n.valueOf()).include(i.map(function(e){return e.valueOf()})),l(o).map(function(e){return new Date(e)})};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},o.padUnit=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.include=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],o):i},o.symmetricalAbout=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o}function ne(){var e=1,t=20,a=.1,n=.1,l=i.randomNormal(),r=function(){for(var r=Math.sqrt,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=e/t,s=[],c=0;c<t+1;c++){s.push(o);var g=l()*r(d)*n+(a-n*n/2)*d;o*=be(g)}return s};return r.period=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.steps=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.mu=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.sigma=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.random=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],r):l},r}function ie(e){return"function"==typeof e?e:function(){return e}}function le(){var e=new Date,t=100,a=n.timeDay,l=1,r=n.timeYear,o=1,d=null,s=function(){var e=i.randomNormal(1,.1);return ye(1e3*e())},c=ne(),g=function(e){var t=r.offset(e,o)-e;return(a.offset(e,l)-e)/t},h=function(e,t){var a=g(e),n=c.period(a)(t),i={date:e,open:n[0],high:ve.apply(Math,n),low:me.apply(Math,n),close:n[c.steps()]};return i.volume=s(i),i},u=function(n){var i,r,o;do i=n?a.offset(n.date,l):new Date(e.getTime()),r=n?n.close:t,n=h(i,r),o=d&&!d(n);while(o);return n},f=function(){var e={},t;return e.next=function(){var e=u(t);return t=e,e},e.take=function(t){return e.until(function(e,a){return!t||0>t||a===t})},e.until=function(e){for(var a=[],n=0,i=u(t),l=e&&!e(i,n);l;)a.push(i),t=i,i=u(t),n+=1,l=e&&!e(i,n);return a},e},p=function(e){return f().take(e)};if(p.stream=f,"function"!=typeof Symbol||"symbol"!==S(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return p[Symbol.iterator]=function(){var e=f();return{next:function(){return{value:e.next(),done:!1}}}},p.startDate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.startPrice=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.interval=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],p):a},p.intervalStep=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},p.unitInterval=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],p):r},p.unitIntervalStep=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],p):o},p.filter=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],p):d},p.volume=function(){return arguments.length?(s=ie(0>=arguments.length?void 0:arguments[0]),p):s},ke(p,c),p}function re(){var e="BTC-USD",t=null,a=null,n=null,i=function(){var i=[];null!=t&&i.push("start="+t.toISOString()),null!=a&&i.push("end="+a.toISOString()),null!=n&&i.push("granularity="+n);var r="https://api.gdax.com/products/"+e+"/candles?"+i.join("&");return l.json(r).then(function(e){return e.map(function(e){return{date:new Date(1e3*e[0]),open:e[3],high:e[2],low:e[1],close:e[4],volume:e[5]}})})};return i.product=function(t){return arguments.length?(e=t,i):e},i.start=function(e){return arguments.length?(t=e,i):t},i.end=function(e){return arguments.length?(a=e,i):a},i.granularity=function(e){return arguments.length?(n=e,i):n},i}function oe(){var e=10,a=function(a){return 1>=e?a.map(function(e){return[e]}):t.range(0,ye(a.length/e)).map(function(t){return a.slice(t*e,(t+1)*e)})};return a.bucketSize=function(t){return arguments.length?(e=t,a):e},a}function de(){function e(e){var a=e.map(function(e){return[n(e),i(e)]}),l=t.range(1,a.length-1).map(function(e){var t=a[e-1],n=a[e],i=a[e+1];return .5*xe((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))});return l}var a=oe(),n=function(e){return e},i=function(e){return e},l=function(n){if(a.bucketSize()>=n.length)return n;var i=e(n),l=a(i),r=a(n.slice(1,n.length-1)),o=r.map(function(e,a){var n=l[a],i=t.max(n),r=n.indexOf(i);return e[r]});return[].concat([n[0]],o,[n[n.length-1]])};return we(l,a,"bucketSize"),l.x=function(e){return arguments.length?(n=e,l):n},l.y=function(e){return arguments.length?(i=e,l):i},l}function se(){var e=function(e){return e},a=function(e){return e},n=oe(),i=function(i){if(n.bucketSize()>=i.length)return i;var l=n(i.slice(1,i.length-1)),r=i[0],o=i[i.length-1],d=[].concat([r],l,[o]),s=e(r),c=a(r),g=l.map(function(n,l){var i=t.mean(d[l+1],e),r=t.mean(d[l+1],a),o=n.map(function(t){return[e(t),a(t)]}),g=o.map(function(e){return .5*xe((s-i)*(e[1]-c)-(s-e[0])*(r-c))}),h=g.indexOf(t.max(g)),u=o[h];return s=u[0],c=u[1],n[h]});return[].concat([i[0]],g,[i[i.length-1]])};return we(i,n,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(a=e,i):a},i}function ce(){var e=oe(),a=function(e){return e},n=function(n){if(e.bucketSize()>n.length)return n;var i=t.extent(n,a),l=e(n.slice(1,n.length-1)),r=l.map(function(e){var t={},n=!0,l=e.map(a),r=l.filter(function(e){return e===i[0]||e===i[1]}).map(function(e){return l.indexOf(e)})[0],o,d;return void 0===r?(l.forEach(function(e,a){void 0===t[e]&&(t[e]=0),t[e]++,t[e]>t[o]||void 0===o?(o=e,d=a,n=!0):t[e]===t[o]&&(n=!1)}),n?e[d]:e[pe(e.length/2)]):e[r]});return[].concat([n[0]],r,[n[n.length-1]])};return we(n,e,"bucketSize"),n.value=function(e){return arguments.length?(a=e,n):a},n}function ge(){var e=arguments;return function(t,a){for(var n=0,i=e.length;n<i;n++)if(null==e[n](t,a))return!1;return!0}}function he(e){switch(e){case Jt.BYTE:case Jt.UNSIGNED_BYTE:return 1;case Jt.SHORT:case Jt.UNSIGNED_SHORT:return 2;case Jt.FLOAT:return 4;default:throw new Error("Unknown type ".concat(e));}}function ue(e){switch(e){case Jt.BYTE:return Int8Array;case Jt.UNSIGNED_BYTE:return Uint8Array;case Jt.SHORT:return Int16Array;case Jt.UNSIGNED_SHORT:return Uint16Array;case Jt.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(e));}}var Se=function(e,t,a){var n=t[a];if("function"!=typeof n)throw new Error("Attempt to rebind ".concat(a," which isn't a function on the source object"));return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=n.apply(t,i);return r===t?e:r}},we=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=0,r=n,o;l<r.length;l++)o=r[l],e[o]=Se(e,t,o);return e},Ve=function(e){return function(t){return e.reduce(function(e,t){return e&&t(e)},t)}},ke=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=Ve(n),r=0,o=Object.keys(t);r<o.length;r++){var d=o[r],s=l(d);s&&(e[s]=Se(e,t,d))}return e},Ce=function(e){return e.map(function(e){return"string"==typeof e?new RegExp("^".concat(e,"$")):e})},Ae=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=Ce(t),function(e){return t.every(function(t){return!t.test(e)})&&e}},Te=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=Ce(t),function(e){return t.some(function(t){return t.test(e)})&&e}},De=function(e){return function(t){return e[t]}},_e=function(e){return e[0].toUpperCase()+e.slice(1)},Ie=function(e){return function(t){return e+_e(t)}},Ee=function(e,t,a,n){var i={sunday:0,monday:1,saturday:6},l=86400000,r=5*l,o={},d=function(t){return 0===e(t)||6===e(t)};return o.clampDown=function(a){if(a&&d(a)){var n=t.ceil(a);return e(n)===i.sunday?t.offset(n,-1):e(n)===i.monday?t.offset(n,-2):n}return a},o.clampUp=function(a){if(a&&d(a)){var n=t.floor(a);return e(n)===i.saturday?t.offset(n,2):e(n)===i.sunday?t.offset(n,1):n}return a},o.distance=function(e,t){e=o.clampUp(e),t=o.clampDown(t);var n=a.ceil(e);if(t<n)return t.getTime()-e.getTime();var i=n.getTime()-e.getTime(),d=a.ceil(t),s=d.getTime()-t.getTime(),c=fe((d.getTime()-n.getTime())/(7*l));return c*r+i-s},o.offset=function(e,i){var l=d(e)?o.clampUp(e):e;if(0===i)return l;var s=0>i,c=i,g=s?n.floor(l):a.ceil(l);if(c-=g.getTime()-l.getTime(),s&&0<c||0<i&&0>c)return new Date(l.getTime()+i);l=s?g:t.offset(g,2);var h=pe(c/r);return l=t.offset(l,7*h),c-=h*r,l=new Date(l.getTime()+c),l},o.copy=function(){return o},o},ze=86400000,Ne="00:00:00.000",Pe=function(e,t){var a=e.map(function(e){return ee(e,t)}).sort(function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:0}),n=ze-a.reduce(function(e,t){return e+t.lenghtInMs},0);return{totalTradingTimeInMiliseconds:n,nonTradingTimeRanges:a,totalTradingMillisecondsBetween:function(e,n){if(e.getTime()===n.getTime())return 0;if(t.dayInterval(e).getTime()!==t.dayInterval(n).getTime()&&t.getStartOfNextDay(e).getTime()!==n.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(e,"'; intervalEnd: '").concat(n,"'");var i=0,l=a.filter(function(a){return a.endTime===Ne||t.setTime(e,a.endTime)>=e}),r=q(l),o;try{for(r.s();!(o=r.n()).done;){var d=o.value,s=t.setTime(e,d.startTime),c=d.endTime===Ne?t.getStartOfNextDay(e):t.setTime(e,d.endTime);if(e<s&&n<s)return i+t.msInterval.count(e,n);if(e<s&&(i+=t.msInterval.count(e,s)),n<c)return i;e=c}}catch(e){r.e(e)}finally{r.f()}return i+t.msInterval.count(e,n)},offset:function(e,n){if(0===n)return[e,n];var i=t.msInterval.offset(e,n),l=0<n?a.filter(function(a){return t.setTime(e,a.startTime)>=e}):a.filter(function(a){return t.setTime(e,a.startTime)<e}).reverse();if(0===l.length)return[t.msInterval.offset(e,n),0];if(0<n){var r=q(l),o;try{for(r.s();!(o=r.n()).done;){var d=o.value,s=t.setTime(e,d.startTime);s<=i&&(n-=t.msInterval.count(e,s),e=d.endTime===Ne?t.getStartOfNextDay(e):t.setTime(e,d.endTime),i=t.msInterval.offset(e,n))}}catch(e){r.e(e)}finally{r.f()}n-=t.msInterval.count(e,i)}else{var c=q(l),g;try{for(c.s();!(g=c.n()).done;){var h=g.value,u=h.endTime===Ne?t.getStartOfNextDay(e):t.setTime(e,h.endTime);i<u&&(n+=t.msInterval.count(u,e)+1,e=t.msInterval.offset(t.setTime(e,h.startTime),-1),i=t.msInterval.offset(e,n))}}catch(e){c.e(e)}finally{c.f()}n+=t.msInterval.count(i,e)}if(0!==n)throw"tradingDay.offset was called with an offset that spans more than a day";return[i,n]}}},Be=function(e,t,a,n,i){var l={};return l.getTimeComponentArrayFromString=function(e){return[e.slice(0,2),e.slice(3,5),e.slice(6,8),e.slice(9,12)]},l.getTimeString=function(e){var t=a(e).map(function(e){return e.toString(10).padStart(2,"0")}),n=B(t,4),i=n[0],l=n[1],r=n[2],o=n[3];return"".concat(i,":").concat(l,":").concat(r,".").concat(o.padStart(3,"0"))},l.setTime=function(t,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=l.getTimeComponentArrayFromString(a),o=B(r,4),d=o[0],s=o[1],c=o[2],g=o[3];return i.offset(e(t,d,s,c,g),n)},l.getStartOfNextDay=function(e){return n.offset(n.floor(e),1)},l.getEndOfPreviousDay=function(e){return i.offset(n.floor(e),-1)},l.dayInterval=n,l.msInterval=i,l.getDay=t,l},Re=Be(function(e,t,a,n,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,a,n,i)},function(e){return e.getDay()},function(e){return[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},n.timeDay,n.timeMillisecond),Me=function(e,t){var a=function(t){return void 0===e[t]?[]:e[t]},n=[Pe(a("Sunday"),t),Pe(a("Monday"),t),Pe(a("Tuesday"),t),Pe(a("Wednesday"),t),Pe(a("Thursday"),t),Pe(a("Friday"),t),Pe(a("Saturday"),t)],i=n.reduce(function(e,t){return e+t.totalTradingTimeInMiliseconds},0);if(0===i)throw"Trading pattern must yield at least 1 ms of trading time";var l={tradingDays:n,totalTradingWeekMilliseconds:i};return l.clampUp=function(e){var a=n[t.getDay(e)],i=q(a.nonTradingTimeRanges),r;try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isInRange(e))return o.endTime===Ne?l.clampUp(t.getStartOfNextDay(e)):t.setTime(e,o.endTime)}}catch(e){i.e(e)}finally{i.f()}return e},l.clampDown=function(e){var a=n[t.getDay(e)],i=q(a.nonTradingTimeRanges),r;try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isInRange(e))return o.startTime===Ne?l.clampDown(t.getEndOfPreviousDay(e)):t.setTime(e,o.startTime,-1)}}catch(e){i.e(e)}finally{i.f()}return e},l.distance=function(e,a){if(e.getTime()===a.getTime())return 0;var n=e<=a?[e,a,1]:[a,e,-1],i=B(n,3),r=i[0],o=i[1],d=i[2];if(t.dayInterval(r).getTime()===t.dayInterval(o).getTime())return l.tradingDays[t.getDay(r)].totalTradingMillisecondsBetween(r,o);var s=l.tradingDays[t.getDay(r)].totalTradingMillisecondsBetween(r,t.dayInterval.offset(t.dayInterval(r),1))+l.tradingDays[t.getDay(o)].totalTradingMillisecondsBetween(t.dayInterval(o),o);return 1===t.dayInterval.count(r,o)?s:(r=t.dayInterval.offset(t.dayInterval(r),1),o=t.dayInterval(o),d*t.dayInterval.range(r,o).reduce(function(e,a,n,i){var r=n<i.length-1?i[n+1]:t.dayInterval.offset(a,1),o=l.tradingDays[t.getDay(a)];return e+=r-a!==ze?o.totalTradingMillisecondsBetween(a,r):o.totalTradingTimeInMiliseconds},s))},l.offset=function(e,a){e=0<=a?l.clampUp(e):l.clampDown(e);var n=function(e){return t.dayInterval.offset(e)-t.dayInterval(e)!==ze},i=function(e,a,n){if(0>n){var i=t.dayInterval(a),r=e.totalTradingMillisecondsBetween(i,a);return xe(n)<=r?e.offset(a,n):[l.clampDown(t.msInterval.offset(i,-1)),n+r+1]}var o=t.getStartOfNextDay(a),d=e.totalTradingMillisecondsBetween(a,o);return n<d?e.offset(a,n):[l.clampUp(o),n-d]};if(0===a)return e;var r=0>a?function(e,a,n){return[l.clampDown(t.dayInterval.offset(e,-1)),a+n]}:function(e,a,n){return[l.clampUp(t.dayInterval.offset(e)),a-n]},o=l.tradingDays[t.getDay(e)],d=i(o,e,a),s=B(d,2);for(e=s[0],a=s[1];0!==a;)if(o=l.tradingDays[t.getDay(e)],n(e)){var c=i(o,e,a),g=B(c,2);e=g[0],a=g[1]}else{var h=xe(a)>=o.totalTradingTimeInMiliseconds?r(e,a,o.totalTradingTimeInMiliseconds):i(o,e,a),u=B(h,2);e=u[0],a=u[1]}return e},l.copy=function(){return l},l},Ye=Be(function(e,t,a,n,i){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,a,n,i))},function(e){return e.getUTCDay()},function(e){return[e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]},n.utcDay,n.utcMillisecond),Le=function(e){return"function"==typeof e?e:function(){return e}},Oe=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s="vertical",c=Le(3),g=function(i){var g=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),h=n(e,r),u=l(e,r),f=o(e,r),p=c(e,r)/2;"vertical"===s?(g.moveTo(i,u),g.lineTo(i,h),g.moveTo(i,d),g.lineTo(i-p,d),g.moveTo(i,f),g.lineTo(i+p,f)):(g.moveTo(u,i),g.lineTo(h,i),g.moveTo(d,i),g.lineTo(d,i+p),g.moveTo(f,i),g.lineTo(f,i-p))}),e?null:g.toString()};return g.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],g):e},g.x=function(){return arguments.length?(t=Le(0>=arguments.length?void 0:arguments[0]),g):t},g.open=function(){return arguments.length?(a=Le(0>=arguments.length?void 0:arguments[0]),g):a},g.high=function(){return arguments.length?(n=Le(0>=arguments.length?void 0:arguments[0]),g):n},g.low=function(){return arguments.length?(l=Le(0>=arguments.length?void 0:arguments[0]),g):l},g.close=function(){return arguments.length?(o=Le(0>=arguments.length?void 0:arguments[0]),g):o},g.width=function(){return arguments.length?(c=Le(0>=arguments.length?void 0:arguments[0]),g):c},g.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],g):s},g},We=function(){var e=null,t=function(e){return e.x},a=function(e){return e.y},n="center",i="center",l=function(e){return e.height},o=Le(3),d=function(d,s){var c=e||r.path();return d.forEach(function(e,r){var d=t.call(this,e,s||r),g=a.call(this,e,s||r),h=l.call(this,e,s||r),u=o.call(this,e,s||r),f;switch(n){case"left":f=u;break;case"right":f=0;break;case"center":f=u/2;break;default:throw new Error("Invalid horizontal alignment "+n);}var p;switch(i){case"bottom":p=-h;break;case"top":p=0;break;case"center":p=h/2;break;default:throw new Error("Invalid vertical alignment "+i);}c.rect(d-f,g-p,u,h)},this),e?null:c.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.x=function(){return arguments.length?(t=Le(0>=arguments.length?void 0:arguments[0]),d):t},d.y=function(){return arguments.length?(a=Le(0>=arguments.length?void 0:arguments[0]),d):a},d.width=function(){return arguments.length?(o=Le(0>=arguments.length?void 0:arguments[0]),d):o},d.horizontalAlign=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.height=function(){return arguments.length?(l=Le(0>=arguments.length?void 0:arguments[0]),d):l},d.verticalAlign=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d},He=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s=Le(3),c=function(i){var c=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),g=n(e,r),h=l(e,r),u=o(e,r),f=s(e,r);c.rect(i-f/2,d,f,u-d),c.moveTo(i,me(u,d)),c.lineTo(i,g),c.moveTo(i,ve(u,d)),c.lineTo(i,h)}),e?null:c.toString()};return c.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.x=function(){return arguments.length?(t=Le(0>=arguments.length?void 0:arguments[0]),c):t},c.open=function(){return arguments.length?(a=Le(0>=arguments.length?void 0:arguments[0]),c):a},c.high=function(){return arguments.length?(n=Le(0>=arguments.length?void 0:arguments[0]),c):n},c.low=function(){return arguments.length?(l=Le(0>=arguments.length?void 0:arguments[0]),c):l},c.close=function(){return arguments.length?(o=Le(0>=arguments.length?void 0:arguments[0]),c):o},c.width=function(){return arguments.length?(s=Le(0>=arguments.length?void 0:arguments[0]),c):s},c},Fe=function(){var e=null,t=function(e){return e.value},a=function(e){return e.median},n=function(e){return e.upperQuartile},l=function(e){return e.lowerQuartile},o=function(e){return e.high},s=function(e){return e.low},c="vertical",g=Le(5),h=Le(.5),u=function(i){var u=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=g(e,r),f=d/2,p=d*h(e,r),m=p/2,y=o(e,r),b=n(e,r),v=a(e,r),x=l(e,r),S=s(e,r),w=x-b;"vertical"===c?(u.moveTo(i-m,y),u.lineTo(i+m,y),u.moveTo(i,y),u.lineTo(i,b),u.rect(i-f,b,d,w),u.moveTo(i-f,v),u.lineTo(i+f,v),u.moveTo(i,x),u.lineTo(i,S),u.moveTo(i-m,S),u.lineTo(i+m,S)):(u.moveTo(S,i-m),u.lineTo(S,i+m),u.moveTo(S,i),u.lineTo(x,i),u.rect(x,i-f,-w,d),u.moveTo(v,i-f),u.lineTo(v,i+f),u.moveTo(b,i),u.lineTo(y,i),u.moveTo(y,i-m),u.lineTo(y,i+m))}),e?null:u.toString()};return u.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],u):e},u.value=function(){return arguments.length?(t=Le(0>=arguments.length?void 0:arguments[0]),u):t},u.median=function(){return arguments.length?(a=Le(0>=arguments.length?void 0:arguments[0]),u):a},u.upperQuartile=function(){return arguments.length?(n=Le(0>=arguments.length?void 0:arguments[0]),u):n},u.lowerQuartile=function(){return arguments.length?(l=Le(0>=arguments.length?void 0:arguments[0]),u):l},u.high=function(){return arguments.length?(o=Le(0>=arguments.length?void 0:arguments[0]),u):o},u.low=function(){return arguments.length?(s=Le(0>=arguments.length?void 0:arguments[0]),u):s},u.width=function(){return arguments.length?(g=Le(0>=arguments.length?void 0:arguments[0]),u):g},u.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u.cap=function(){return arguments.length?(h=Le(0>=arguments.length?void 0:arguments[0]),u):h},u},Ue=function(){var e=null,t=function(e){return e.x},a=function(e){return e.high},n=function(e){return e.low},l="vertical",o=Le(5),d=function(i){var s=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=o(e,r),c=d/2,g=a(e,r),h=n(e,r);"vertical"===l?(s.moveTo(i-c,g),s.lineTo(i+c,g),s.moveTo(i,g),s.lineTo(i,h),s.moveTo(i-c,h),s.lineTo(i+c,h)):(s.moveTo(h,i-c),s.lineTo(h,i+c),s.moveTo(h,i),s.lineTo(g,i),s.moveTo(g,i-c),s.lineTo(g,i+c))}),e?null:s.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.value=function(){return arguments.length?(t=Le(0>=arguments.length?void 0:arguments[0]),d):t},d.high=function(){return arguments.length?(a=Le(0>=arguments.length?void 0:arguments[0]),d):a},d.low=function(){return arguments.length?(n=Le(0>=arguments.length?void 0:arguments[0]),d):n},d.width=function(){return arguments.length?(o=Le(0>=arguments.length?void 0:arguments[0]),d):o},d.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d},Ge=function(e){return"function"==typeof e?e:function(){return e}},qe=1e-6,Qe=function(e){return e.selection()!==e},Xe=function(e,t){e=e||"g";var a=function(e,t){return t},n=null,i=function(i,l){l=l||function(e){return e};var r=i.selection(),o=Qe(i)?i:null,d=r.selectChildren(null==t?e:"".concat(e,".").concat(t)),s=d.data(l,a),c=s.enter().append(e).attr("class",t),g=s.exit();s=s.merge(c);var h=o||n;return h&&(s=s.transition(h).style("opacity",1),c.style("opacity",qe),g=g.transition(h).style("opacity",qe)),g.remove(),s.enter=function(){return c},s.exit=function(){return g},s};return i.element=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.className=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i.transition=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},je=function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)},Ze=function(e,t){if(je(e,t)){var a=ve(e.x,t.x),n=me(e.x+e.width,t.x+t.width),i=ve(e.y,t.y),l=me(e.y+e.height,t.y+t.height);return(n-a)*(l-i)}return 0},Ke=function(e,a){return t.sum(e.map(function(t,n){return a===n?0:Ze(e[a],t)}))},Je=function(e,t,a,n,i){return{x:e,y:t,width:a,height:n,location:i}},$e=function(e){var t=e.x,a=e.y,n=e.width,i=e.height;return[Je(t,a,n,i,"bottom-right"),Je(t-n,a,n,i,"bottom-left"),Je(t-n,a-i,n,i,"top-left"),Je(t,a-i,n,i,"top-right"),Je(t,a-i/2,n,i,"middle-right"),Je(t-n/2,a,n,i,"bottom-center"),Je(t-n,a-i/2,n,i,"middle-left"),Je(t-n/2,a-i,n,i,"top-center")]},et=function(e,t,a){return[].concat(M(e.slice(0,t)),[a],M(e.slice(t+1)))},tt=function(e,t){return e<t},at=function e(){var a=null,n=tt,l=function(){return 0},r=function(e,t){return a-l(d[t],t,d)+l(e,t,et(d,t,e))},o=function i(o,s){a||(a=t.sum(d.map(function(e,t){return l(e,t,d)})));var c=r(o,s);return n(c,a)?e().locationScore(l).winningScore(n).score(c).rectangles(et(d,s,o)):i},d;return o.rectangles=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],o):d},o.score=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.winningScore=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.locationScore=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o},nt=function(e){return e[it(e)]},it=function(e){return pe(Math.random()*e.length)},lt=function(e,a){return e[t.scan(e,a)]},rt=function(e){return"function"==typeof e?e:function(){return e}},ot=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},dt=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},st=function(){var e=function(){return 0},t=function(e){return e.x},n=function(e){return e.y},l="center",r=function(){return 5},o="vertical",s=dt({decorate:function(){},defined:function(a,l){return ge(e,t,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=r(a,d),c=ot(l,i),g=s.xScale(),h=s.yScale();if("vertical"===o){var u=h(n(a,d),d),f=h(e(a,d),d),p=g(t(a,d),d)+c;return{d:a,x:p,y:u,y0:f,width:i,height:u-f,origin:[p,u],baseOrigin:[p,f],transposedX:p,transposedY:u}}var m=g(n(a,d),d),y=g(e(a,d),d),b=h(t(a,d),d)+c;return{d:a,x:b,y:m,y0:y,width:i,height:m-y,origin:[m,b],baseOrigin:[y,b],transposedX:m,transposedY:b}},s.xValues=function(){return"vertical"===o?[t]:[e,n]},s.yValues=function(){return"vertical"===o?[e,n]:[t]},s.baseValue=function(){return arguments.length?(e=rt(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(t=rt(0>=arguments.length?void 0:arguments[0]),s):t},s.mainValue=function(){return arguments.length?(n=rt(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(r=rt(0>=arguments.length?void 0:arguments[0]),s):r},s.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],s):o},s},ct={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},gt=function(){var e=st(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=Xe("path","line"),n=function(n){Qe(n)&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=a(o.select(l[i]),[n]);r.enter().attr("fill","none").attr("stroke",ct.black),r.attr("d",t),e.decorate()(r,n,i)})};return ke(n,e,Ae("baseValue","bandwidth","align")),we(n,a,"key"),we(n,t,"curve"),n},ht=function(){var e=st(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=function(a){var n=t.context();n.beginPath(),n.strokeStyle=ct.black,n.fillStyle="transparent",e.decorate()(n,a),t.defined(e.defined())(a),n.fill(),n.stroke(),n.closePath()};return ke(a,e,Ae("baseValue","bandwidth","align")),we(a,t,"curve","context"),a},ut=function(){var e=[0,1],t=[-1,1],a=function(){};return a.domain=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.range=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a},ft=function(){var e={},t={},a=null,n=function(n,i){var l=n.context();Object.keys(e).forEach(function(t){var a=e[t];if("function"!=typeof a)throw new Error("Expected an attribute for ".concat(t,", found ").concat(a));var r=l.getAttribLocation(i,t);a.location(r)(n)}),Object.keys(t).forEach(function(e){var a=t[e];if("function"!=typeof a)throw new Error("Expected a uniform for ".concat(e,", found ").concat(a));var r=l.getUniformLocation(i,e);a.location(r)(n)}),null!==a&&a(n)};return n.flush=function(){Object.values(e).forEach(function(e){return e.clear()}),Object.values(t).forEach(function(e){return e.clear()}),null!==a&&a.clear()},n.attribute=function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return 1===a.length?e[a[0]]:(e[a[0]]=a[1],n)},n.uniform=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return 1===a.length?t[a[0]]:(t[a[0]]=a[1],n)},n.elementIndices=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n):a},n},pt=function(e){var t=-1,a=e,n=!0,i=function(e){if(n){var i=e.context();if(Array.isArray(a))switch(a.length){case 1:i.uniform1fv(t,a);break;case 2:i.uniform2fv(t,a);break;case 3:i.uniform3fv(t,a);break;case 4:i.uniform4fv(t,a);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(a.length," provided."));}else i.uniform1f(t,a);n=!1}};return i.clear=function(){n=!0},i.location=function(){return arguments.length?(t!==(0>=arguments.length?void 0:arguments[0])&&(t=0>=arguments.length?void 0:arguments[0],n=!0),i):t},i.data=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},i},mt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},yt=function(){function e(e,t,a){return!e||f||t!==o||a!==d}function t(e,t){var i=a(e,n.VERTEX_SHADER),l=a(t,n.FRAGMENT_SHADER),r=n.createProgram();if(n.attachShader(r,i),n.attachShader(r,l),n.linkProgram(r),h&&!n.getProgramParameter(r,n.LINK_STATUS)){var o=n.getProgramInfoLog(r);throw n.deleteProgram(r),new Error("Failed to link program : ".concat(o,"\n            Vertex Shader : ").concat(e,"\n            Fragment Shader : ").concat(t))}return r}function a(e,t){var a=n.createShader(t);if(n.shaderSource(a,e),n.compileShader(a),h&&!n.getShaderParameter(a,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(a);throw n.deleteShader(a),new Error("Failed to compile shader : ".concat(i,"\n            Shader : ").concat(e))}return a}var n=null,i=null,l=null,r=null,o=null,d=null,s=mt.TRIANGLES,c=0,g=ft(),h=!1,u=null,f=!0,p=1,m=function a(h){if(null!=n){var m=l(),y=r();if(e(i,m,y)&&(i=t(m,y),o=m,d=y,f=!1),n.useProgram(i),g.uniform("uScreen",pt([n.canvas.width/p,n.canvas.height/p])),g(a,i),0===c)null==g.elementIndices()?n.drawArrays(s,0,h):n.drawElements(s,h,n.UNSIGNED_SHORT,0);else if(null==g.elementIndices())u.drawArraysInstancedANGLE(s,0,c,h);else{var b=g.elementIndices().data().length;if(c!==b)throw new Error("Expected elementIndices length ".concat(b)+" to match subInstanceCount ".concat(c,"."));u.drawElementsInstancedANGLE(s,c,n.UNSIGNED_SHORT,0,h)}}};return m.extInstancedArrays=function(){return u},m.context=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.length?((null==t[0]||t[0]!==n)&&(g.flush(),f=!0),null!=t[0]&&t[0]!==n&&(u=t[0].getExtension("ANGLE_instanced_arrays")),n=t[0],m):n},m.buffers=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],m):g},m.vertexShader=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],m):l},m.fragmentShader=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],m):r},m.mode=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],m):s},m.subInstanceCount=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],m):c},m.debug=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],m):h},m.pixelRatio=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],m):p},m},bt=function(e){function t(e,t){e.push(t)}function a(e,t,a){var n=e.indexOf(a);e.splice(0<=n?n:e.length,0,t)}function n(e,t){var a=e.indexOf(t);-1===a&&e.push(t)}var i=[],l=[],r=function(){return e(i.join("\n"),l.join("\n"))};return r.appendHeader=function(e){return t(i,e),r},r.insertHeader=function(e,t){return a(i,e,t),r},r.appendHeaderIfNotExists=function(e){return n(i,e),r},r.appendBody=function(e){return t(l,e),r},r.insertBody=function(e,t){return a(l,e,t),r},r.appendBodyIfNotExists=function(e){return n(l,e),r},r},vt=function(e,t){return"\nprecision mediump float;\nfloat inf = 1.0 / 0.0;\n".concat(e,"\nvoid main() {\n    ").concat(t,"\n}")},xt=function(e,t){return"\nprecision mediump float;\n".concat(e,"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    ").concat(t,"\n}")},St={header:"attribute vec4 aFillColor;\n             varying vec4 vFillColor;",body:"vFillColor = aFillColor;"},wt={header:"attribute vec4 aStrokeColor;\n             varying vec4 vStrokeColor;",body:"vStrokeColor = aStrokeColor;"},Vt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 2.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},kt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 4.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},Ct={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},At={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},Tt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},Dt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},_t={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 5.0);\n        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},It={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n         (isPositiveY * isExtremeY * aLowValue) +\n         (isPositiveY * isNotExtremeY * aCloseValue) +\n         (isNotPositiveY * isNotExtremeY * aOpenValue) +\n         (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);\n        float lineWidthYDirection = isNotExtremeY * sign(aCloseValue - aOpenValue) * aCorner.y;\n\n        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},Et={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n            (isPositiveY * isExtremeY * aLowValue) +\n            (isPositiveY * isNotExtremeY * aCloseValue) +\n            (isNotPositiveY * isNotExtremeY * aOpenValue) +\n            (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = isExtremeY * aCorner.z;\n        float lineWidthYDirection = isNotExtremeY * aCorner.z;\n\n        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},zt={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aMainValue;\n        attribute float aBaseValue;\n        attribute vec2 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isBaseline = (1.0 - aCorner.y) / 2.0;\n        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);\n\n        float xModifier = aCorner.x * (aBandwidth) / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},Nt={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isLow = (aCorner.y + 1.0) / 2.0;\n        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;\n\n        float isEdgeCorner = abs(aCorner.x);\n        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;\n        float lineWidthYDirection = isEdgeCorner * aCorner.z;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);\n        float yModifier = (uStrokeWidth * lineWidthYDirection);"},Pt={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aBaseValue;\n        attribute float aBaseNextValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        varying float vDefined;\n\n        float when_lt(float a, float b) {\n            return max(sign(b - a), 0.0);\n        }\n\n        float and(float a, float b) {\n            return a * b;\n        }",body:"\n        vDefined = aDefined * aDefinedNext;\n        gl_Position = vec4(0, 0, 0, 1);\n\n        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);\n        float useIntercept = and(aCorner.z, hasIntercepted);\n\n        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);\n        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);\n\n        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);\n        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);\n\n        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);\n        float interceptXValue = (y0Constant - yConstant) / denominator;\n        float interceptYValue = (yGradient * interceptXValue) + yConstant;\n\n        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);\n\n        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));\n        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));\n        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));"},Bt={header:"\n        attribute vec4 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aCapWidth;\n        attribute float aHighValue;\n        attribute float aUpperQuartileValue;\n        attribute float aMedianValue;\n        attribute float aLowerQuartileValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;\n    ",body:"\n        vDefined = aDefined;\n        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n\n        float isNonZeroY = abs(sign(aCorner.y));\n        float isZeroY = 1.0 - isNonZeroY;\n\n        float isQuartileY = isNotExtremeY * isNonZeroY;\n\n        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;\n        float isNegativeY = 1.0 - isPositiveY;\n\n        float yValue =\n          (isExtremeY * isNegativeY) * aHighValue +\n          (isQuartileY * isNegativeY) * aUpperQuartileValue +\n          isZeroY * aMedianValue +\n          (isQuartileY * isPositiveY) * aLowerQuartileValue +\n          (isExtremeY * isPositiveY) * aLowValue;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float isHorizontal = aCorner.w;\n        float isVertical = 1.0 - isHorizontal;\n\n        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;\n\n        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;\n        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;"},Rt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float distance = length(2.0 * gl_PointCoord - 1.0);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Mt={header:"\n        varying float vSize;\n        varying float vDefined;\n\n        // anterior, exterior angles\n        float an = 0.628319;\n        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)\n        float en = 0.952000;\n        vec2 ecs = vec2(0.580055, 0.814577);\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        p -= acs;\n        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);\n        float d = length(p) * sign(p.x);\n\n        float distance = 1.0 + d;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Yt={header:"\n        varying float vSize;\n        varying float vDefined;\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float an = 3.141593 / 3.0;\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        // box\n        vec2 d = abs(p) - vec2(0.9, 0.35);\n        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n\n        float distance = 1.0 + sdf;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Lt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);"},Ot={header:"\n        varying float vSize;\n        varying float vDefined;\n        float a = 0.6;\n        float b = 1.0;\n    ",body:"\n        if (vDefined < 0.5) {\n            discard;\n        }\n\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n\n        float x = abs(pointCoordTransform.x);\n        float y = abs(pointCoordTransform.y);\n\n        float X = (a * b * x) / (a * y + b * x);\n        float Y = (a * b * y) / (a * y + b * x);\n\n        float distance = length(vec2(x, y)) / length(vec2(X, Y));\n\n        if (distance > 1.0) {\n            discard;\n        }\n    "},Wt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));\n        float bottomEdgeDistance = pointCoordTransform.y + 0.5;\n        float distance = max(topEdgesDistance, bottomEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},Ht={header:"\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;\n        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float distance = max(innerCornerDistance, outerEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},Ft={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Ut={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Gt={header:"\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);"},qt={header:"\n        varying float vDefined;\n    ",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},Qt={header:"varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }"},Xt={header:"varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n\n        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},jt={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},Zt={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},Kt=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Pt.header).appendBody(Pt.body),t.appendHeader(Gt.header).appendBody(Gt.body),{vertex:function(){return e},fragment:function(){return t}}},Jt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126},$t=function(){var e=-1,t=null,a=1,n=Jt.FLOAT,i=!1,l=0,r=0,o=null,d=function(d){var s=d.context();null==t&&(t=s.createBuffer()),s.bindBuffer(s.ARRAY_BUFFER,t),s.vertexAttribPointer(e,a,n,i,l,r),s.enableVertexAttribArray(e);var c=d.extInstancedArrays();c.vertexAttribDivisorANGLE(e,null==o?0<d.subInstanceCount()?1:0:o)};return d.location=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.buffer=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},d.size=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.normalized=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d.stride=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d.offset=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],d):r},d.divisor=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],d):o},d},ea=function(){var e=Jt.FLOAT,t=new Float32Array(0),a=function(a){var n=ue(e);return t.length>a?t=new n(t.buffer,0,a):t.length!==a&&(t=new n(a)),t};return a.type=function(){if(!arguments.length)return e;if(e!==(0>=arguments.length?void 0:arguments[0])){e=0>=arguments.length?void 0:arguments[0];var n=ue(e);t=new n(0)}return a},a},ta=function(){var e=!0,t=1,a=Jt.FLOAT,n=ea(),l=function(e){return e},r=null,o=function(){var o=r.length,d=n.type(a)(o*t);if(1<t)for(var s=0,c;s<o;s++){if(c=l(r[s],s),c.length!==t)throw new Error("Expected components array of size ".concat(t,", recieved array with length ").concat(c.length,"."));for(var g=0;g<t;g++)d[s*t+g]=c[g]}else for(var h=0,u;h<o;h++){if(u=l(r[h],h),Array.isArray(u))throw new Error("Expected a single component value, recieved array with length ".concat(u.length,"."));d[h]=u}return e=!1,d};return o.dirty=function(){return e},o.clear=function(){e=!0},o.size=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e=!0,o):t},o.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e=!0,o):a},o.arrayViewFactory=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e=!0,o):n},o.value=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e=!0,o):l},o.data=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],e=!0,o):r},o},aa=function(){var e=$t(),t=ta(),a=function a(n){if(e.size(a.size()).type(a.type()),e(n),!!t.dirty()){var i=t(),l=n.context();l.bindBuffer(l.ARRAY_BUFFER,e.buffer()),l.bufferData(l.ARRAY_BUFFER,i,l.DYNAMIC_DRAW)}};return a.clear=function(){e.buffer(null),t.clear()},we(a,e,"normalized","location","divisor"),we(a,t,"data","value","size","type"),a},na=function(e,t,a,n){for(var i=arguments.length,l=Array(4<i?i-4:0),r=4;r<i;r++)l[r-4]=arguments[r];e[t]=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var o=a[n].apply(a,l.concat(i));return o===a?e:o}},ia=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(6),t=ut(),a=ut(),n=function(){},i=aa().divisor(0).size(3).type(Jt.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);e.buffers().attribute("aCorner",i);var l=function(i){var l=Kt();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e(i-1)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},we(l,e,"context","pixelRatio"),na(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(l,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),na(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),na(l,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),na(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),na(l,"baseNextValueAttribute",e.buffers(),"attribute","aBaseNextValue"),na(l,"definedAttribute",e.buffers(),"attribute","aDefined"),na(l,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),l},la=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Vt.header).appendBody(Vt.body),t.appendHeader(Rt.header).appendBody(Rt.body),{vertex:function(){return e},fragment:function(){return t}}},ra=function(){var e=yt().mode(mt.POINTS),t=ut(),a=ut(),n=la(),i=function(){},l=function(l){e.vertexShader(n.vertex()).fragmentShader(n.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e(l)};return l.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],l):i},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},we(l,e,"context","pixelRatio"),na(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),na(l,"sizeAttribute",e.buffers(),"attribute","aSize"),na(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},oa=function(){var e=1,t=function(t){t.buffers().uniform("uStrokeWidth",pt(e))};return t.lineWidth=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},da=function(e){var t=null,a=e,n=!0,i=function(e){var i=e.context();null==t&&(t=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),n&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),i.STATIC_DRAW),n=!1)};return i.clear=function(){t=null,n=!0},i.data=function(){return arguments.length?(n=!0,a=0>=arguments.length?void 0:arguments[0],i):a},i},sa=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(6),t=ut(),a=ut(),n=function(){},i=oa(),l=aa().divisor(0).size(4).type(Jt.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);e.buffers().elementIndices(da([0,1,2,2,3,0])).attribute("aCorner",l);var r=function(l){var r=bt(vt),o=bt(xt);e.vertexShader(r).fragmentShader(o),r.appendHeader("\n            attribute vec4 aCorner;\n            attribute float aCrossValue;\n            attribute float aCrossNextValue;\n            attribute float aMainValue;\n            attribute float aMainNextValue;\n            attribute float aDefined;\n            attribute float aDefinedNext;\n\n            uniform float uStrokeWidth;\n            uniform vec2 uScreen;\n\n            varying float vLength;\n            varying vec2 vPosition;\n        "),r.appendBody("\n            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);\n            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);\n        "),t(e,"value",0),t(e,"nextValue",0),a(e,"value",1),a(e,"nextValue",1),r.appendBody("\n            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;\n\n            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);\n            vec2 normal = vec2(direction.y, -direction.x);\n            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));\n            \n            padding *= aDefined * aDefinedNext;\n            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;\n\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\n            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));\n            vPosition = aCorner.xy * (uStrokeWidth / 2.0);\n            vPosition.x += aCorner[3] * vLength;\n        "),o.appendHeader("\n            uniform float uStrokeWidth;\n            varying float vLength;\n            varying vec2 vPosition;\n\n            float canFill = 0.0;\n            float canStroke = 1.0;\n        "),o.appendBody("\n            vec2 position = vPosition;\n            position.x -= clamp(position.x, 0.0, vLength);\n            float sdf = length(position) - uStrokeWidth / 2.0;\n            if (sdf > 0.5) {\n                discard;\n            }\n        "),i(e),n(e),e(l-1)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,e,"context","pixelRatio"),we(r,i,"lineWidth"),na(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(r,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),na(r,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),na(r,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),na(r,"definedAttribute",e.buffers(),"attribute","aDefined"),na(r,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),r},ca=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Et.header).appendBody(Et.body),t.appendHeader(Ut.header).appendBody(Ut.body),{vertex:function(){return e},fragment:function(){return t}}},ga=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(18),t=ut(),a=ut(),n=oa(),i=function(){},l=aa().divisor(0).size(3).type(Jt.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);e.buffers().elementIndices(da([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",l);var r=function(l){var r=ca();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,e,"context","pixelRatio"),we(r,n,"lineWidth"),na(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),na(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),na(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),na(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),na(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),na(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ha=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(zt.header).appendBody(zt.body),t.appendHeader(Xt.header).appendBody(Xt.body),{vertex:function(){return e},fragment:function(){return t}}},ua=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(6),t=ut(),a=ut(),n=function(){},i=aa().divisor(0).size(2).type(Jt.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);e.buffers().elementIndices(da([0,1,2,0,1,3])).attribute("aCorner",i);var l=function(i){var l=ha();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n        "),n(e),e(i)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},we(l,e,"context","pixelRatio"),na(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),na(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),na(l,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),na(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},fa=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Nt.header).appendBody(Nt.body),t.appendHeader(Qt.header).appendBody(Qt.body),{vertex:function(){return e},fragment:function(){return t}}},pa=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(18),t=ut(),a=ut(),n=function(){},i=oa(),l=aa().divisor(0).size(3).type(Jt.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);e.buffers().elementIndices(da([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",l);var r=function(l){var r=fa();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n                gl_Position.x += xModifier / uScreen.x * 2.0;\n                gl_Position.y += yModifier / uScreen.y * 2.0;\n            "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,e,"context","pixelRatio"),we(r,i,"lineWidth"),na(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),na(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),na(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),na(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ma=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(It.header).appendBody(It.body),t.appendHeader(Ft.header).appendBody(Ft.body),{vertex:function(){return e},fragment:function(){return t}}},ya=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(12),t=ut(),a=ut(),n=oa(),i=function(){},l=aa().divisor(0).size(3).type(Jt.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);e.buffers().elementIndices(da([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",l);var r=function(l){var r=ma();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,e,"context","pixelRatio"),we(r,n,"lineWidth"),na(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),na(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),na(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),na(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),na(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),na(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ba=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Bt.header).appendBody(Bt.body),t.appendHeader(qt.header).appendBody(qt.body),{vertex:function(){return e},fragment:function(){return t}}},va=function(){var e=yt().mode(mt.TRIANGLES).subInstanceCount(54),t=ut(),a=ut(),n=function(){},i=oa(),l=aa().divisor(0).size(4).type(Jt.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);e.buffers().elementIndices(da([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",l);var r=function(l){var r=ba();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n            gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},we(r,e,"context","pixelRatio"),we(r,i,"lineWidth"),na(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),na(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),na(r,"upperQuartileValueAttribute",e.buffers(),"attribute","aUpperQuartileValue"),na(r,"medianValueAttribute",e.buffers(),"attribute","aMedianValue"),na(r,"lowerQuartileValueAttribute",e.buffers(),"attribute","aLowerQuartileValue"),na(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),na(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),na(r,"capAttribute",e.buffers(),"attribute","aCapWidth"),na(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},xa=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0<e||0>t)throw new Error("Offset values (".concat(e," & ").concat(t,") must straddle 0 "));var a=$t(),n=ta(),i=function i(l){var r=i.size()*he(i.type()),o=xe(e)*r;if(a.offset(o).size(i.size()).type(i.type()),a(l),!!n.dirty()){var d=n(),s=o+d.length*he(i.type())+t*r,c=l.context();c.bindBuffer(c.ARRAY_BUFFER,a.buffer()),c.bufferData(c.ARRAY_BUFFER,s,c.DYNAMIC_DRAW),c.bufferSubData(c.ARRAY_BUFFER,o,d)}};return i.offset=function(n){if(e>n||n>t)throw new Error("Requested offset ".concat(n," exceeds bounds (").concat(e," & ").concat(t,") "));var l=function(t){a.offset((n-e)*i.size()*he(i.type())),a(t)};return we(l,i,"clear","location"),l},i.clear=function(){a.buffer(null),n.clear()},we(i,a,"normalized","location","divisor"),we(i,n,"data","value","size","type"),i},Sa=function(){var e=ut(),t=function(e){return"linear".concat(e)},a=function a(n,i,l){n.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Scale;")).appendBody("".concat(i," = ").concat(i," + ").concat(t(l),"Offset;")).appendBody("".concat(i," = ").concat(i," * ").concat(t(l),"Scale;"));var r=e.domain()[1]-e.domain()[0],o=e.range()[1]-e.range()[0],d=e.range()[0]*(r/o)-e.domain()[0],s=[0,0,0,0],a=[1,1,1,1];s[l]=d,a[l]=o/r,n.buffers().uniform("".concat(t(l),"Offset"),pt(s)).uniform("".concat(t(l),"Scale"),pt(a))};return ke(a,e),a},wa=function(){function e(e,t){var a=Math.log10;return a(e)/a(t)}var t=ut(),a=10,n=function(e){return"log".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * clamp(log(").concat(r,") / log(").concat(n(o),"Base), -inf, inf))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Base;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],g=c/s,h=t.range()[0]-g*e(t.domain()[0],a),u=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];u[o]=h,i[o]=g,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),pt(u)).uniform("".concat(n(o),"Scale"),pt(i)).uniform("".concat(n(o),"Include"),pt(f)).uniform("".concat(n(o),"Base"),pt(a))};return i.base=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},ke(i,t),i},Va=function(){function e(t,a){var e=Math.pow,n=Math.sign;return n(t)*e(xe(t),a)}var t=ut(),a=1,n=function(e){return"pow".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * sign(").concat(r,") * pow(abs(").concat(r,"), vec4(").concat(n(o),"Exp)))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Exp;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],g=c/s,h=t.range()[0]-g*e(t.domain()[0],a),u=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];u[o]=h,i[o]=g,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),pt(u)).uniform("".concat(n(o),"Scale"),pt(i)).uniform("".concat(n(o),"Include"),pt(f)).uniform("".concat(n(o),"Exp"),pt(a))};return i.exponent=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},ke(i,t),i},ka=a.scaleLinear().copy.toString(),Ca=a.scaleLog().copy.toString(),Aa=a.scalePow().copy.toString(),Ta=a.scaleTime().copy.toString(),Da=a.scaleIdentity(),_a=Date.now(),Ia=function(e){return e-_a},Ea=function(e){switch(e.copy.toString()){case ka:return{scale:Da,webglScale:Sa().domain(e.domain())};case Ta:return{scale:Ia,webglScale:Sa().domain(e.domain().map(Ia))};case Ca:return{scale:Da,webglScale:wa().domain(e.domain()).base(e.base())};case Aa:return{scale:Da,webglScale:Va().domain(e.domain()).exponent(e.exponent())};default:return{scale:e.copy(),webglScale:Sa().domain(e.range())};}},za=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(At.header).appendBody(At.body),t.appendHeader(Lt.header).appendBody(Lt.body),{vertex:function(){return e},fragment:function(){return t}}},Na=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Dt.header).appendBody(Dt.body),t.appendHeader(Wt.header).appendBody(Wt.body),{vertex:function(){return e},fragment:function(){return t}}},Pa=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(_t.header).appendBody(_t.body),t.appendHeader(Ht.header).appendBody(Ht.body),{vertex:function(){return e},fragment:function(){return t}}},Ba=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Tt.header).appendBody(Tt.body),t.appendHeader(Ot.header).appendBody(Ot.body),{vertex:function(){return e},fragment:function(){return t}}},Ra=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(kt.header).appendBody(kt.body),t.appendHeader(Mt.header).appendBody(Mt.body),{vertex:function(){return e},fragment:function(){return t}}},Ma=function(){var e=bt(vt),t=bt(xt);return e.appendHeader(Ct.header).appendBody(Ct.body),t.appendHeader(Yt.header).appendBody(Yt.body),{vertex:function(){return e},fragment:function(){return t}}},Ya=function(e){switch(e){case d.symbolCircle:return la();case d.symbolSquare:return za();case d.symbolTriangle:return Na();case d.symbolCross:return Pa();case d.symbolDiamond:return Ba();case d.symbolStar:return Ra();case d.symbolWye:return Ma();default:throw new Error("Unrecognised symbol: ".concat(e));}},La=function(e){var t=$t().divisor(1),a=e,n=!0,i=function(e){if(t(e),!!n){if(!Array.isArray(a))throw new Error("Expected an array, received: ".concat(a));if(a.length!==t.size())throw new Error("Expected array of length: ".concat(t.size(),", recieved array of length: ").concat(a.length));var i=e.context();i["vertexAttrib".concat(a.length,"fv")](t.location(),a),i.disableVertexAttribArray(t.location()),n=!1}};return i.clear=function(){n=!0},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},we(i,t,"normalized","size","location"),i},Oa=function(){var e=st(),t=xa(0,1),a=t.offset(1),n=xa(0,1),i=n.offset(1),l=xa(0,1).type(Jt.UNSIGNED_BYTE),r=l.offset(1),o=sa().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(n).mainNextValueAttribute(i).definedAttribute(l).definedNextAttribute(r),d=function(){return!1},s=Ea,c=[],g=null,h=null,u=function(a){var r=s(e.xScale()),u=s(e.yScale()),f=!d(c,a);f&&(c=a,l.value(function(t,a){return e.defined()(t,a)}).data(a)),(f||r.scale!==g)&&(g=r.scale,"vertical"===e.orient()?t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a)),(f||u.scale!==h)&&(h=u.scale,"vertical"===e.orient()?n.value(function(t,a){return u.scale(e.mainValue()(t,a))}).data(a):n.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(a)),o.xScale(r.webglScale).yScale(u.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),o(a.length)};return u.equals=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},u.scaleMapper=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},ke(u,e,Ae("baseValue","bandwidth","align")),we(u,o,"context","lineWidth","pixelRatio"),u},Wa=function(){var e=d.symbol(),t=st(),a=Xe("g","point"),n=function(e){return"translate("+e[0]+", "+e[1]+")"},i=function(i){Qe(i)&&a.transition(i),i.each(function(i,l,r){var d=i.filter(t.defined()),s=a(o.select(r[l]),d);s.enter().attr("transform",function(e,a){return n(t.values(e,a).origin)}).attr("fill",ct.gray).attr("stroke",ct.black).append("path"),s.attr("transform",function(e,a){return n(t.values(e,a).origin)}).select("path").attr("d",e),t.decorate()(s,i,l)})};return ke(i,t,Ae("baseValue","bandwidth","align")),we(i,a,"key"),we(i,e,"type","size"),i},Ha=function(){var e=d.symbol(),t=st(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=ct.black,l.fillStyle=ct.gray,t.decorate()(l,a,n),e(a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return ke(a,t,Ae("baseValue","bandwidth","align")),we(a,e,"size","type","context"),a},Fa=function(){var e=function(e){return e.high},t=function(e){return e.low},n=function(e){return e.cross},l="vertical",r="center",o=function(){return 5},s=dt({decorate:function(){},defined:function(a,l){return ge(t,e,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=o(a,d),c=ot(r,i),g=s.xScale(),h=s.yScale();if("vertical"===l){var u=h(e(a,d));return{origin:[g(n(a,d))+c,u],high:0,low:h(t(a,d))-u,width:i}}var f=g(t(a,d));return{origin:[f,h(n(a,d))+c],high:g(e(a,d))-f,low:0,width:i}},s.xValues=function(){return"vertical"===l?[n]:[e,t]},s.yValues=function(){return"vertical"===l?[e,t]:[n]},s.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.lowValue=function(){return arguments.length?(t=rt(0>=arguments.length?void 0:arguments[0]),s):t},s.highValue=function(){return arguments.length?(e=rt(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(n=rt(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(o=rt(0>=arguments.length?void 0:arguments[0]),s):o},s.align=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},Ua=function(){var e=function(e){return e.date},t=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.close},o=function(){return 5},s="center",c=function(t,a){return g.xScale()(e(t,a))},g;return g=dt({decorate:function(){},defined:function(a,o){return ge(e,t,l,n,r)(a,o)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()}),g.values=function(e,a){var i=r(e,a),d=t(e,a),h=o(e,a),u=ot(s,h),f="";return i>d?f="up":i<d&&(f="down"),{cross:c(e,a)+u,open:g.yScale()(d),high:g.yScale()(n(e,a)),low:g.yScale()(l(e,a)),close:g.yScale()(i),width:h,direction:f}},g.xValues=function(){return[e]},g.yValues=function(){return[t,n,l,r]},g.crossValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],g):e},g.openValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],g):t},g.highValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],g):n},g.lowValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],g):l},g.yValue=g.closeValue=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],g):r},g.bandwidth=function(){return arguments.length?(o=rt(0>=arguments.length?void 0:arguments[0]),g):o},g.align=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],g):s},g},Ga=function(e,t){var a=Ua(),n=Xe("g",t),l=function(e){return"translate("+e.cross+", "+e.high+")"},r=function(e){return function(t){return Qe(e)?t.transition(e):t}},d=function(i){Qe(i)&&n.transition(i);var s=r(i);i.each(function(i,r,d){var c=i.filter(a.defined()),h=n(o.select(d[r]),c);h.enter().attr("transform",function(e,t){return l(a.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(n,r,i){var d=a.values(n,r),c="up"===d.direction?ct.green:ct.red,g=s(o.select(i[r])).attr("class",t+" "+d.direction).attr("stroke",c).attr("fill",c).attr("transform",function(){return l(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),g.select("path").attr("d",e([n]))}),a.decorate()(h,i,r)})};return we(d,n,"key"),ke(d,a),d},qa=function(e){var t=Ua(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.cross,i.high),l.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var r="up"===i.direction?ct.green:ct.red;l.strokeStyle=r,l.fillStyle=r,t.decorate()(l,a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return we(a,e,"context"),ke(a,t),a},Qa=function(e){var t=Ua(),a=aa(),n=aa(),i=aa(),l=aa(),r=aa(),o=aa().type(Jt.UNSIGNED_SHORT),d=aa().type(Jt.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(n).highValueAttribute(i).lowValueAttribute(l).closeValueAttribute(r).bandwidthAttribute(o).definedAttribute(d);var s=function(){return!1},c=Ea,g=[],h=null,u=null,f=function(f){var p=c(t.xScale()),m=c(t.yScale()),y=!s(g,f);y&&(g=f,o.value(function(e,a){return t.bandwidth()(e,a)}).data(f),d.value(function(e,a){return t.defined()(e,a)}).data(f)),(y||p.scale!==h)&&(h=p.scale,a.value(function(e,a){return p.scale(t.crossValue()(e,a))}).data(f)),(y||m.scale!==u)&&(u=m.scale,n.value(function(e,a){return m.scale(t.openValue()(e,a))}).data(f),i.value(function(e,a){return m.scale(t.highValue()(e,a))}).data(f),l.value(function(e,a){return m.scale(t.lowValue()(e,a))}).data(f),r.value(function(e,a){return m.scale(t.closeValue()(e,a))}).data(f)),e.xScale(p.webglScale).yScale(m.webglScale).decorate(function(e){return t.decorate()(e,f,0)}),e(f.length)};return f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},ke(f,t,Ae("align")),we(f,e,"context","lineWidth","pixelRatio"),f},Xa=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.value},o=function(e){return e.median},s="vertical",c="center",g=function(){return 5},h=dt({decorate:function(){},defined:function(a,d){return ge(l,n,t,e,r,o)(a,d)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return h.values=function(a,d){var i=g(a,d),u=ot(c,i),f=h.xScale(),p=h.yScale();if("vertical"===s){var m=p(n(a,d));return{origin:[f(r(a,d))+u,m],high:0,upperQuartile:p(e(a,d))-m,median:p(o(a,d))-m,lowerQuartile:p(t(a,d))-m,low:p(l(a,d))-m,width:i}}var y=f(l(a,d));return{origin:[y,p(r(a,d))+u],high:f(n(a,d))-y,upperQuartile:f(e(a,d))-y,median:f(o(a,d))-y,lowerQuartile:f(t(a,d))-y,low:0,width:i}},h.xValues=function(){return"vertical"===s?[r]:[e,t,n,l,o]},h.yValues=function(){return"vertical"===s?[e,t,n,l,o]:[r]},h.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],h):s},h.lowerQuartileValue=function(){return arguments.length?(t=rt(0>=arguments.length?void 0:arguments[0]),h):t},h.upperQuartileValue=function(){return arguments.length?(e=rt(0>=arguments.length?void 0:arguments[0]),h):e},h.lowValue=function(){return arguments.length?(l=rt(0>=arguments.length?void 0:arguments[0]),h):l},h.highValue=function(){return arguments.length?(n=rt(0>=arguments.length?void 0:arguments[0]),h):n},h.crossValue=function(){return arguments.length?(r=rt(0>=arguments.length?void 0:arguments[0]),h):r},h.medianValue=function(){return arguments.length?(o=rt(0>=arguments.length?void 0:arguments[0]),h):o},h.bandwidth=function(){return arguments.length?(g=rt(0>=arguments.length?void 0:arguments[0]),h):g},h.align=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],h):c},h},ja=function(){var e=[],t=function(e){return e},n=function(e,t){return t},i=dt({decorate:function(){},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return i.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},i.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},i.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i},Za=function(){var e=ja(),t=Xe("g"),a=Xe("g","multi"),n=function(n){Qe(n)&&(a.transition(n),t.transition(n));var i=e.mapping(),l=e.series(),r=e.xScale(),d=e.yScale();n.each(function(n,s,c){var g=a(o.select(c[s]),l);g.each(function(e,a,s){e.xScale(r).yScale(d);var c=i(n,a,l),g=t(o.select(s[a]),[c]);g.call(e)}),g.selection().order(),e.decorate()(g,n,s)})};return ke(n,e),we(n,a,"key"),n},Ka=function(){var e=null,t=ja(),a=function(a){var n=t.mapping(),i=t.series(),l=t.xScale(),r=t.yScale();i.forEach(function(o,s){var c=n(a,s,i);o.context(e).xScale(l).yScale(r);var g;o.decorate?(g=o.decorate(),o.decorate(function(e,n,l){t.decorate()(e,a,s),g(e,n,l)})):t.decorate()(e,a,s),o(c),g&&o.decorate(g)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},ke(a,t),a},Ja=function(){var e=null,t=1,a=ja(),n=function(n){var i=a.mapping(),l=a.series(),r=a.xScale(),o=a.yScale();l.forEach(function(d,s){var c=i(n,s,l);d.context(e).pixelRatio(t).xScale(r).yScale(o);var g;d.decorate?(g=d.decorate(),d.decorate(function(e,t,l){a.decorate()(e,n,s),g(e,t,l)})):a.decorate()(e,n,s),d(c),g&&d.decorate(g)})};return n.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},n.pixelRatio=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},ke(n,a),n},$a=function(){var e=function(){return 50},n="center",l=a.scaleBand(),r=dt({decorate:function(){},xScale:a.scaleLinear(),yScale:a.scaleLinear()});return r.offsetScaleForDatum=function(a,r,o){var i=e(r,o),d=ot(n,i),s=i/2;return l.domain(t.range(0,a.length)).range([-s+d,s+d])},r.bandwidth=function(){return arguments.length?(e=rt(0>=arguments.length?void 0:arguments[0]),r):e},r.align=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},ke(r,l,De({paddingInner:"paddingOuter"})),r},en=function(e){return e.sort(t.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},tn=function(){var e=function(e){return e.x},n=function(e){return e.y},l=function(e){return e.color},r=function(){return 5},o=function(){return 5},d=s.interpolateViridis,c=dt({decorate:function(){},defined:function(t,a){return ge(e,n,l)(t,a)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return c.pathGenerator=We().x(0).y(0),c.colorScale=function(e){var n=e.map(l);return a.scaleLinear().domain([t.min(n),t.max(n)])},c.values=function(t,a){return{x:c.xScale()(e(t,a)),y:c.yScale()(n(t,a)),colorValue:l(t,a),width:o(t,a),height:r(t,a)}},c.xValues=function(){return[e]},c.yValues=function(){return[n]},c.xValue=function(){return arguments.length?(e=rt(0>=arguments.length?void 0:arguments[0]),c):e},c.yValue=function(){return arguments.length?(n=rt(0>=arguments.length?void 0:arguments[0]),c):n},c.colorValue=function(){return arguments.length?(l=rt(0>=arguments.length?void 0:arguments[0]),c):l},c.colorInterpolate=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],c):d},c.xBandwidth=function(){return arguments.length?(o=rt(0>=arguments.length?void 0:arguments[0]),c):o},c.yBandwidth=function(){return arguments.length?(r=rt(0>=arguments.length?void 0:arguments[0]),c):r},ke(c,c.pathGenerator,De({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),c},an=function(e){return"function"==typeof e?e:function(){return e}},nn=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},i=n,l=function(){},r="horizontal",d=Xe("g","annotation-line"),s=function(a){if(Qe(a)&&d.transition(a),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var s="horizontal"===r,c=s?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},h=s?"x2":"y2",u=s?e:t,f=s?t:e,p=s?"left-handle":"bottom-handle",m=s?"right-handle":"top-handle",y=s?"9":"0",b=s?"0":"9",v=s?"0.32em":"0.71em",x=s?"start":"middle",S=u.range(),w=function(){return c(S[0],f(n.apply(void 0,arguments)))},V=S[1]-S[0];a.each(function(e,t,a){var n=d(o.select(a[t]),e),s=n.enter().attr("transform",w).style("stroke","#bbb");s.append("line").attr(h,V),s.append("g").classed(p,!0).style("stroke","none"),s.append("g").classed(m,!0).style("stroke","none").attr("transform",c(V,0)).append("text").attr("text-anchor",x).attr("x",y).attr("y",b).attr("dy",v),n.attr("class","annotation-line ".concat(r)),n.attr("transform",w),n.select("line").attr(h,V),n.select("g."+m).attr("transform",c(V,0)),n.select("text").text(i),l(n,e,t)})};return s.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],s):e},s.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],s):t},s.value=function(){return arguments.length?(n=an(0>=arguments.length?void 0:arguments[0]),s):n},s.label=function(){return arguments.length?(i=an(0>=arguments.length?void 0:arguments[0]),s):i},s.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},ln=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},l=n,r=function(){},o="horizontal",s=d.line(),c=function(a){if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var c="horizontal"===o,g=s.context(),h=c?e:t,u=c?t:e,f=h.domain(),p=c?9:0,m=c?0:9,b=c?"left":"center",v=c?"middle":"hanging";a.forEach(function(e,t){g.save(),g.beginPath(),g.strokeStyle="#bbb",g.fillStyle="#000",g.textAlign=b,g.textBaseline=v,r(g,e,t),s.context(g)(f.map(function(t){var a=[h(t),u(n(e))];return c?a:a.reverse()}));var a=c?h(f[1]):u(n(e)),i=c?u(n(e)):h(f[1]);g.fillText(l(e),a+p,i+m),g.fill(),g.stroke(),g.closePath(),g.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.value=function(){return arguments.length?(n=an(0>=arguments.length?void 0:arguments[0]),c):n},c.label=function(){return arguments.length?(l=an(0>=arguments.length?void 0:arguments[0]),c):l},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},we(c,s,"context"),c},rn=function(){var e=a.scaleIdentity(),t=[10],n=null,i=function(){var a;return null==n?e.ticks?(a=e).ticks.apply(a,M(t)):e.domain():n};return i.scale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.ticks=function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=a,i},i.tickArguments=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.tickValues=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},on=function(e){return e},dn=function(e){return e},sn=function(e,t,a,n){return e[t]?e[t].apply(e,a):n},cn=function(e){var t;return null!==(t=e.tickValues())&&void 0!==t?t:sn(e.scale(),"ticks",e.tickArguments(),e.scale().domain())},gn=function(e){var t;return null!==(t=e.tickFormat())&&void 0!==t?t:sn(e.scale(),"tickFormat",e.tickArguments(),dn)},hn=function(e){return e},un=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=[10],i=null,l=function(){},r=null,s=6,c=6,g=3,h=d.line(),u=Xe("g","tick").key(hn),f=Xe("path","domain"),p=function(){return{offset:[0,c+g]}},m=function(){return{path:[[0,0],[0,c]]}},y=a.labelOffset||p,b=a.tickPath||m,v=function(e,t){var a=0;return e.bandwidth&&(a=e.bandwidth()/2,e.round()&&(a=fe(a))),function(n){return t(e(n)+a,0)}},x=function(e,t){return w()?"translate(".concat(t,", ").concat(e,")"):"translate(".concat(e,", ").concat(t,")")},S=function(e){return w()?e.map(function(e){return[e[1],e[0]]}):e},w=function(){return"left"===e||"right"===e},V=function a(n){Qe(n)&&(u.transition(n),f.transition(n)),n.each(function(n,i,r){var d=r[i],c=o.select(d);d.__scale__||c.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===e?"start":"left"===e?"end":"middle");var p=d.__scale__||t;d.__scale__=t.copy();var m=cn(a),V=gn(a),k="bottom"===e||"right"===e?1:-1,C=function(e){var t=B(e,2),a=t[0],n=t[1];return[a,k*n]},A=t.range(),T=S([[A[0],k*s],[A[0],0],[A[1],0],[A[1],k*s]]),D=f(c,[n]);D.enter().attr("stroke","#000"),D.attr("d",h(T));var _=u(c,m),g=m.map(function(e,t){return y(e,t,m)}),I=m.map(function(e,t){return b(e,t,m)});_.enter().attr("transform",v(p,x)).append("path").attr("stroke","#000"),_.enter().append("text").attr("transform",function(e,t){return x.apply(void 0,M(C(g[t].offset)))}).attr("fill","#000"),_.exit().attr("transform",v(t,x)),_.select("path").attr("visibility",function(e,t){return I[t].hidden&&"hidden"}).attr("d",function(e,t){return h(S(I[t].path.map(C)))}),_.select("text").attr("visibility",function(e,t){return g[t].hidden&&"hidden"}).attr("transform",function(e,t){return x.apply(void 0,M(C(g[t].offset)))}).attr("dy",function(){var t="0em";return w()?t="0.32em":"bottom"===e&&(t="0.71em"),t}).text(V),_.attr("transform",v(t,x)),l(_,n,i)})};return V.tickFormat=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],V):r},V.tickSize=function(){return arguments.length?(c=s=+(0>=arguments.length?void 0:arguments[0]),V):c},V.tickSizeInner=function(){return arguments.length?(c=+(0>=arguments.length?void 0:arguments[0]),V):c},V.tickSizeOuter=function(){return arguments.length?(s=+(0>=arguments.length?void 0:arguments[0]),V):s},V.tickPadding=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],V):g},V.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],V):l},V.scale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],V):t},V.ticks=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=[].concat(t),V},V.tickArguments=function(){return arguments.length?(n=null==(0>=arguments.length?void 0:arguments[0])?[]:M(0>=arguments.length?void 0:arguments[0]),V):null===n?null:n.slice()},V.tickValues=function(){return arguments.length?(i=null==(0>=arguments.length?void 0:arguments[0])?[]:M(0>=arguments.length?void 0:arguments[0]),V):null===i?null:i.slice()},V.orient=function(){return e},V},fn=function e(t,a){var n=!1,i=function(e,t,i){var r=0,o=l.tickSizeInner()+l.tickPadding(),d=!1;if(n){var s=a(e),c=t<i.length-1?a(i[t+1]):a.range()[1];r=(c-s)/2,o=l.tickPadding(),d=t===i.length-1&&s===c}return{offset:[r,o],hidden:d}},l=un(t,a,{labelOffset:i}),e=function(e){return l(e)};return e.tickCenterLabel=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e):n},ke(e,l),e},pn=function(e){return fn("top",e)},mn=function(e){return fn("bottom",e)},yn=function(e){return fn("left",e)},bn=function(e){return fn("right",e)},vn=function(e,t){var a=null,n=function(e,a,n){if(t.step)return t.step();var i=t(e);return a<n.length-1?t(n[a+1])/i:2*(t.range()[1]-i)},i=function(e,t,i){var r=0;return r=a?a(e,t):n(e,t,i)/2,{path:[[r,0],[r,l.tickSizeInner()]],hidden:t===i.length-1}},l=un(e,t,{labelOffset:function(){return{offset:[0,l.tickPadding()]}},tickPath:i}),r=function(e){l(e)};return r.tickOffset=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},ke(r,l),r},xn=function(e){return function(t){var a=cn(e),n=gn(e),i=a.map(n),r=t.append("text"),o=i.map(function(e){return r.text(e).node().getBBox()}),d=ve.apply(Math,M(o.map(function(e){return e.height}))),s=ve.apply(Math,M(o.map(function(e){return e.width})));return r.remove(),{maxHeight:d,maxWidth:s,labelCount:i.length}}},Sn="__d3fc-elements__",wn=function(e){return e[Sn]||{}},Vn=function(e,t){e[Sn]=t},kn=function(e){return delete e[Sn]},Cn=function(e){return"D3FC-GROUP"===e.tagName?[e].concat(M(e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[e]},An=function(e){var t=wn(e),a=t.width,n=t.height,i=e.useDevicePixelRatio&&null!=window.devicePixelRatio?window.devicePixelRatio:1,l=e.clientWidth*i,r=e.clientHeight*i,o=e.children[0];Vn(e,{pixelRatio:i,width:l,height:r,resized:l!==a||r!==n,child:o})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var Tn=function(e){var t=wn(e),a=new CustomEvent("measure",{detail:t});e.dispatchEvent(a)},Dn=function(e){var t=wn(e),a=new CustomEvent("draw",{detail:t});e.dispatchEvent(a)},_n=function(e){var t=e.map(Cn).reduce(function(e,t){return e.concat(t)});t.forEach(An),t.forEach(Tn),t.forEach(Dn)},In=function(e){return wn(e.ownerDocument).queue||[]},En=function(e,t){var a=wn(e.ownerDocument),n=a.requestId;null==n&&(n=requestAnimationFrame(function(){var t=In(e);_n(t),zn(e)})),Vn(e.ownerDocument,{queue:t,requestId:n})},zn=function(e){return kn(e.ownerDocument)},Nn=function(e,t){var a=e;do if(a.parentNode===t)return!0;while(a=a.parentNode);return!1},Pn=function(e){var t=In(e),a=-1<t.indexOf(e);if(!a){var n=t.some(function(t){return Nn(e,t)});if(!n){var i=t.filter(function(t){return!Nn(t,e)});i.push(e),En(e,i)}}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Bn=function(e){null!=e.__measureListener__||(e.__measureListener__=function(t){return e.setMeasurements(t.detail)},e.addEventListener("measure",e.__measureListener__))},Rn=function(e){null==e.__measureListener__||(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)},Mn=function(e,t){return function(a){function n(){return w(this,n),i.apply(this,arguments)}C(n,a);var i=P(n);return k(n,[{key:"attributeChangedCallback",value:function(e){"use-device-pixel-ratio"===e?this.requestRedraw():void 0}},{key:"connectedCallback",value:function(){0===this.childNodes.length&&this.appendChild(e()),Bn(this)}},{key:"disconnectedCallback",value:function(){Rn(this)}},{key:"setMeasurements",value:function(e){var a=e.width,n=e.height,i=R(this.childNodes),l=i[0],r=i.slice(1);if(0<r.length)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,l,{width:a,height:n})}},{key:"requestRedraw",value:function(){Pn(this)}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")},set:function(e){e&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!e&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),n}(E(HTMLElement))},Yn=function(e){function t(){return w(this,t),a.apply(this,arguments)}C(t,e);var a=P(t);return k(t,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")},set:function(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),t}(Mn(function(){return document.createElement("canvas")},function(e,t,a){var n=a.width,i=a.height;if(t.setAttribute("width",n),t.setAttribute("height",i),e.setWebglViewport){var l=t.getContext("webgl");l.viewport(0,0,n,i)}})),Ln=function(e){e.autoResize?On(e):Wn(e)},On=function(e){null!=e.__autoResizeListener__||(e.__autoResizeListener__=function(){return Pn(e)},addEventListener("resize",e.__autoResizeListener__))},Wn=function(e){null==e.__autoResizeListener__||(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Hn=function(e){function t(){return w(this,t),a.apply(this,arguments)}C(t,e);var a=P(t);return k(t,[{key:"connectedCallback",value:function(){Ln(this)}},{key:"disconnectedCallback",value:function(){Wn(this)}},{key:"requestRedraw",value:function(){Pn(this)}},{key:"attributeChangedCallback",value:function(e){"auto-resize"===e?Ln(this):void 0}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),Ln(this)}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),t}(E(HTMLElement)),Fn=Mn(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(e,t,a){var n=a.width,i=a.height;t.setAttribute("viewBox","0 0 ".concat(n," ").concat(i))}),Un="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Gn=document.createElement("style");if(Gn.setAttribute("type","text/css"),document.querySelector("head").appendChild(Gn),Gn.styleSheet?Gn.styleSheet.cssText+=Un:Gn.textContent+=Un,"object"!==("undefined"==typeof customElements?"undefined":S(customElements))||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var qn=[],Qn=function(e,t){customElements.get(e)?qn.push(e):customElements.define(e,t)};Qn("d3fc-canvas",Yn),Qn("d3fc-group",Hn),Qn("d3fc-svg",Fn),0<qn.length&&console.warn("The d3fc components \"".concat(qn.join(", "),"\" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used."));var Xn=function(){for(var e={},t=function(t){for(var a=0,n=Object.keys(e),i;a<n.length;a++)i=n[a],t[i].apply(null,e[i]);return t},a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];for(var l=function(){var a=o[r];t[a]=function(){for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return i.length?(e[a]=i,t):e[a]}},r=0,o=n;r<o.length;r++)l();return t},jn="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}",Zn=document.createElement("style");Zn.setAttribute("type","text/css"),document.querySelector("head").appendChild(Zn),Zn.styleSheet?Zn.styleSheet.cssText+=jn:Zn.textContent+=jn;var Kn=function(e){return"function"==typeof e?e:function(){return e}},Jn=function(){var e=$n.apply(void 0,arguments),t=e.xScale,a=e.yScale,n=e.xAxis,i=e.yAxis,l=Kn(""),r=Kn(""),d=Kn(""),s=Kn(null),c=Kn(null),g=Kn("right"),h=Kn("bottom"),u=null,f=null,p=null,m=!1,y=!0,b=Xn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),v=function(){},x=Xn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=function(){},w=function(){},V=Xe("d3fc-group","cartesian-chart"),k=Xe("d3fc-canvas","webgl-plot-area"),C=Xe("d3fc-canvas","canvas-plot-area"),A=Xe("d3fc-svg","svg-plot-area"),T=Xe("d3fc-svg","x-axis").key(function(e){return e}),D=Xe("d3fc-svg","y-axis").key(function(e){return e}),_=Xe("div","chart-label"),I=Xe("div","x-label").key(function(e){return e}),E=Xe("div","y-label").key(function(e){return e}),z=function(e){return function(t){return Qe(e)?t.transition(e):t}},N=function(e){var N=z(e);e.each(function(e,z,P){var B=V(o.select(P[z]),[e]);B.enter().attr("auto-resize",""),_(B,[h(e)]).attr("class",function(e){return"top"===e?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(e){return"top"===e?0:"1em"}).style("margin-top",function(e){return"top"===e?"1em":0}).text(l(e)),I(B,[h(e)]).attr("class",function(e){return"x-label ".concat(e,"-label")}).text(r(e)),E(B,[g(e)]).attr("class",function(e){return"y-label ".concat(e,"-label")}).text(d(e)),k(B,u?[e]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",y).on("draw",function(e,n){var i=e.detail,l=i.child,r=i.pixelRatio;u.context(m?null:l.getContext("webgl")).pixelRatio(r).xScale(t).yScale(a),u(n)}),B.select(".webgl-plot-area>canvas").on("webglcontextlost",function(e){console.warn("WebGLRenderingContext lost"),e.preventDefault(),m=!0,B.node().requestRedraw()}).on("webglcontextrestored",function(){console.info("WebGLRenderingContext restored"),m=!1,B.node().requestRedraw()}),C(B,f?[e]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",y).on("draw",function(e,n){var i=e.detail,l=i.child,r=i.pixelRatio,o=l.getContext("2d");o.save(),y&&o.scale(r,r),f.context(o).xScale(t).yScale(a),f(n),o.restore()}),A(B,p?[e]:[]).classed("plot-area",!0).on("draw",function(e,n){var i=e.detail.child;p.xScale(t).yScale(a),N(o.select(i).datum(n)).call(p)}),T(B,[h(e)]).attr("class",function(e){return"x-axis ".concat(e,"-axis")}).style("height",s(e)).on("measure",function(e,a){var n=e.detail,i=n.width,l=n.height,r=n.child;"top"===a&&o.select(r).attr("viewBox","0 ".concat(-l," ").concat(i," ").concat(l)),t.range([0,i])}).on("draw",function(e,a){var i=e.detail.child,l="top"===a?n.top(t):n.bottom(t);l.decorate(v),N(o.select(i).datum(a)).call(b(l))}),D(B,[g(e)]).attr("class",function(e){return"y-axis ".concat(e,"-axis")}).style("width",c(e)).on("measure",function(e,t){var n=e.detail,i=n.width,l=n.height,r=n.child;"left"===t&&o.select(r).attr("viewBox","".concat(-i," 0 ").concat(i," ").concat(l)),a.range([l,0])}).on("draw",function(e,t){var n=e.detail.child,l="left"===t?i.left(a):i.right(a);l.decorate(S),N(o.select(n).datum(t)).call(x(l))}),B.each(function(e,t,a){return a[t].requestRedraw()}),w(B,e,z)})},P=Ae(/range\w*/,/tickFormat/);return ke(N,t,P,Ie("x")),ke(N,a,P,Ie("y")),ke(N,b,Ie("x")),ke(N,x,Ie("y")),N.xOrient=function(){return arguments.length?(h=Kn(0>=arguments.length?void 0:arguments[0]),N):h},N.yOrient=function(){return arguments.length?(g=Kn(0>=arguments.length?void 0:arguments[0]),N):g},N.xDecorate=function(){return arguments.length?(v=0>=arguments.length?void 0:arguments[0],N):v},N.yDecorate=function(){return arguments.length?(S=0>=arguments.length?void 0:arguments[0],N):S},N.chartLabel=function(){return arguments.length?(l=Kn(0>=arguments.length?void 0:arguments[0]),N):l},N.xLabel=function(){return arguments.length?(r=Kn(0>=arguments.length?void 0:arguments[0]),N):r},N.yLabel=function(){return arguments.length?(d=Kn(0>=arguments.length?void 0:arguments[0]),N):d},N.xAxisHeight=function(){return arguments.length?(s=Kn(0>=arguments.length?void 0:arguments[0]),N):s},N.yAxisWidth=function(){return arguments.length?(c=Kn(0>=arguments.length?void 0:arguments[0]),N):c},N.webglPlotArea=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],N):u},N.canvasPlotArea=function(){return arguments.length?(f=0>=arguments.length?void 0:arguments[0],N):f},N.svgPlotArea=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],N):p},N.decorate=function(){return arguments.length?(w=0>=arguments.length?void 0:arguments[0],N):w},N.useDevicePixelRatio=function(){return arguments.length?(y=0>=arguments.length?void 0:arguments[0],N):y},N},$n=function(){for(var e={xScale:a.scaleIdentity(),yScale:a.scaleIdentity(),xAxis:{bottom:mn,top:pn},yAxis:{right:bn,left:yn}},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1!==n.length||n[0].domain||n[0].range?Object.assign(e,{xScale:n[0]||e.xScale,yScale:n[1]||e.yScale}):Object.assign(e,n[0])},ei=function(e){return"function"==typeof e?e:function(){return e}},ti=function(e,t){return function(){var a=ei(""),n=t,i=function(){},l=Jn.apply(void 0,arguments),r=function(t){e(l,n),l.decorate(function(e,t,n){e.enter().select(".x-label").style("height","1em").style("line-height","1em");var r=l.yOrient()(t);e.enter().append("div").attr("class","y-label-container").style("grid-column","left"===r?1:5).style("-ms-grid-column","left"===r?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),e.select(".y-label-container>.y-label").text(a),i(e,t,n)}),t.call(l)};return ke(r,l,Te(/^x/,/^y/,"chartLabel")),r.yLabel=function(){return arguments.length?(a=ei(0>=arguments.length?void 0:arguments[0]),r):a},r.plotArea=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r}},ai=ti(function(e,t){return e.svgPlotArea(t)},gt),ni=ti(function(e,t){return e.canvasPlotArea(t)},ht),ii=function(e){return"x"===e?g.brushX():"y"===e?g.brushY():"xy"===e?g.brush():void 0},li=function(e){return[e[1],e[0]]},ri=function(e){var t=ii(e),n=c.dispatch("brush","start","end"),i=a.scaleIdentity(),l=a.scaleIdentity(),r=Xe("g","brush"),d=function(t,a,n){return"x"===e?t.map(a):"y"===e?t.map(n):"xy"===e?[[a(t[0][0]),n(t[0][1])],[a(t[1][0]),n(t[1][1])]]:void 0},s=function(e){return d(e,a.scaleLinear().domain(i.range()).invert,a.scaleLinear().domain(li(l.range())).invert)},g=function(e){return d(e,a.scaleLinear().domain(i.range()),a.scaleLinear().domain(li(l.range())))},h=function(t){var n=a.scaleLinear().domain(i.domain());return"x"===e?t.map(n.invert):"xy"===e?[n.invert(t[0][0]),n.invert(t[1][0])]:void 0},u=function(t){var n=a.scaleLinear().domain(li(l.domain()));return"y"===e?[t[1],t[0]].map(n.invert):"xy"===e?[n.invert(t[1][1]),n.invert(t[0][1])]:void 0},f=function(e){if(!(e.sourceEvent&&"draw"===e.sourceEvent.type))if(e.selection){var t=g(e.selection);n.call(e.type,{},{selection:t,xDomain:h(t),yDomain:u(t)})}else n.call(e.type,{},{})},p=function(e){e.each(function(e,a,n){t.extent([[i.range()[0],l.range()[1]],[i.range()[1],l.range()[0]]]),t.on("end",function(e){return f(e)}).on("brush",function(e){return f(e)}).on("start",function(e){return f(e)});var d=r(o.select(n[a]),[e]);d.call(t).call(t.move,e?s(e):null)})};return p.xScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.yScale=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},we(p,n,"on"),we(p,t,"filter","handleSize"),p},oi=function(e,t){if(null==e&&null==t)return!0;var a=e.domain(),n=t.domain();return a.length===n.length&&a.every(function(e,t){var a;return(null===e||void 0===e?void 0:e.valueOf())===(null===(a=n[t])||void 0===a?void 0:a.valueOf())})},di=function(e,t){return h.zoomIdentity.scale(e.k/t.k).translate(e.x-t.x,e.y-t.y)},si=Symbol("d3fc-domain-zoom");e.annotationCanvasBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",l=function(e){return e.from},r=function(e){return e.to},o=function(){},s=We().horizontalAlign("right").verticalAlign("top"),c=function(a){if("horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c=s.context(),g="horizontal"===n,h=g?e:t,u=g?t:e,f=h.range(),p=f[1]-f[0],m=g?"x":"y",y=g?"y":"x",b=g?"height":"width",v=g?"width":"height";a.forEach(function(e,t){c.save(),c.beginPath(),c.strokeStyle="transparent",s[y](u(l(e))),s[m](f[0]),s[v](p),s[b](u(r(e))-u(l(e))),o(c,e,t),s.context(c)([e],t),c.fill(),c.stroke(),c.closePath(),c.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},c.fromValue=function(){return arguments.length?(l=an(0>=arguments.length?void 0:arguments[0]),c):l},c.toValue=function(){return arguments.length?(r=an(0>=arguments.length?void 0:arguments[0]),c):r},we(c,s,"context"),c},e.annotationCanvasCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=Ha(),r=ln(),o=ln().orient("vertical"),s=a.scaleIdentity(),c=a.scaleIdentity(),g=Ka().series([r,o,l]).xScale(s).yScale(c).mapping(function(e){return[e]}),h=function(a){a.forEach(function(a){s.range(n.range()),c.range(i.range()),l.crossValue(e).mainValue(t),r.value(t),o.value(e),g(a)})};h.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],h):e},h.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],h):t},h.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],h):n},h.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],h):i};var u=Te("label","decorate");return ke(h,r,u,Ie("y")),ke(h,o,u,Ie("x")),we(h,l,"decorate"),we(h,g,"context"),h},e.annotationCanvasGridline=function(){var e=function(){},t=function(){},a=rn(),n=rn(),l=d.line(),r=function(){var r=l.context(),o=a.scale(),s=n.scale();a().forEach(function(t,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",e(r,t,a),l.context(r)(s.domain().map(function(e){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()}),n().forEach(function(e,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",t(r,e,a),l.context(r)(o.domain().map(function(t){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},ke(r,a,Ie("x")),ke(r,n,Ie("y")),we(r,l,"context"),r},e.annotationCanvasLine=ln,e.annotationSvgBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",i=function(e){return e.from},l=function(e){return e.to},r=function(){},d=Xe("g","annotation-band"),s=We().horizontalAlign("center").verticalAlign("center").x(0).y(0),c=function(a){if(Qe(a)&&d.transition(a),"horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c="horizontal"===n,g=c?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},h=c?e:t,u=c?t:e,f=h.range(),p=f[1]-f[0],m=c?"height":"width",y=c?"width":"height",b=function(){return g((f[1]+f[0])/2,(u(l.apply(void 0,arguments))+u(i.apply(void 0,arguments)))/2)};s[y](p),s[m](function(){return u(l.apply(void 0,arguments))-u(i.apply(void 0,arguments))}),a.each(function(e,t,a){var i=d(o.select(a[t]),e);i.enter().attr("transform",b).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(n)).attr("transform",b).select("path").attr("d",function(e,t){return s([e],t)}),r(i,e,t)})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.fromValue=function(){return arguments.length?(i=an(0>=arguments.length?void 0:arguments[0]),c):i},c.toValue=function(){return arguments.length?(l=an(0>=arguments.length?void 0:arguments[0]),c):l},c},e.annotationSvgCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=function(){},r=Xe("g","annotation-crosshair"),d=Wa(),s=nn(),c=nn().orient("vertical"),h=a.scaleIdentity(),u=a.scaleIdentity(),f=Za().series([s,c,d]).xScale(h).yScale(u).mapping(function(e){return[e]}),p=function(a){Qe(a)&&r.transition(a),a.each(function(a,p,m){var y=r(o.select(m[p]),a);y.enter().style("pointer-events","none"),h.range(n.range()),u.range(i.range()),d.crossValue(e).mainValue(t),s.value(t),c.value(e),y.call(f),l(y,a,p)})};p.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],p):n},p.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l};var m=Te("label");return ke(p,s,m,Ie("y")),ke(p,c,m,Ie("x")),p},e.annotationSvgGridline=function(){var e=function(){},t=function(){},a=rn(),n=rn(),i=Xe("line","gridline-y").key(on),l=Xe("line","gridline-x").key(on),r=function(r){Qe(r)&&(i.transition(r),l.transition(r)),r.each(function(r,d,s){var c=s[d],g=o.select(s[d]),h=a.scale(),u=n.scale(),f=c.__x_scale__||h;c.__x_scale__=h.copy();var p=a(),m=i(g,p);m.enter().attr("x1",f).attr("x2",f).attr("y1",u.range()[0]).attr("y2",u.range()[1]).attr("stroke","#bbb"),m.attr("x1",h).attr("x2",h).attr("y1",u.range()[0]).attr("y2",u.range()[1]),m.exit().attr("x1",h).attr("x2",h),e(m,p,d);var y=c.__y_scale__||u;c.__y_scale__=u.copy();var b=n(),v=l(g,b);v.enter().attr("y1",y).attr("y2",y).attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("stroke","#bbb"),v.attr("y1",u).attr("y2",u).attr("x1",h.range()[0]).attr("x2",h.range()[1]),v.exit().attr("y1",u).attr("y2",u),t(v,b,d)})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},ke(r,i,De({key:"xKey"})),ke(r,l,De({key:"yKey"})),ke(r,a,Ie("x")),ke(r,n,Ie("y")),r},e.annotationSvgLine=nn,e.autoBandwidth=function(e){var a=.75,n=function(e){if(1>=e.length)return 10;e=en(e);var n=t.pairs(e).map(function(e){return xe(e[0]-e[1])}),i=t.min(n);return a*i},i=function(t,a,i){if(t.bandwidth)return t.bandwidth();var l=Array.isArray(a)?(d=[]).concat.apply(d,M(a)):a,r=l.filter(e.defined()).map(i()).map(t),o=n(r),d;return o},l=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(i(e.xScale(),t,e.xValue)),e.yBandwidth(i(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(i(a,t,e.crossValue))}};t instanceof o.selection?t.each(function(t,n,i){a(t),e(o.select(i[n]))}):(a(t),e(t))};return ke(l,e),l.widthFraction=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l},e.axisBottom=mn,e.axisLabelOffset=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},l=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},r=function(a){var i=xn(e)(a),r=i.maxHeight,o=i.maxWidth,d=i.labelCount,s=e.scale().range()[1],c="auto"===t?pe((n()?r:o)*d/s)+1:t,g=a.select("text"),h=g.attr("transform"),u=function(e){return n()?"translate(".concat(e%c*o*l(),", 0)"):"translate(0, ".concat(e%c*r*l(),")")};g.attr("transform",function(e,t){return"".concat(h," ").concat(u(t))})},o=function(t){return e(t)};return e.decorate(function(e){r(e),a(e)}),o.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.labelOffsetDepth=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},ke(o,e,Ae("decorate")),o},e.axisLabelRotate=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},i=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},l=function(){switch(e.orient()){case"top":case"right":return"start";default:return"end";}},r=function(a){var r=xn(e)(a),o=r.maxHeight,d=r.maxWidth,s=r.labelCount,c=s*d,g;if("auto"===t){var h=e.scale().range()[1];g=h<c?90*me(1,(c/h-.8)/2):0}else g=t;return{rotate:n()?pe(i()*(90-g)):pe(-g),maxHeight:o,maxWidth:d,anchor:g?l():"middle"}},o=function(e){var t=r(e),a=t.rotate,l=t.maxHeight,o=t.anchor,d=e.select("text"),s=d.attr("transform"),c=i()*pe(l/2),g=n()?"translate(".concat(c,", 0)"):"translate(0, ".concat(c,")");d.style("text-anchor",o).attr("transform","".concat(s," ").concat(g," rotate(").concat(a," 0 0)"))},d=function(t){e(t)};return e.decorate(function(e){o(e),a(e)}),d.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.labelRotate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},ke(d,e,Ae("decorate")),d},e.axisLeft=yn,e.axisOrdinalBottom=function(e){return vn("bottom",e)},e.axisOrdinalLeft=function(e){return vn("left",e)},e.axisOrdinalRight=function(e){return vn("right",e)},e.axisOrdinalTop=function(e){return vn("top",e)},e.axisRight=bn,e.axisTop=pn,e.brush=function(){return ri("xy")},e.brushX=function(){return ri("x")},e.brushY=function(){return ri("y")},e.bucket=oe,e.chartCanvasCartesian=ni,e.chartCartesian=Jn,e.chartSvgCartesian=ai,e.dataJoin=Xe,e.discontinuityIdentity=Z,e.discontinuityRange=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=function(e,t){return e>t[0]&&e<t[1]},i=function(e,t){return e[0]>=t[0]&&e[1]<=t[1]},l={};l.distance=function(e,a){e=l.clampUp(e),a=l.clampDown(a);var n=t.filter(function(t){return i(t,[e,a])}),r=n.map(function(e){return e[1]-e[0]});return a-e-r.reduce(function(e,t){return e+t},0)};var r=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t};return l.offset=function(e,a){if(0<a){var n=function(){for(var n=l.clampUp(e),i=a,o;0<i;)if(o=t.filter(function(e){return e[0]>n}).sort(function(e,t){return e[0]-t[0]}),o.length){var d=o[0],s=d[0]-n;s>i?(n=r(n,i),i=0):(n=d[1],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===S(n))return n.v}else{var i=function(){for(var n=l.clampDown(e),i=a,o;0>i;)if(o=t.filter(function(e){return e[1]<n}).sort(function(e,t){return t[0]-e[0]}),o.length){var d=o[0],s=d[1]-n;s<i?(n=r(n,i),i=0):(n=d[0],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===S(i))return i.v}},l.clampUp=function(e){return t.reduce(function(e,t){return n(e,t)?t[1]:e},e)},l.clampDown=function(e){return t.reduce(function(e,t){return n(e,t)?t[0]:e},e)},l.copy=function(){return l},l},e.discontinuitySkipUtcWeekends=function(){return Ee(function(e){return e.getUTCDay()},n.utcDay,n.utcSaturday,n.utcMonday)},e.discontinuitySkipUtcWeeklyPattern=function(e){return Me(e,Ye)},e.discontinuitySkipWeekends=function(){return Ee(function(e){return e.getDay()},n.timeDay,n.timeSaturday,n.timeMonday)},e.discontinuitySkipWeeklyPattern=function(e){return Me(e,Re)},e.effectivelyZero=qe,e.exclude=Ae,e.extentDate=ae,e.extentLinear=te,e.extentTime=ae,e.feedGdax=re,e.group=function(){var e="",t="vertical",a=function(e,t){return+e[t]},n=function(t){return Object.keys(t[0]).filter(function(t){return t!==e}).map(function(n){var i=t.filter(function(e){return e[n]}).map(function(t){var i=[t[e],a(t,n)];return i.data=t,i});return i.key=n,i})},i=function(t){return t.map(function(t){var n=Object.keys(t).filter(function(t){return t!==e}).map(function(e){var n=[e,a(t,e)];return n.data=t,n});return n.key=t[e],n})},l=function(e){return"vertical"===t?n(e):i(e)};return l.key=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.orient=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l},e.include=Te,e.includeMap=De,e.indicatorBollingerBands=b,e.indicatorElderRay=j,e.indicatorEnvelope=X,e.indicatorExponentialMovingAverage=v,e.indicatorForceIndex=function(){var e=function(e){return e.volume},t=function(e){return e.close},a=v().period(13),n=y().period(2).defined(function(a){return null!=t(a)&&null!=e(a)}).accumulator(function(a){return a&&m((t(a[1])-t(a[0]))*e(a[1]))}),i=function(e){var t=n(e);return a(t)};return i.volumeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.closeValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},we(i,a,"period"),i},e.indicatorMacd=x,e.indicatorMovingAverage=Q,e.indicatorRelativeStrengthIndex=function(){var e=y().period(14),a=function(e,t){return t+(e[e.length-1]-t)/e.length},n=function(e){var t=B(e,2),a=t[0],n=t[1];return a<n?0:a-n},i=function(e){var t=B(e,2),a=t[0],n=t[1];return a>n?0:n-a},l=function(e,n){return void 0===n?t.mean(e):a(e,n)},r=function(){var e,a,r;return function(o){if(!o)return void(void 0!==e&&(e=NaN));if(void 0===e)return void(e=o[0]);var d=t.pairs([e].concat(M(o)));a=l(d.map(n),a),r=l(d.map(i),r);var s=isNaN(e)?NaN:r/a;return m(100-100/(1+s))}},o=function(t){var a=r();return e.accumulator(a),e(t)};return we(o,e,"period","value"),o},e.indicatorStochasticOscillator=function(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=y().period(5).defined(function(t){return null!=e(t)&&null!=a(t)&&null!=n(t)}).accumulator(function(i){var l=i&&t.max(i,a),r=i&&t.min(i,n),o=i&&100*(e(i[i.length-1])-r)/(l-r);return m(o)}),l=Q().period(3),r=function(e){var t=i(e),a=l(t);return t.map(function(e,t){return{k:e,d:a[t]}})};return r.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},ke(r,i,De({period:"kPeriod"})),ke(r,l,De({period:"dPeriod"})),r},e.isTransition=Qe,e.largestTriangleOneBucket=de,e.largestTriangleThreeBucket=se,e.layoutAnnealing=function(){var e=1e3,t=1,a=function(e){switch(e.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return e.width*e.height/8;}return e.width*e.height/4},n=function(e){return r?e.width*e.height-Ze(e,r):0},i=function(e,t,i){return Ke(i,t)+n(e)+a(e)},l=function(a){for(var n=e,l=function(e,t){return be((t-e)/n)>Math.random()},r=at().locationScore(i).winningScore(l).rectangles(a);0<n;){var o=it(a),d=nt($e(a[o]));r=r(d,o),n-=t}return r.rectangles()},r;return l.temperature=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.cooling=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.bounds=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],l):r},l},e.layoutBoundingBox=function(){var e=[0,0],t=function(t){return t.map(function(t){var a=t.x,n=t.y;return a+t.width>e[0]&&(a-=t.width),n+t.height>e[1]&&(n-=t.height),{height:t.height,width:t.width,x:a,y:n}})};return t.bounds=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},e.layoutGreedy=function(){var e=function(e){return n?e.width*e.height-Ze(e,n):0},t=function(t,a,n){return Ke(n,a)+e(t)},a=function(e){var a=at().locationScore(t).rectangles(e);return e.forEach(function(e,t){$e(e).forEach(function(e){a=a(e,t)})}),a.rectangles()},n;return a.bounds=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],a):n},a},e.layoutLabel=function(e){var t=function(){},n=function(){return[0,0]},l=function(e){return[e.x,e.y]},r=e||function(e){return e},d=function(){},s=a.scaleIdentity(),c=a.scaleIdentity(),h=Xe("g","label"),u=function(e){e.each(function(e,a,i){var u=h(o.select(i[a]),e).call(d),g=u.nodes(),f=g.map(function(e,t){var a=o.select(e).datum(),i=l(a,t,g),r=[s(i[0]),c(i[1])],d=n(a,t,g);return{hidden:!1,x:r[0],y:r[1],width:d[0],height:d[1]}}),p=r(f);u.attr("style",function(e,t){return"display:"+(p[t].hidden?"none":"inherit")}).attr("transform",function(e,t){return"translate("+p[t].x+", "+p[t].y+")"}).attr("layout-width",function(e,t){return p[t].width}).attr("layout-height",function(e,t){return p[t].height}).attr("anchor-x",function(e,t){return f[t].x-p[t].x}).attr("anchor-y",function(e,t){return f[t].y-p[t].y}),u.call(d),t(u,e,a)})};return ke(u,h,Te("key")),ke(u,r),u.size=function(){return arguments.length?(n=Ge(0>=arguments.length?void 0:arguments[0]),u):n},u.position=function(){return arguments.length?(l=Ge(0>=arguments.length?void 0:arguments[0]),u):l},u.component=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},u.decorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},u.yScale=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u},e.layoutRemoveOverlaps=function(e){e=e||function(e){return e};var t=function(t){t=e(t);for(var a=function(){var e=t.filter(function(e){return!e.hidden}),a=e.map(function(t,a){return[t,Ke(e,a)]}),n=lt(a,function(e,t){return t[1]-e[1]});return 0<n[1]?void(n[0].hidden=!0):"break"},n;n=a(),"break"!==n;);return t};return ke(t,e),t},e.layoutTextLabel=function(){var e=2,t=function(e){return e},a=Xe("text"),n=Xe("rect"),i=Xe("circle"),l=function(l){l.each(function(l,r,d){var s=d[r],c=o.select(s),g=+s.getAttribute("layout-width"),h=+s.getAttribute("layout-height"),u=n(c,[l]);u.attr("width",g).attr("height",h);var f=+s.getAttribute("anchor-x"),p=+s.getAttribute("anchor-y"),m=i(c,[l]);m.attr("r",2).attr("cx",f).attr("cy",p);var y=a(c,[l]);y.enter().attr("dy","0.9em").attr("transform","translate(".concat(e,", ").concat(e,")")),y.text(t)})};return l.padding=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(t=Ge(0>=arguments.length?void 0:arguments[0]),l):t},l},e.modeMedian=ce,e.pointer=function(){function e(e){var t=o.pointer(e);a.call("point",this,[{x:t[0],y:t[1]}])}function t(){void a.call("point",this,[])}var a=c.dispatch("point"),n=function(a){a.on("mouseenter.pointer",e).on("mousemove.pointer",e).on("mouseleave.pointer",t)};return we(n,a,"on"),n},e.prefix=Ie,e.randomFinancial=le,e.randomGeometricBrownianMotion=ne,e.randomSkipWeekends=function(e){var t=e.date.getDay();return 0!==t&&6!==t},e.rebind=we,e.rebindAll=ke,e.scaleDiscontinuous=J,e.seriesCanvasArea=function(){var e=st(),t=d.area(),a=function(a){var n=t.context();t.defined(e.defined());var l=a.map(e.values);t.x(function(e,t){return l[t].transposedX}).y(function(e,t){return l[t].transposedY});var r="vertical"===e.orient()?"y":"x";t[r+"0"](function(e,t){return l[t].y0}),t[r+"1"](function(e,t){return l[t].y}),n.beginPath(),n.fillStyle=ct.gray,n.strokeStyle="transparent",e.decorate()(n,a),t(a),n.fill(),n.stroke(),n.closePath()};return ke(a,e,Ae("bandwidth","align")),we(a,t,"curve","context"),a},e.seriesCanvasBar=function(){var e=st(),t=We().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},n=function(t){return"vertical"===e.orient()?t.width:t.height},i=function(i){var l=t.context(),r=i.filter(e.defined()),o=r.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),o.forEach(function(r,o){l.save(),l.beginPath(),l.translate(r.origin[0],r.origin[1]),l.fillStyle=ct.darkGray,l.strokeStyle="transparent",e.decorate()(l,r.d,o),a(t)(-r.height),n(t)(r.width),t([r]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return ke(i,e),we(i,t,"context"),i},e.seriesCanvasBoxPlot=function(){var e=Xa(),t=Fe().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.fillStyle=ct.gray,l.strokeStyle=ct.black,e.decorate()(l,a,n),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return ke(a,e),we(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return qa(He())},e.seriesCanvasErrorBar=function(){var e=Fa(),t=Ue().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=ct.black,l.fillStyle=ct.gray,e.decorate()(l,a,n),t.high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return ke(a,e),we(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=$a(),a=function(a){a.forEach(function(n,l){var r="horizontal"!==e.orient(),o=function(e,n){var i=t.offsetScaleForDatum(a,e,n),o=r?t.xScale():t.yScale();return o(e)+i(l)+i.bandwidth()/2};r?(e.xScale(o),e.yScale(t.yScale())):(e.yScale(o),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,n){return t.offsetScaleForDatum(a,e,n).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),e(n)})};return ke(a,e,Ae("decorate","xScale","yScale")),ke(a,t,Ae("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=tn(),t=function(t){var a=t.filter(e.defined()),n=e.colorInterpolate(),l=e.colorScale(a),r=e.pathGenerator.context();a.forEach(function(t,a){r.save(),r.beginPath();var i=e.values(t,a);r.translate(i.x,i.y),r.fillStyle=n(l(i.colorValue)),r.strokeStyle="transparent",e.decorate()(r,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return we(t,e.pathGenerator,"context"),ke(t,e),t},e.seriesCanvasLine=ht,e.seriesCanvasMulti=Ka,e.seriesCanvasOhlc=function(){return qa(Oe())},e.seriesCanvasPoint=Ha,e.seriesCanvasRepeat=function(){var e="vertical",t=ht(),a=Ka(),n=function(n){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),a(n)};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},ke(n,a,Ae("series","mapping")),n},e.seriesSvgArea=function(){var e=st(),t=d.area(),a=Xe("path","area"),n=function(n){Qe(n)&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=n.map(e.values);t.x(function(e,t){return r[t].transposedX}).y(function(e,t){return r[t].transposedY});var d="vertical"===e.orient()?"y":"x";t[d+"0"](function(e,t){return r[t].y0}),t[d+"1"](function(e,t){return r[t].y});var s=a(o.select(l[i]),[n]);s.enter().attr("fill",ct.gray),s.attr("d",t),e.decorate()(s,n,i)})};return ke(n,e,Ae("bandwidth","align")),we(n,a,"key"),we(n,t,"curve"),n},e.seriesSvgBar=function(){var e=We().x(0).y(0),t=st(),a=Xe("g","bar"),n=function(e){return"vertical"===t.orient()?e.height:e.width},l=function(e){return"vertical"===t.orient()?e.width:e.height},r=function(e){return"translate("+e[0]+", "+e[1]+")"},d=function(i){Qe(i)&&a.transition(i),i.each(function(i,d,s){var c=t.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);var h=i.filter(t.defined()),u=h.map(t.values);e.width(0).height(0),"vertical"===t.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var f=a(o.select(s[d]),h);f.enter().attr("transform",function(e,t){return r(u[t].baseOrigin)}).attr("class","bar "+t.orient()).attr("fill",ct.darkGray).append("path").attr("d",function(t,a){return l(e)(u[a].width),e([t])}),f.attr("transform",function(e,t){return r(u[t].origin)}).select("path").attr("d",function(t,a){return l(e)(u[a].width),n(e)(-u[a].height),e([t])}),t.decorate()(f,h,d)})};return ke(d,t),we(d,a,"key"),d},e.seriesSvgBoxPlot=function(){var e=Xa(),t=Xe("g","box-plot"),a=Fe().value(0),n=function(e){return function(t){return Qe(e)?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){Qe(i)&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=t(o.select(d[i]),s);c.enter().attr("stroke",ct.black).attr("fill",ct.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),c.each(function(t,n,i){var d=e.values(t,n);a.median(d.median).upperQuartile(d.upperQuartile).lowerQuartile(d.lowerQuartile).width(d.width).high(d.high).low(d.low),r(o.select(i[n])).attr("transform",l(d)).select("path").attr("d",a([t]))}),e.decorate()(c,n,i)})};return ke(r,e),we(r,t,"key"),we(r,a,"cap"),r},e.seriesSvgCandlestick=function(){return Ga(He(),"candlestick")},e.seriesSvgErrorBar=function(){var e=Fa(),t=Xe("g","error-bar"),a=Ue().value(0),n=function(e){return function(t){return Qe(e)?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){Qe(i)&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=s.map(e.values),h=t(o.select(d[i]),s);h.enter().attr("stroke",ct.black).attr("fill",ct.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),h.each(function(e,t,n){var i=c[t];a.high(i.high).low(i.low).width(i.width),r(o.select(n[t])).attr("transform",l(i)+" scale(1)").select("path").attr("d",a([e]))}),e.decorate()(h,n,i)})};return ke(r,e),we(r,t,"key"),r},e.seriesSvgGrouped=function(e){var t=$a(),a=Xe("g","grouped"),n=function(n){Qe(n)&&a.transition(n),n.each(function(n,i,l){var r=a(o.select(l[i]),n);r.enter().append("g"),r.select("g").each(function(a,l,r){var d=o.select(r[l]),s="horizontal"!==e.orient(),c=function(e,a){var i=t.offsetScaleForDatum(n,e,a),r=s?t.xScale():t.yScale();return r(e)+i(l)+i.bandwidth()/2};s?(e.xScale(c),e.yScale(t.yScale())):(e.yScale(c),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,a){return t.offsetScaleForDatum(n,e,a).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),d.call(e)})})};return ke(n,e,Ae("decorate","xScale","yScale")),ke(n,t,Ae("offsetScaleForDatum")),n},e.seriesSvgHeatmap=function(){var e=tn(),t=Xe("g","box"),a=function(e){return"translate("+e.x+", "+e.y+")"},n=function(n){n.each(function(n,i,l){var r=n.filter(e.defined()),s=e.colorValue(),c=e.colorInterpolate(),h=e.colorScale(r),u=t(o.select(l[i]),r);u.enter().append("path").attr("stroke","transparent"),u.attr("transform",function(t,n){return a(e.values(t,n))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return c(h(s(e,t)))}),e.decorate()(u,n,i)})};return ke(n,e),n},e.seriesSvgLine=gt,e.seriesSvgMulti=Za,e.seriesSvgOhlc=function(){return Ga(Oe(),"ohlc")},e.seriesSvgPoint=Wa,e.seriesSvgRepeat=function(){var e="vertical",t=gt(),a=Za(),n=function(n){return n.each(function(n,i,l){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),o.select(l[i]).call(a)})};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},ke(n,a,Ae("series","mapping")),n},e.seriesWebglArea=function(){var e=st(),t=xa(0,1),a=t.offset(1),n=xa(0,1),i=n.offset(1),l=xa(0,1),r=l.offset(1),o=xa(0,1).type(Jt.UNSIGNED_BYTE),d=o.offset(1),s=ia().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(n).mainNextValueAttribute(i).baseValueAttribute(l).baseNextValueAttribute(r).definedAttribute(o).definedNextAttribute(d),c=function(){return!1},g=Ea,h=[],u=null,f=null,p=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=g(e.xScale()),p=g(e.yScale()),m=!c(h,a);m&&(h=a,o.value(function(t,a){return e.defined()(t,a)}).data(a)),(m||r.scale!==u)&&(u=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),(m||p.scale!==f)&&(f=p.scale,l.value(function(t,a){return p.scale(e.baseValue()(t,a))}).data(a),n.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(a)),s.xScale(r.webglScale).yScale(p.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),s(a.length)};return p.equals=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],p):c},p.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],p):g},ke(p,e,Ae("bandwidth","align")),we(p,s,"context","pixelRatio"),p},e.seriesWebglBar=function(){var e=st(),t=aa(),a=aa(),n=aa(),i=aa().type(Jt.UNSIGNED_SHORT),l=aa().type(Jt.UNSIGNED_BYTE),r=ua().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=Ea,s=[],c=null,g=null,h=function(h){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var u=d(e.xScale()),f=d(e.yScale()),p=!o(s,h);p&&(s=h,i.value(function(t,a){return e.bandwidth()(t,a)}).data(h),l.value(function(t,a){return e.defined()(t,a)}).data(h)),(p||u.scale!==c)&&(c=u.scale,t.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(h)),(p||f.scale!==g)&&(g=f.scale,n.value(function(t,a){return f.scale(e.baseValue()(t,a))}).data(h),a.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(h)),r.xScale(u.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,h,0)}),r(h.length)};return h.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],h):o},h.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],h):d},ke(h,e,Ae("align")),we(h,r,"context","pixelRatio"),h},e.seriesWebglBoxPlot=function(){var e=Xa(),t=aa(),a=aa(),n=aa(),i=aa(),l=aa(),r=aa(),o=aa().type(Jt.UNSIGNED_SHORT),d=aa().type(Jt.UNSIGNED_SHORT),s=aa().type(Jt.UNSIGNED_BYTE),c=va().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(n).medianValueAttribute(i).lowerQuartileValueAttribute(l).lowValueAttribute(r).bandwidthAttribute(o).capAttribute(d).definedAttribute(s),g=function(){return!1},h=Ea,u=[],f=null,p=null,m=rt(20),y=function(y){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var b=h(e.xScale()),v=h(e.yScale()),x=!g(u,y);x&&(u=y,o.value(function(t,a){return e.bandwidth()(t,a)}).data(y),d.value(function(e,t){return m(e,t)}).data(y),s.value(function(t,a){return e.defined()(t,a)}).data(y)),(x||b.scale!==f)&&(f=b.scale,t.value(function(t,a){return b.scale(e.crossValue()(t,a))}).data(y)),(x||v.scale!==p)&&(p=v.scale,a.value(function(t,a){return v.scale(e.highValue()(t,a))}).data(y),n.value(function(t,a){return v.scale(e.upperQuartileValue()(t,a))}).data(y),i.value(function(t,a){return v.scale(e.medianValue()(t,a))}).data(y),l.value(function(t,a){return v.scale(e.lowerQuartileValue()(t,a))}).data(y),r.value(function(t,a){return v.scale(e.lowValue()(t,a))}).data(y)),c.xScale(b.webglScale).yScale(v.webglScale).decorate(function(t){return e.decorate()(t,y,0)}),c(y.length)};return y.cap=function(){return arguments.length?(m=rt(0>=arguments.length?void 0:arguments[0]),y):m},y.equals=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],y):g},y.scaleMapper=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],y):h},ke(y,e,Ae("align")),we(y,c,"context","lineWidth","pixelRatio"),y},e.seriesWebglCandlestick=function(){return Qa(ya())},e.seriesWebglErrorBar=function(){var e=Fa(),t=aa(),a=aa(),n=aa(),i=aa().type(Jt.UNSIGNED_SHORT),l=aa().type(Jt.UNSIGNED_BYTE),r=pa().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=Ea,s=[],c=null,g=null,h=function(h){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var u=d(e.xScale()),f=d(e.yScale()),p=!o(s,h);p&&(s=h,i.value(function(t,a){return e.bandwidth()(t,a)}).data(h),l.value(function(t,a){return e.defined()(t,a)}).data(h)),(p||u.scale!==c)&&(c=u.scale,t.value(function(t,a){return u.scale(e.crossValue()(t,a))}).data(h)),(p||f.scale!==g)&&(g=f.scale,a.value(function(t,a){return f.scale(e.highValue()(t,a))}).data(h),n.value(function(t,a){return f.scale(e.lowValue()(t,a))}).data(h)),r.xScale(u.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,h,0)}),r(h.length)};return h.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],h):o},h.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],h):d},ke(h,e,Ae("align")),we(h,r,"context","lineWidth","pixelRatio"),h},e.seriesWebglLine=Oa,e.seriesWebglMulti=Ja,e.seriesWebglOhlc=function(){return Qa(ga())},e.seriesWebglPoint=function(){var e=st(),t=rt(64),a=d.symbolCircle,n=aa(),i=aa(),l=aa().type(Jt.UNSIGNED_SHORT),r=aa().type(Jt.UNSIGNED_BYTE),o=ra().crossValueAttribute(n).mainValueAttribute(i).sizeAttribute(l).definedAttribute(r),s=function(){return!1},c=Ea,g=[],h=null,u=null,f=function(d){var f=c(e.xScale()),p=c(e.yScale()),m=!s(g,d);m&&(g=d,l.value(function(e,a){return t(e,a)}).data(d),r.value(function(t,a){return e.defined()(t,a)}).data(d)),(m||f.scale!==h)&&(h=f.scale,"vertical"===e.orient()?n.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(d):n.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(d)),(m||p.scale!==u)&&(u=p.scale,"vertical"===e.orient()?i.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(d):i.value(function(t,a){return p.scale(e.crossValue()(t,a))}).data(d)),o.xScale(f.webglScale).yScale(p.webglScale).type(Ya(a)).decorate(function(t){return e.decorate()(t,d,0)}),o(d.length)};return f.size=function(){return arguments.length?(t=rt(0>=arguments.length?void 0:arguments[0]),f):t},f.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],f):a},f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},ke(f,e,Ae("baseValue","bandwidth","align")),we(f,o,"context","pixelRatio"),f},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return Oa()},a=Ja(),n=[],i=function(i){if("vertical"===e){var l=n;n=i[0].map(function(e,a){return a<l.length?l[a]:t()}),a.series(n).mapping(function(e,t){return e.map(function(e){return e[t]})})}else{var r=n;n=i.map(function(e,a){return a<r.length?r[a]:t()}),a.series(n).mapping(function(e,t){return e[t]})}a(i)};return i.series=function(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.length?(t="function"==typeof a[0].xScale&&"function"==typeof a[0].yScale?function(){return a[0]}:a[0],n=[],i):t},i.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n=[],i):e},ke(i,a,Ae("series","mapping")),i},e.shapeBar=We,e.shapeBoxPlot=Fe,e.shapeCandlestick=He,e.shapeErrorBar=Ue,e.shapeOhlc=Oe,e.webglAdjacentAttribute=xa,e.webglAttribute=aa,e.webglBaseAttribute=$t,e.webglBufferBuilder=ft,e.webglElementIndices=da,e.webglFillColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=aa().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(St.header).appendBodyIfNotExists(St.body),e.fragmentShader().appendHeaderIfNotExists(jt.header).appendBodyIfNotExists(jt.body),Array.isArray(a))e.buffers().attribute("aFillColor",La(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aFillColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},we(i,t,"data"),i},e.webglProgramBuilder=yt,e.webglScaleLinear=Sa,e.webglScaleLog=wa,e.webglScaleMapper=Ea,e.webglScalePow=Va,e.webglSeriesArea=ia,e.webglSeriesBar=ua,e.webglSeriesBoxPlot=va,e.webglSeriesCandlestick=ya,e.webglSeriesErrorBar=pa,e.webglSeriesLine=sa,e.webglSeriesOhlc=ga,e.webglSeriesPoint=ra,e.webglShaderBuilder=bt,e.webglStrokeColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=aa().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(wt.header).appendBodyIfNotExists(wt.body),e.fragmentShader().appendHeaderIfNotExists(Zt.header).appendBodyIfNotExists(Zt.body),Array.isArray(a))e.buffers().attribute("aStrokeColor",La(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aStrokeColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},we(i,t,"data"),i},e.webglSymbolMapper=Ya,e.webglTypes=Jt,e.webglUniform=pt,e.zoom=function(){var e=c.dispatch("zoom"),t=h.zoom().on("zoom",function(a){var n=a.transform,i=this,l=n,r=i[si],d=r.originalXScale,s=r.previousXScale,c=r.xScale,g=r.originalYScale,h=r.previousYScale,u=r.yScale,f=r.previousTransform;oi(s,c)&&oi(h,u)||(d=null===c||void 0===c?void 0:c.copy(),g=null===u||void 0===u?void 0:u.copy(),l=di(n,f)),null!=c&&(s=l.rescaleX(d.range(c.range())),c.domain(s.domain())),null!=u&&(h=l.rescaleY(g.range(u.range())),u.domain(h.domain())),f=l,i[si]={originalXScale:d,previousXScale:s,xScale:c,originalYScale:g,previousYScale:h,yScale:u,previousTransform:f},l!==n&&t.transform(o.select(i),l),e.call("zoom")}),a=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null==a&&null==n&&console.warn("Without an xScale and/or yScale specified, this component won't do anything. Perhaps you forgot to specify them e.g. selection.call(zoom, x, y)?"),e.each(function(e,t,i){var l=i[t][si];null!=l&&l.xScale===a&&l.yScale===n&&console.warn("This component should only be called on a selection once. Perhaps you're missing an .enter()?");var r=null===a||void 0===a?void 0:a.copy(),o=null===n||void 0===n?void 0:n.copy();i[t][si]={originalXScale:r,previousXScale:r,xScale:a,originalYScale:o,previousYScale:o,yScale:n,previousTransform:h.zoomIdentity}}).call(t)};return we(a,e,"on"),we(a,t,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate"),a},Object.defineProperty(e,"__esModule",{value:!0})});
